"use strict";(self.webpackChunklearncs_set=self.webpackChunklearncs_set||[]).push([[5542],{3905:(e,t,r)=>{r.d(t,{Zo:()=>u,kt:()=>m});var n=r(67294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var s=n.createContext({}),c=function(e){var t=n.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):a(a({},t),e)),r},u=function(e){var t=c(e.components);return n.createElement(s.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,l=e.originalType,s=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),p=c(r),h=o,m=p["".concat(s,".").concat(h)]||p[h]||d[h]||l;return r?n.createElement(m,a(a({ref:t},u),{},{components:r})):n.createElement(m,a({ref:t},u))}));function m(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var l=r.length,a=new Array(l);a[0]=h;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[p]="string"==typeof e?e:o,a[1]=i;for(var c=2;c<l;c++)a[c]=r[c];return n.createElement.apply(null,a)}return n.createElement.apply(null,r)}h.displayName="MDXCreateElement"},77414:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>s,contentTitle:()=>a,default:()=>d,frontMatter:()=>l,metadata:()=>i,toc:()=>c});var n=r(87462),o=(r(67294),r(3905));const l={title:"Common UI Bugs - Project 3 BYOW",description:"Project 3 Common UI Bugs."},a=void 0,i={unversionedId:"curriculum-resource/cs61b/projects/proj3/ui_bugs",id:"curriculum-resource/cs61b/projects/proj3/ui_bugs",title:"Common UI Bugs - Project 3 BYOW",description:"Project 3 Common UI Bugs.",source:"@site/docs/curriculum-resource/cs61b/projects/proj3/ui_bugs.md",sourceDirName:"curriculum-resource/cs61b/projects/proj3",slug:"/curriculum-resource/cs61b/projects/proj3/ui_bugs",permalink:"/docs/curriculum-resource/cs61b/projects/proj3/ui_bugs",draft:!1,tags:[],version:"current",frontMatter:{title:"Common UI Bugs - Project 3 BYOW",description:"Project 3 Common UI Bugs."},sidebar:"tutorialSidebar",previous:{title:"Checkoff - Project 3 BYOW",permalink:"/docs/curriculum-resource/cs61b/projects/proj3/proj3checkoff"},next:{title:"cs61c",permalink:"/docs/curriculum-resource/cs61c/"}},s={},c=[{value:"Invisible Text",id:"invisible-text",level:2},{value:"Strange Tiles",id:"strange-tiles",level:2},{value:"The Problem",id:"the-problem",level:3},{value:"The Solution",id:"the-solution",level:3},{value:"Flickering UI",id:"flickering-ui",level:2},{value:"The Problem",id:"the-problem-1",level:3},{value:"The Solution",id:"the-solution-1",level:3}],u={toc:c},p="wrapper";function d(e){let{components:t,...l}=e;return(0,o.kt)(p,(0,n.Z)({},u,l,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"invisible-text"},"Invisible Text"),(0,o.kt)("p",null,"Getting text to show up on screen can be somewhat tricky. Several things need to\ngo right:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"the font color needs to be set to something visible (i.e. white)"),(0,o.kt)("li",{parentName:"ul"},"the location of the text needs to be in bounds"),(0,o.kt)("li",{parentName:"ul"},"you need to call ",(0,o.kt)("inlineCode",{parentName:"li"},"StdDraw.show()")," after the text is drawn so it shows up\non screen"),(0,o.kt)("li",{parentName:"ul"},"you need to make sure that your text does not get drawn over or cleared right\nafter it is drawn (for example, ",(0,o.kt)("inlineCode",{parentName:"li"},"TERenderer.renderTiles")," clears the entire\nscreen)")),(0,o.kt)("p",null,"Here's some code that should correctly draw text:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-java"},'TERenderer ter = new TERenderer();\nter.initialize(80, 40, 0, 0);\nStdDraw.setPenColor(Color.WHITE);\nStdDraw.text(40, 30, "I like cheese");\nStdDraw.show();\n')),(0,o.kt)("h2",{id:"strange-tiles"},"Strange Tiles"),(0,o.kt)("h3",{id:"the-problem"},"The Problem"),(0,o.kt)("p",null,"One common glitch is that after implementing other parts of the UI, the tile\ncharacters will suddenly misbehave. ",(0,o.kt)("a",{target:"_blank",href:r(60317).Z},"Here's a program"),"\nthat demonstrates the problem; paste this in your ",(0,o.kt)("inlineCode",{parentName:"p"},"core")," folder if you want to\nfollow along."),(0,o.kt)("p",null,"You'll notice that the flowers no longer look like flowers anymore. This is\nbecause the font size is much too large, so the characters for each tile are\nspilling into the other tiles."),(0,o.kt)("h3",{id:"the-solution"},"The Solution"),(0,o.kt)("p",null,"The problem is that the tiles are being drawn with too large a font size, so\nwe'll use a method that resets the font size. Call the ",(0,o.kt)("inlineCode",{parentName:"p"},"resetFont")," method in\nyour TERenderer class:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-java"},'/** Sets the font to the correct font for drawing tiles */\npublic void resetFont() {\n    Font font = new Font("Monaco", Font.BOLD, TILE_SIZE - 2);\n    StdDraw.setFont(font);\n}\n')),(0,o.kt)("p",null,"Then, call the method before you draw the tiles:"),(0,o.kt)("table",null,(0,o.kt)("thead",null,(0,o.kt)("th",null,"Before"),(0,o.kt)("th",null,"After")),(0,o.kt)("tr",null,(0,o.kt)("td",{markdown:"block"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-java"},"// render frame\nter.renderFrame(tiles);\n"))),(0,o.kt)("td",{markdown:"block"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-java"},"// render frame\nter.resetFont();\nter.renderFrame(tiles);\n"))))),(0,o.kt)("p",null,"Now, when you run ",(0,o.kt)("inlineCode",{parentName:"p"},"FlowerWorld")," the tiles should be drawn correctly."),(0,o.kt)("h2",{id:"flickering-ui"},"Flickering UI"),(0,o.kt)("h3",{id:"the-problem-1"},"The Problem"),(0,o.kt)("p",null,"One common glitch is a flickering UI. ",(0,o.kt)("a",{target:"_blank",href:r(32521).Z},"Here's a program"),"\nthat demonstrates the problem; paste this in your ",(0,o.kt)("inlineCode",{parentName:"p"},"core")," folder if you want to\nfollow along."),(0,o.kt)("p",null,'You\'ll notice the text "HUD goes here" should flicker. The reason why is because\nthere are multiple ',(0,o.kt)("inlineCode",{parentName:"p"},"StdDraw.show()")," calls per frame - one inside the ",(0,o.kt)("inlineCode",{parentName:"p"},"renderFrame"),"\ncall, and one on line 31. This means that there are actually two frames being\ndrawn on screen every loop: one without the text, and one with the text. It's\nsomewhat random which frame you see, which is why the UI flickers between the\ntwo."),(0,o.kt)("h3",{id:"the-solution-1"},"The Solution"),(0,o.kt)("p",null,"The problem is that there's an extra ",(0,o.kt)("inlineCode",{parentName:"p"},"StdDraw.show()")," call inside ",(0,o.kt)("inlineCode",{parentName:"p"},"renderFrame"),",\nso we'll create a version of that method without it. Instead, use the ",(0,o.kt)("inlineCode",{parentName:"p"},"drawTiles")," method in\nyour ",(0,o.kt)("inlineCode",{parentName:"p"},"TERenderer")," class:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-java"},"    /**\n     * Like renderFrame, but does not clear the screen or show the tiles\n     */\n    public void drawTiles(TETile[][] world) {\n        for (int x = 0; x < world.length; x += 1) {\n            for (int y = 0; y < world[x].length; y += 1) {\n                world[x][y].draw(x + xOffset, y + yOffset);\n            }\n        }\n    }\n")),(0,o.kt)("p",null,"Replace the ",(0,o.kt)("inlineCode",{parentName:"p"},"renderFrame")," call in the main game loop:"),(0,o.kt)("table",null,(0,o.kt)("thead",null,(0,o.kt)("th",null,"Before"),(0,o.kt)("th",null,"After")),(0,o.kt)("tr",null,(0,o.kt)("td",{markdown:"block"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-java"},"// main game loop\nwhile (true) {\n    ter.renderFrame(tiles);\n    ...\n}\n"))),(0,o.kt)("td",{markdown:"block"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-java"},"// main game loop\nwhile (true) {\n    StdDraw.clear(Color.BLACK);\n    ter.drawTiles(tiles);\n    ...\n}\n"))))),(0,o.kt)("p",null,"Now, when you run ",(0,o.kt)("inlineCode",{parentName:"p"},"WaterWorld")," the text should no longer flicker."))}d.isMDXComponent=!0},60317:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/files/FlowerWorld-34eda492e48ed6ee94651c801547b66b.txt"},32521:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/files/WaterWorld-8485e5b6cbe116019bb6b8b329d718c2.txt"}}]);