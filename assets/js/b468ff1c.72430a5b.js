"use strict";(self.webpackChunklearncs_set=self.webpackChunklearncs_set||[]).push([[62875],{3905:(e,t,n)=>{n.d(t,{Zo:()=>h,kt:()=>m});var a=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},h=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},d="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,s=e.parentName,h=l(e,["components","mdxType","originalType","parentName"]),d=p(n),u=o,m=d["".concat(s,".").concat(u)]||d[u]||c[u]||r;return n?a.createElement(m,i(i({ref:t},h),{},{components:n})):a.createElement(m,i({ref:t},h))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,i=new Array(r);i[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[d]="string"==typeof e?e:o,i[1]=l;for(var p=2;p<r;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},8903:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>c,frontMatter:()=>r,metadata:()=>l,toc:()=>p});var a=n(87462),o=(n(67294),n(3905));const r={title:"12-network"},i="Networked programs",l={unversionedId:"curriculum-resource/py4e/book/12",id:"curriculum-resource/py4e/book/12",title:"12-network",description:"While many of the examples in this book have focused on reading files",source:"@site/docs/curriculum-resource/py4e/book/12.md",sourceDirName:"curriculum-resource/py4e/book",slug:"/curriculum-resource/py4e/book/12",permalink:"/docs/curriculum-resource/py4e/book/12",draft:!1,tags:[],version:"current",frontMatter:{title:"12-network"},sidebar:"tutorialSidebar",previous:{title:"11-regex",permalink:"/docs/curriculum-resource/py4e/book/11"},next:{title:"13-web",permalink:"/docs/curriculum-resource/py4e/book/13"}},s={},p=[{value:"Hypertext Transfer Protocol - HTTP",id:"hypertext-transfer-protocol---http",level:2},{value:"The world\u2019s simplest web browser",id:"the-worlds-simplest-web-browser",level:2},{value:"Retrieving an image over HTTP",id:"retrieving-an-image-over-http",level:2},{value:"Retrieving web pages with <code>urllib</code>",id:"retrieving-web-pages-with-urllib",level:2},{value:"Reading binary files using <code>urllib</code>",id:"reading-binary-files-using-urllib",level:2},{value:"Parsing HTML and scraping the web",id:"parsing-html-and-scraping-the-web",level:2},{value:"Parsing HTML using regular expressions",id:"parsing-html-using-regular-expressions",level:2},{value:"Parsing HTML using BeautifulSoup",id:"parsing-html-using-beautifulsoup",level:2},{value:"Bonus section for Unix / Linux users",id:"bonus-section-for-unix--linux-users",level:2},{value:"Glossary",id:"glossary",level:2},{value:"Exercises",id:"exercises",level:2}],h={toc:p},d="wrapper";function c(e){let{components:t,...r}=e;return(0,o.kt)(d,(0,a.Z)({},h,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"networked-programs"},"Networked programs"),(0,o.kt)("p",null,"While many of the examples in this book have focused on reading files\nand looking for data in those files, there are many different sources of\ninformation when one considers the Internet."),(0,o.kt)("p",null,"In this chapter we will pretend to be a web browser and retrieve web\npages using the Hypertext Transfer Protocol (HTTP). Then we will read\nthrough the web page data and parse it."),(0,o.kt)("h2",{id:"hypertext-transfer-protocol---http"},"Hypertext Transfer Protocol ","-"," HTTP"),(0,o.kt)("p",null,"The network protocol that powers the web is actually quite simple and\nthere is built-in support in Python called ",(0,o.kt)("inlineCode",{parentName:"p"},"socket")," which\nmakes it very easy to make network connections and retrieve data over\nthose sockets in a Python program."),(0,o.kt)("p",null,"A ",(0,o.kt)("em",{parentName:"p"},"socket")," is much like a file, except that a single socket\nprovides a two-way connection between two programs. You can both read\nfrom and write to the same socket. If you write something to a socket,\nit is sent to the application at the other end of the socket. If you\nread from the socket, you are given the data which the other application\nhas sent."),(0,o.kt)("p",null,"But if you try to read a socket ",(0,o.kt)("a",{parentName:"p",href:"https://www.py4e.com/html3/12-network#fn1"},"1")," when the program on the\nother end of the socket has not sent any data, you just sit and wait. If\nthe programs on both ends of the socket simply wait for some data\nwithout sending anything, they will wait for a very long time, so an\nimportant part of programs that communicate over the Internet is to have\nsome sort of protocol."),(0,o.kt)("p",null,"A protocol is a set of precise rules that determine who is to go\nfirst, what they are to do, and then what the responses are to that\nmessage, and who sends next, and so on. In a sense the two applications\nat either end of the socket are doing a dance and making sure not to\nstep on each other\u2019s toes."),(0,o.kt)("p",null,"There are many documents that describe these network protocols. The\nHypertext Transfer Protocol is described in the following document:"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://www.w3.org/Protocols/rfc2616/rfc2616.txt"},"https://www.w3.org/Protocols/rfc2616/rfc2616.txt")),(0,o.kt)("p",null,"This is a long and complex 176-page document with a lot of detail. If\nyou find it interesting, feel free to read it all. But if you take a\nlook around page 36 of RFC2616 you will find the syntax for the GET\nrequest. To request a document from a web server, we make a connection,\ne.g.\xa0to the ",(0,o.kt)("inlineCode",{parentName:"p"},"www.pr4e.org")," server on port 80, and then send a\nline of the form"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"GET http://data.pr4e.org/romeo.txt HTTP/1.0")),(0,o.kt)("p",null,"where the second parameter is the web page we are requesting, and\nthen we also send a blank line. The web server will respond with some\nheader information about the document and a blank line followed by the\ndocument content."),(0,o.kt)("h2",{id:"the-worlds-simplest-web-browser"},"The world\u2019s simplest web browser"),(0,o.kt)("p",null,"Perhaps the easiest way to show how the HTTP protocol works is to\nwrite a very simple Python program that makes a connection to a web\nserver and follows the rules of the HTTP protocol to request a document\nand display what the server sends back."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"import socket\n\nmysock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\nmysock.connect(('data.pr4e.org', 80))\ncmd = 'GET http://data.pr4e.org/romeo.txt HTTP/1.0\\r\\n\\r\\n'.encode()\nmysock.send(cmd)\n\nwhile True:\n    data = mysock.recv(512)\n    if len(data) < 1:\n        break\n    print(data.decode(),end='')\n\nmysock.close()\n\n# Code: https://www.py4e.com/code3/socket1.py\n")),(0,o.kt)("p",null,"First the program makes a connection to port 80 on the server ",(0,o.kt)("a",{parentName:"p",href:"http://www.pr4e.com/"},"www.pr4e.com"),". Since our program is\nplaying the role of the \u201cweb browser\u201d, the HTTP protocol says we must\nsend the GET command followed by a blank line. ",(0,o.kt)("inlineCode",{parentName:"p"},"\\r\\n"),"\nsignifies an EOL (end of line), so ",(0,o.kt)("inlineCode",{parentName:"p"},"\\r\\n\\r\\n")," signifies\nnothing between two EOL sequences. That is the equivalent of a blank\nline."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"A Socket Connection",src:n(2519).Z,width:"521",height:"269"}),"\nA Socket Connection"),(0,o.kt)("p",null,"Once we send that blank line, we write a loop that receives data in\n512-character chunks from the socket and prints the data out until there\nis no more data to read (i.e., the recv() returns an empty string)."),(0,o.kt)("p",null,"The program produces the following output:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'HTTP/1.1 200 OK\nDate: Wed, 11 Apr 2018 18:52:55 GMT\nServer: Apache/2.4.7 (Ubuntu)\nLast-Modified: Sat, 13 May 2017 11:22:22 GMT\nETag: "a7-54f6609245537"\nAccept-Ranges: bytes\nContent-Length: 167\nCache-Control: max-age=0, no-cache, no-store, must-revalidate\nPragma: no-cache\nExpires: Wed, 11 Jan 1984 05:00:00 GMT\nConnection: close\nContent-Type: text/plain\n\nBut soft what light through yonder window breaks\nIt is the east and Juliet is the sun\nArise fair sun and kill the envious moon\nWho is already sick and pale with grief\n')),(0,o.kt)("p",null,"The output starts with headers which the web server sends to describe\nthe document. For example, the ",(0,o.kt)("inlineCode",{parentName:"p"},"Content-Type")," header\nindicates that the document is a plain text document\n( ",(0,o.kt)("inlineCode",{parentName:"p"},"text/plain"),")."),(0,o.kt)("p",null,"After the server sends us the headers, it adds a blank line to\nindicate the end of the headers, and then sends the actual data of the\nfile ",(0,o.kt)("em",{parentName:"p"},"romeo.txt"),"."),(0,o.kt)("p",null,"This example shows how to make a low-level network connection with\nsockets. Sockets can be used to communicate with a web server or with a\nmail server or many other kinds of servers. All that is needed is to\nfind the document which describes the protocol and write the code to\nsend and receive the data according to the protocol."),(0,o.kt)("p",null,"However, since the protocol that we use most commonly is the HTTP web\nprotocol, Python has a special library specifically designed to support\nthe HTTP protocol for the retrieval of documents and data over the\nweb."),(0,o.kt)("p",null,"One of the requirements for using the HTTP protocol is the need to\nsend and receive data as bytes objects, instead of strings. In the\npreceding example, the ",(0,o.kt)("inlineCode",{parentName:"p"},"encode()")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"decode()"),"\nmethods convert strings into bytes objects and back again."),(0,o.kt)("p",null,"The next example uses ",(0,o.kt)("inlineCode",{parentName:"p"},"b''")," notation to specify that a\nvariable should be stored as a bytes object. ",(0,o.kt)("inlineCode",{parentName:"p"},"encode()")," and\n",(0,o.kt)("inlineCode",{parentName:"p"},"b''")," are equivalent."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},">>> b'Hello world'\nb'Hello world'\n>>> 'Hello world'.encode()\nb'Hello world'\n")),(0,o.kt)("h2",{id:"retrieving-an-image-over-http"},"Retrieving an image over HTTP"),(0,o.kt)("p",null,"In the above example, we retrieved a plain text file which had\nnewlines in the file and we simply copied the data to the screen as the\nprogram ran. We can use a similar program to retrieve an image across\nusing HTTP. Instead of copying the data to the screen as the program\nruns, we accumulate the data in a string, trim off the headers, and then\nsave the image data to a file as follows:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'import socket\nimport time\n\nHOST = \'data.pr4e.org\'\nPORT = 80\nmysock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\nmysock.connect((HOST, PORT))\nmysock.sendall(b\'GET http://data.pr4e.org/cover3.jpg HTTP/1.0\\r\\n\\r\\n\')\ncount = 0\npicture = b""\n\nwhile True:\n    data = mysock.recv(5120)\n    if len(data) < 1: break\n    #time.sleep(0.25)\n    count = count + len(data)\n    print(len(data), count)\n    picture = picture + data\n\nmysock.close()\n\n# Look for the end of the header (2 CRLF)\npos = picture.find(b"\\r\\n\\r\\n")\nprint(\'Header length\', pos)\nprint(picture[:pos].decode())\n\n# Skip past the header and save the picture data\npicture = picture[pos+4:]\nfhand = open("stuff.jpg", "wb")\nfhand.write(picture)\nfhand.close()\n\n# Code: https://www.py4e.com/code3/urljpeg.py\n')),(0,o.kt)("p",null,"When the program runs, it produces the following output:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'$ python urljpeg.py\n5120 5120\n5120 10240\n4240 14480\n5120 19600\n...\n5120 214000\n3200 217200\n5120 222320\n5120 227440\n3167 230607\nHeader length 393\nHTTP/1.1 200 OK\nDate: Wed, 11 Apr 2018 18:54:09 GMT\nServer: Apache/2.4.7 (Ubuntu)\nLast-Modified: Mon, 15 May 2017 12:27:40 GMT\nETag: "38342-54f8f2e5b6277"\nAccept-Ranges: bytes\nContent-Length: 230210\nVary: Accept-Encoding\nCache-Control: max-age=0, no-cache, no-store, must-revalidate\nPragma: no-cache\nExpires: Wed, 11 Jan 1984 05:00:00 GMT\nConnection: close\nContent-Type: image/jpeg\n')),(0,o.kt)("p",null,"You can see that for this url, the ",(0,o.kt)("inlineCode",{parentName:"p"},"Content-Type")," header\nindicates that body of the document is an image\n( ",(0,o.kt)("inlineCode",{parentName:"p"},"image/jpeg"),"). Once the program completes, you can view the\nimage data by opening the file ",(0,o.kt)("inlineCode",{parentName:"p"},"stuff.jpg")," in an image\nviewer."),(0,o.kt)("p",null,"As the program runs, you can see that we don\u2019t get 5120 characters\neach time we call the ",(0,o.kt)("inlineCode",{parentName:"p"},"recv()")," method. We get as many\ncharacters as have been transferred across the network to us by the web\nserver at the moment we call ",(0,o.kt)("inlineCode",{parentName:"p"},"recv()"),". In this example, we\neither get as few as 3200 characters each time we request up to 5120\ncharacters of data."),(0,o.kt)("p",null,"Your results may be different depending on your network speed. Also\nnote that on the last call to ",(0,o.kt)("inlineCode",{parentName:"p"},"recv()")," we get 3167 bytes,\nwhich is the end of the stream, and in the next call to\n",(0,o.kt)("inlineCode",{parentName:"p"},"recv()")," we get a zero-length string that tells us that the\nserver has called ",(0,o.kt)("inlineCode",{parentName:"p"},"close()")," on its end of the socket and\nthere is no more data forthcoming."),(0,o.kt)("p",null,"We can slow down our successive ",(0,o.kt)("inlineCode",{parentName:"p"},"recv()")," calls by\nuncommenting the call to ",(0,o.kt)("inlineCode",{parentName:"p"},"time.sleep()"),". This way, we wait a\nquarter of a second after each call so that the server can \u201cget ahead\u201d\nof us and send more data to us before we call ",(0,o.kt)("inlineCode",{parentName:"p"},"recv()")," again.\nWith the delay, in place the program executes as follows:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'$ python urljpeg.py\n5120 5120\n5120 10240\n5120 15360\n...\n5120 225280\n5120 230400\n207 230607\nHeader length 393\nHTTP/1.1 200 OK\nDate: Wed, 11 Apr 2018 21:42:08 GMT\nServer: Apache/2.4.7 (Ubuntu)\nLast-Modified: Mon, 15 May 2017 12:27:40 GMT\nETag: "38342-54f8f2e5b6277"\nAccept-Ranges: bytes\nContent-Length: 230210\nVary: Accept-Encoding\nCache-Control: max-age=0, no-cache, no-store, must-revalidate\nPragma: no-cache\nExpires: Wed, 11 Jan 1984 05:00:00 GMT\nConnection: close\nContent-Type: image/jpeg\n')),(0,o.kt)("p",null,"Now other than the first and last calls to ",(0,o.kt)("inlineCode",{parentName:"p"},"recv()"),", we\nnow get 5120 characters each time we ask for new data."),(0,o.kt)("p",null,"There is a buffer between the server making ",(0,o.kt)("inlineCode",{parentName:"p"},"send()"),"\nrequests and our application making ",(0,o.kt)("inlineCode",{parentName:"p"},"recv()")," requests. When\nwe run the program with the delay in place, at some point the server\nmight fill up the buffer in the socket and be forced to pause until our\nprogram starts to empty the buffer. The pausing of either the sending\napplication or the receiving application is called \u201cflow control.\u201d"),(0,o.kt)("h2",{id:"retrieving-web-pages-with-urllib"},"Retrieving web pages with ",(0,o.kt)("inlineCode",{parentName:"h2"},"urllib")),(0,o.kt)("p",null,"While we can manually send and receive data over HTTP using the\nsocket library, there is a much simpler way to perform this common task\nin Python by using the ",(0,o.kt)("inlineCode",{parentName:"p"},"urllib")," library."),(0,o.kt)("p",null,"Using ",(0,o.kt)("inlineCode",{parentName:"p"},"urllib"),", you can treat a web page much like a file.\nYou simply indicate which web page you would like to retrieve and\n",(0,o.kt)("inlineCode",{parentName:"p"},"urllib")," handles all of the HTTP protocol and header\ndetails."),(0,o.kt)("p",null,"The equivalent code to read the ",(0,o.kt)("em",{parentName:"p"},"romeo.txt")," file from the web\nusing ",(0,o.kt)("inlineCode",{parentName:"p"},"urllib")," is as follows:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"import urllib.request\n\nfhand = urllib.request.urlopen('http://data.pr4e.org/romeo.txt')\nfor line in fhand:\n    print(line.decode().strip())\n\n# Code: https://www.py4e.com/code3/urllib1.py\n")),(0,o.kt)("p",null,"Once the web page has been opened with\n",(0,o.kt)("inlineCode",{parentName:"p"},"urllib.request.urlopen"),", we can treat it like a file and\nread through it using a ",(0,o.kt)("inlineCode",{parentName:"p"},"for")," loop."),(0,o.kt)("p",null,"When the program runs, we only see the output of the contents of the\nfile. The headers are still sent, but the ",(0,o.kt)("inlineCode",{parentName:"p"},"urllib")," code\nconsumes the headers and only returns the data to us."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"But soft what light through yonder window breaks\nIt is the east and Juliet is the sun\nArise fair sun and kill the envious moon\nWho is already sick and pale with grief\n")),(0,o.kt)("p",null,"As an example, we can write a program to retrieve the data for\n",(0,o.kt)("inlineCode",{parentName:"p"},"romeo.txt")," and compute the frequency of each word in the\nfile as follows:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"import urllib.request, urllib.parse, urllib.error\n\nfhand = urllib.request.urlopen('http://data.pr4e.org/romeo.txt')\n\ncounts = dict()\nfor line in fhand:\n    words = line.decode().split()\n    for word in words:\n        counts[word] = counts.get(word, 0) + 1\nprint(counts)\n\n# Code: https://www.py4e.com/code3/urlwords.py\n")),(0,o.kt)("p",null,"Again, once we have opened the web page, we can read it like a local\nfile."),(0,o.kt)("h2",{id:"reading-binary-files-using-urllib"},"Reading binary files using ",(0,o.kt)("inlineCode",{parentName:"h2"},"urllib")),(0,o.kt)("p",null,"Sometimes you want to retrieve a non-text (or binary) file such as an\nimage or video file. The data in these files is generally not useful to\nprint out, but you can easily make a copy of a URL to a local file on\nyour hard disk using ",(0,o.kt)("inlineCode",{parentName:"p"},"urllib"),"."),(0,o.kt)("p",null,"The pattern is to open the URL and use ",(0,o.kt)("inlineCode",{parentName:"p"},"read")," to download\nthe entire contents of the document into a string variable\n( ",(0,o.kt)("inlineCode",{parentName:"p"},"img"),") then write that information to a local file as\nfollows:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"import urllib.request, urllib.parse, urllib.error\n\nimg = urllib.request.urlopen('http://data.pr4e.org/cover3.jpg').read()\nfhand = open('cover3.jpg', 'wb')\nfhand.write(img)\nfhand.close()\n\n# Code: https://www.py4e.com/code3/curl1.py\n")),(0,o.kt)("p",null,"This program reads all of the data in at once across the network and\nstores it in the variable ",(0,o.kt)("inlineCode",{parentName:"p"},"img")," in the main memory of your\ncomputer, then opens the file ",(0,o.kt)("inlineCode",{parentName:"p"},"cover.jpg")," and writes the data\nout to your disk. The ",(0,o.kt)("inlineCode",{parentName:"p"},"wb")," argument for ",(0,o.kt)("inlineCode",{parentName:"p"},"open()"),"\nopens a binary file for writing only. This program will work if the size\nof the file is less than the size of the memory of your computer."),(0,o.kt)("p",null,"However if this is a large audio or video file, this program may\ncrash or at least run extremely slowly when your computer runs out of\nmemory. In order to avoid running out of memory, we retrieve the data in\nblocks (or buffers) and then write each block to your disk before\nretrieving the next block. This way the program can read any size file\nwithout using up all of the memory you have in your computer."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"import urllib.request, urllib.parse, urllib.error\n\nimg = urllib.request.urlopen('http://data.pr4e.org/cover3.jpg')\nfhand = open('cover3.jpg', 'wb')\nsize = 0\nwhile True:\n    info = img.read(100000)\n    if len(info) < 1: break\n    size = size + len(info)\n    fhand.write(info)\n\nprint(size, 'characters copied.')\nfhand.close()\n\n# Code: https://www.py4e.com/code3/curl2.py\n")),(0,o.kt)("p",null,"In this example, we read only 100,000 characters at a time and then\nwrite those characters to the ",(0,o.kt)("inlineCode",{parentName:"p"},"cover3.jpg")," file before\nretrieving the next 100,000 characters of data from the web."),(0,o.kt)("p",null,"This program runs as follows:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"python curl2.py\n230210 characters copied.\n")),(0,o.kt)("h2",{id:"parsing-html-and-scraping-the-web"},"Parsing HTML and scraping the web"),(0,o.kt)("p",null,"One of the common uses of the ",(0,o.kt)("inlineCode",{parentName:"p"},"urllib")," capability in\nPython is to ",(0,o.kt)("em",{parentName:"p"},"scrape")," the web. Web scraping is when we write a\nprogram that pretends to be a web browser and retrieves pages, then\nexamines the data in those pages looking for patterns."),(0,o.kt)("p",null,"As an example, a search engine such as Google will look at the source\nof one web page and extract the links to other pages and retrieve those\npages, extracting links, and so on. Using this technique, Google\n",(0,o.kt)("em",{parentName:"p"},"spiders")," its way through nearly all of the pages on the web."),(0,o.kt)("p",null,"Google also uses the frequency of links from pages it finds to a\nparticular page as one measure of how \u201cimportant\u201d a page is and how high\nthe page should appear in its search results."),(0,o.kt)("h2",{id:"parsing-html-using-regular-expressions"},"Parsing HTML using regular expressions"),(0,o.kt)("p",null,"One simple way to parse HTML is to use regular expressions to\nrepeatedly search for and extract substrings that match a particular\npattern."),(0,o.kt)("p",null,"Here is a simple web page:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'<h1>The First Page</h1>\n<p>\nIf you like, you can switch to the\n<a href="http://www.dr-chuck.com/page2.htm">\nSecond Page</a>.\n</p>\n')),(0,o.kt)("p",null,"We can construct a well-formed regular expression to match and\nextract the link values from the above text as follows:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'href="http[s]?://.+?"\n')),(0,o.kt)("p",null,'Our regular expression looks for strings that start with\n\u201chref="http://\u201d or \u201chref="https://\u201d, followed by one or more characters\n( ',(0,o.kt)("inlineCode",{parentName:"p"},".+?"),"), followed by another double quote. The question mark\nbehind the ",(0,o.kt)("inlineCode",{parentName:"p"},"[s]?")," indicates to search for the string \u201chttp\u201d\nfollowed by zero or one \u201cs\u201d."),(0,o.kt)("p",null,"The question mark added to the ",(0,o.kt)("inlineCode",{parentName:"p"},".+?")," indicates that the\nmatch is to be done in a \u201cnon-greedy\u201d fashion instead of a \u201cgreedy\u201d\nfashion. A non-greedy match tries to find the ",(0,o.kt)("em",{parentName:"p"},"smallest")," possible\nmatching string and a greedy match tries to find the ",(0,o.kt)("em",{parentName:"p"},"largest"),"\npossible matching string."),(0,o.kt)("p",null,"We add parentheses to our regular expression to indicate which part\nof our matched string we would like to extract, and produce the\nfollowing program:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"# Search for link values within URL input\nimport urllib.request, urllib.parse, urllib.error\nimport re\nimport ssl\n\n# Ignore SSL certificate errors\nctx = ssl.create_default_context()\nctx.check_hostname = False\nctx.verify_mode = ssl.CERT_NONE\n\nurl = input('Enter - ')\nhtml = urllib.request.urlopen(url, context=ctx).read()\nlinks = re.findall(b'href=\"(http[s]?://.*?)\"', html)\nfor link in links:\n    print(link.decode())\n\n# Code: https://www.py4e.com/code3/urlregex.py\n")),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"ssl")," library allows this program to access web sites\nthat strictly enforce HTTPS. The ",(0,o.kt)("inlineCode",{parentName:"p"},"read")," method returns HTML\nsource code as a bytes object instead of returning an HTTPResponse\nobject. The ",(0,o.kt)("inlineCode",{parentName:"p"},"findall")," regular expression method will give us\na list of all of the strings that match our regular expression,\nreturning only the link text between the double quotes."),(0,o.kt)("p",null,"When we run the program and input a URL, we get the following\noutput:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"Enter - https://docs.python.org\nhttps://docs.python.org/3/index.html\nhttps://www.python.org/\nhttps://docs.python.org/3.8/\nhttps://docs.python.org/3.7/\nhttps://docs.python.org/3.5/\nhttps://docs.python.org/2.7/\nhttps://www.python.org/doc/versions/\nhttps://www.python.org/dev/peps/\nhttps://wiki.python.org/moin/BeginnersGuide\nhttps://wiki.python.org/moin/PythonBooks\nhttps://www.python.org/doc/av/\nhttps://www.python.org/\nhttps://www.python.org/psf/donations/\nhttp://sphinx.pocoo.org/\n")),(0,o.kt)("p",null,"Regular expressions work very nicely when your HTML is well formatted\nand predictable. But since there are a lot of \u201cbroken\u201d HTML pages out\nthere, a solution only using regular expressions might either miss some\nvalid links or end up with bad data."),(0,o.kt)("p",null,"This can be solved by using a robust HTML parsing library."),(0,o.kt)("h2",{id:"parsing-html-using-beautifulsoup"},"Parsing HTML using BeautifulSoup"),(0,o.kt)("p",null,"Even though HTML looks like XML ",(0,o.kt)("a",{parentName:"p",href:"https://www.py4e.com/html3/12-network#fn2"},"2")," and some pages are\ncarefully constructed to be XML, most HTML is generally broken in ways\nthat cause an XML parser to reject the entire page of HTML as improperly\nformed."),(0,o.kt)("p",null,"There are a number of Python libraries which can help you parse HTML\nand extract data from the pages. Each of the libraries has its strengths\nand weaknesses and you can pick one based on your needs."),(0,o.kt)("p",null,"As an example, we will simply parse some HTML input and extract links\nusing the ",(0,o.kt)("em",{parentName:"p"},"BeautifulSoup")," library. BeautifulSoup tolerates highly\nflawed HTML and still lets you easily extract the data you need. You can\ndownload and install the BeautifulSoup code from:"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://pypi.python.org/pypi/beautifulsoup4"},"https://pypi.python.org/pypi/beautifulsoup4")),(0,o.kt)("p",null,"Information on installing BeautifulSoup with the Python Package Index\ntool ",(0,o.kt)("inlineCode",{parentName:"p"},"pip")," is available at:"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://packaging.python.org/tutorials/installing-packages/"},"https://packaging.python.org/tutorials/installing-packages/")),(0,o.kt)("p",null,"We will use ",(0,o.kt)("inlineCode",{parentName:"p"},"urllib")," to read the page and then use\n",(0,o.kt)("inlineCode",{parentName:"p"},"BeautifulSoup")," to extract the ",(0,o.kt)("inlineCode",{parentName:"p"},"href")," attributes\nfrom the anchor ( ",(0,o.kt)("inlineCode",{parentName:"p"},"a"),") tags."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"# To run this, download the BeautifulSoup zip file\n# http://www.py4e.com/code3/bs4.zip\n# and unzip it in the same directory as this file\n\nimport urllib.request, urllib.parse, urllib.error\nfrom bs4 import BeautifulSoup\nimport ssl\n\n# Ignore SSL certificate errors\nctx = ssl.create_default_context()\nctx.check_hostname = False\nctx.verify_mode = ssl.CERT_NONE\n\nurl = input('Enter - ')\nhtml = urllib.request.urlopen(url, context=ctx).read()\nsoup = BeautifulSoup(html, 'html.parser')\n\n# Retrieve all of the anchor tags\ntags = soup('a')\nfor tag in tags:\n    print(tag.get('href', None))\n\n# Code: https://www.py4e.com/code3/urllinks.py\n")),(0,o.kt)("p",null,"The program prompts for a web address, then opens the web page, reads\nthe data and passes the data to the BeautifulSoup parser, and then\nretrieves all of the anchor tags and prints out the ",(0,o.kt)("inlineCode",{parentName:"p"},"href"),"\nattribute for each tag."),(0,o.kt)("p",null,"When the program runs, it produces the following output:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"Enter - https://docs.python.org\ngenindex.html\npy-modindex.html\nhttps://www.python.org/\n#\nwhatsnew/3.6.html\nwhatsnew/index.html\ntutorial/index.html\nlibrary/index.html\nreference/index.html\nusing/index.html\nhowto/index.html\ninstalling/index.html\ndistributing/index.html\nextending/index.html\nc-api/index.html\nfaq/index.html\npy-modindex.html\ngenindex.html\nglossary.html\nsearch.html\ncontents.html\nbugs.html\nabout.html\nlicense.html\ncopyright.html\ndownload.html\nhttps://docs.python.org/3.8/\nhttps://docs.python.org/3.7/\nhttps://docs.python.org/3.5/\nhttps://docs.python.org/2.7/\nhttps://www.python.org/doc/versions/\nhttps://www.python.org/dev/peps/\nhttps://wiki.python.org/moin/BeginnersGuide\nhttps://wiki.python.org/moin/PythonBooks\nhttps://www.python.org/doc/av/\ngenindex.html\npy-modindex.html\nhttps://www.python.org/\n#\ncopyright.html\nhttps://www.python.org/psf/donations/\nbugs.html\nhttp://sphinx.pocoo.org/\n")),(0,o.kt)("p",null,"This list is much longer because some HTML anchor tags are relative\npaths (e.g., tutorial/index.html) or in-page references (e.g., \u2018#\u2019) that\ndo not include \u201chttp://\u201d or \u201chttps://\u201d, which was a requirement in our\nregular expression."),(0,o.kt)("p",null,"You can use also BeautifulSoup to pull out various parts of each\ntag:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"# To run this, download the BeautifulSoup zip file\n# http://www.py4e.com/code3/bs4.zip\n# and unzip it in the same directory as this file\n\nfrom urllib.request import urlopen\nfrom bs4 import BeautifulSoup\nimport ssl\n\n# Ignore SSL certificate errors\nctx = ssl.create_default_context()\nctx.check_hostname = False\nctx.verify_mode = ssl.CERT_NONE\n\nurl = input('Enter - ')\nhtml = urlopen(url, context=ctx).read()\nsoup = BeautifulSoup(html, \"html.parser\")\n\n# Retrieve all of the anchor tags\ntags = soup('a')\nfor tag in tags:\n    # Look at the parts of a tag\n    print('TAG:', tag)\n    print('URL:', tag.get('href', None))\n    print('Contents:', tag.contents[0])\n    print('Attrs:', tag.attrs)\n\n# Code: https://www.py4e.com/code3/urllink2.py\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"python urllink2.py\nEnter - http://www.dr-chuck.com/page1.htm\nTAG: <a href=\"http://www.dr-chuck.com/page2.htm\">\nSecond Page</a>\nURL: http://www.dr-chuck.com/page2.htm\nContent: ['\\nSecond Page']\nAttrs: [('href', 'http://www.dr-chuck.com/page2.htm')]\n")),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"html.parser")," is the HTML parser included in the standard\nPython 3 library. Information on other HTML parsers is available at:"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"http://www.crummy.com/software/BeautifulSoup/bs4/doc/#installing-a-parser"},"http://www.crummy.com/software/BeautifulSoup/bs4/doc/#installing-a-parser")),(0,o.kt)("p",null,"These examples only begin to show the power of BeautifulSoup when it\ncomes to parsing HTML."),(0,o.kt)("h2",{id:"bonus-section-for-unix--linux-users"},"Bonus section for Unix / Linux users"),(0,o.kt)("p",null,"If you have a Linux, Unix, or Macintosh computer, you probably have\ncommands built in to your operating system that retrieves both plain\ntext and binary files using the HTTP or File Transfer (FTP) protocols.\nOne of these commands is ",(0,o.kt)("inlineCode",{parentName:"p"},"curl"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"$ curl -O http://www.py4e.com/cover.jpg\n")),(0,o.kt)("p",null,"The command ",(0,o.kt)("inlineCode",{parentName:"p"},"curl")," is short for \u201ccopy URL\u201d and so the two\nexamples listed earlier to retrieve binary files with\n",(0,o.kt)("inlineCode",{parentName:"p"},"urllib")," are cleverly named ",(0,o.kt)("inlineCode",{parentName:"p"},"curl1.py")," and\n",(0,o.kt)("inlineCode",{parentName:"p"},"curl2.py")," on ",(0,o.kt)("a",{parentName:"p",href:"https://www.py4e.com/code3"},"www.py4e.com/code3")," as they\nimplement similar functionality to the ",(0,o.kt)("inlineCode",{parentName:"p"},"curl")," command. There\nis also a ",(0,o.kt)("inlineCode",{parentName:"p"},"curl3.py")," sample program that does this task a\nlittle more effectively, in case you actually want to use this pattern\nin a program you are writing."),(0,o.kt)("p",null,"A second command that functions very similarly is\n",(0,o.kt)("inlineCode",{parentName:"p"},"wget"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"$ wget http://www.py4e.com/cover.jpg\n")),(0,o.kt)("p",null,"Both of these commands make retrieving webpages and remote files a\nsimple task."),(0,o.kt)("h2",{id:"glossary"},"Glossary"),(0,o.kt)("p",null,"BeautifulSoup\nA Python library for parsing HTML documents and extracting data from\nHTML documents that compensates for most of the imperfections in the\nHTML that browsers generally ignore. You can download the BeautifulSoup\ncode from ",(0,o.kt)("a",{parentName:"p",href:"http://www.crummy.com/"},"www.crummy.com"),".\nport\nA number that generally indicates which application you are contacting\nwhen you make a socket connection to a server. As an example, web\ntraffic usually uses port 80 while email traffic uses port 25.\nscrape\nWhen a program pretends to be a web browser and retrieves a web page,\nthen looks at the web page content. Often programs are following the\nlinks in one page to find the next page so they can traverse a network\nof pages or a social network.\nsocket\nA network connection between two applications where the applications can\nsend and receive data in either direction.\nspider\nThe act of a web search engine retrieving a page and then all the pages\nlinked from a page and so on until they have nearly all of the pages on\nthe Internet which they use to build their search index."),(0,o.kt)("h2",{id:"exercises"},"Exercises"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Exercise 1:")," Change the socket program\n",(0,o.kt)("inlineCode",{parentName:"p"},"socket1.py")," to prompt the user for the URL so it can read\nany web page."),(0,o.kt)("p",null,"You can use ",(0,o.kt)("inlineCode",{parentName:"p"},"split('/')")," to break the URL into its\ncomponent parts so you can extract the host name for the socket\n",(0,o.kt)("inlineCode",{parentName:"p"},"connect")," call. Add error checking using ",(0,o.kt)("inlineCode",{parentName:"p"},"try")," and\n",(0,o.kt)("inlineCode",{parentName:"p"},"except")," to handle the condition where the user enters an\nimproperly formatted or non-existent URL."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Exercise 2:")," Change your socket program so that it\ncounts the number of characters it has received and stops displaying any\ntext after it has shown 3000 characters. The program should retrieve the\nentire document and count the total number of characters and display the\ncount of the number of characters at the end of the document."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Exercise 3:")," Use ",(0,o.kt)("inlineCode",{parentName:"p"},"urllib")," to replicate the\nprevious exercise of (1) retrieving the document from a URL, (2)\ndisplaying up to 3000 characters, and (3) counting the overall number of\ncharacters in the document. Don\u2019t worry about the headers for this\nexercise, simply show the first 3000 characters of the document\ncontents."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Exercise 4:")," Change the ",(0,o.kt)("inlineCode",{parentName:"p"},"urllinks.py"),"\nprogram to extract and count paragraph (p) tags from the retrieved HTML\ndocument and display the count of the paragraphs as the output of your\nprogram. Do not display the paragraph text, only count them. Test your\nprogram on several small web pages as well as some larger web pages."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Exercise 5:")," (Advanced) Change the socket program so\nthat it only shows data after the headers and a blank line have been\nreceived. Remember that ",(0,o.kt)("inlineCode",{parentName:"p"},"recv")," receives characters (newlines\nand all), not lines."),(0,o.kt)("hr",null),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"If you want to learn more about sockets, protocols or\nhow web servers are developed, you can explore the course at\n",(0,o.kt)("a",{parentName:"p",href:"https://www.dj4e.com."},"https://www.dj4e.com.")," ",(0,o.kt)("a",{parentName:"p",href:"https://www.py4e.com/html3/12-network#fnref1"},"\u21a9\ufe0e"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"The XML format is described in the next chapter. ",(0,o.kt)("a",{parentName:"p",href:"https://www.py4e.com/html3/12-network#fnref2"},"\u21a9\ufe0e")))),(0,o.kt)("hr",null),(0,o.kt)("p",null,"If you find a mistake in this book, feel free to send me a fix using\n",(0,o.kt)("a",{parentName:"p",href:"https://github.com/csev/py4e/tree/master/book3"},"Github"),"."))}c.isMDXComponent=!0},2519:(e,t,n)=>{n.d(t,{Z:()=>a});const a="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bD0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB2aWV3Qm94PSIxNiAxNiAzOTEgMjAyIiB3aWR0aD0iMzkxcHQiIGhlaWdodD0iMjAycHQiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyI+PG1ldGFkYXRhPiBQcm9kdWNlZCBieSBPbW5pR3JhZmZsZSA2LjYgPGRjOmRhdGU+MjAxNi0wOS0yMyAxOTo0ODo1OCArMDAwMDwvZGM6ZGF0ZT48L21ldGFkYXRhPjxkZWZzPjxmb250LWZhY2UgZm9udC1mYW1pbHk9IkhlbHZldGljYSBOZXVlIiBmb250LXNpemU9IjE2IiBwYW5vc2UtMT0iMiAwIDUgMyAwIDAgMCAyIDAgNCIgdW5pdHMtcGVyLWVtPSIxMDAwIiB1bmRlcmxpbmUtcG9zaXRpb249Ii0xMDAiIHVuZGVybGluZS10aGlja25lc3M9IjUwIiBzbG9wZT0iMCIgeC1oZWlnaHQ9IjUxNyIgY2FwLWhlaWdodD0iNzE0IiBhc2NlbnQ9Ijk1MS45OTU4NSIgZGVzY2VudD0iLTIxMi45OTc0NCIgZm9udC13ZWlnaHQ9IjUwMCI+PGZvbnQtZmFjZS1zcmM+PGZvbnQtZmFjZS1uYW1lIG5hbWU9IkhlbHZldGljYU5ldWUiLz48L2ZvbnQtZmFjZS1zcmM+PC9mb250LWZhY2U+PGZvbnQtZmFjZSBmb250LWZhbWlseT0iSGVsdmV0aWNhIE5ldWUiIGZvbnQtc2l6ZT0iMTQiIHBhbm9zZS0xPSIyIDAgNSAzIDAgMCAwIDIgMCA0IiB1bml0cy1wZXItZW09IjEwMDAiIHVuZGVybGluZS1wb3NpdGlvbj0iLTEwMCIgdW5kZXJsaW5lLXRoaWNrbmVzcz0iNTAiIHNsb3BlPSIwIiB4LWhlaWdodD0iNTE3IiBjYXAtaGVpZ2h0PSI3MTQiIGFzY2VudD0iOTUxLjk5NTg1IiBkZXNjZW50PSItMjEyLjk5NzQ0IiBmb250LXdlaWdodD0iNTAwIj48Zm9udC1mYWNlLXNyYz48Zm9udC1mYWNlLW5hbWUgbmFtZT0iSGVsdmV0aWNhTmV1ZSIvPjwvZm9udC1mYWNlLXNyYz48L2ZvbnQtZmFjZT48L2RlZnM+PGcgc3Ryb2tlPSJub25lIiBzdHJva2Utb3BhY2l0eT0iMSIgc3Ryb2tlLWRhc2hhcnJheT0ibm9uZSIgZmlsbD0ibm9uZSIgZmlsbC1vcGFjaXR5PSIxIj48dGl0bGU+Q2FudmFzIDE8L3RpdGxlPjxyZWN0IGZpbGw9IndoaXRlIiB3aWR0aD0iNTQ1IiBoZWlnaHQ9IjQ5NSIvPjxnPjx0aXRsZT5MYXllciAxPC90aXRsZT48cmVjdCB4PSIxOCIgeT0iMTgiIHdpZHRoPSIxMzUiIGhlaWdodD0iMTgwIiBmaWxsPSJ3aGl0ZSIvPjxyZWN0IHg9IjE4IiB5PSIxOCIgd2lkdGg9IjEzNSIgaGVpZ2h0PSIxODAiIHN0cm9rZT0iYmxhY2siIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIxIi8+PHRleHQgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjMgMjMpIiBmaWxsPSJibGFjayI+PHRzcGFuIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EgTmV1ZSIgZm9udC1zaXplPSIxNiIgZm9udC13ZWlnaHQ9IjUwMCIgeD0iNDYuNSIgeT0iMTUiIHRleHRMZW5ndGg9IjEwLjM2OCI+WTwvdHNwYW4+PHRzcGFuIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EgTmV1ZSIgZm9udC1zaXplPSIxNiIgZm9udC13ZWlnaHQ9IjUwMCIgeD0iNTUuMDkyIiB5PSIxNSIgdGV4dExlbmd0aD0iMjMuNDA4Ij5vdXI8L3RzcGFuPjx0c3BhbiBmb250LWZhbWlseT0iSGVsdmV0aWNhIE5ldWUiIGZvbnQtc2l6ZT0iMTYiIGZvbnQtd2VpZ2h0PSI1MDAiIHg9IjMxLjgyOCIgeT0iMzMuNDQ3OTk4IiB0ZXh0TGVuZ3RoPSIxNS42OTYiPlByPC90c3Bhbj48dHNwYW4gZm9udC1mYW1pbHk9IkhlbHZldGljYSBOZXVlIiBmb250LXNpemU9IjE2IiBmb250LXdlaWdodD0iNTAwIiB4PSI0Ny4yMzYiIHk9IjMzLjQ0Nzk5OCIgdGV4dExlbmd0aD0iNDUuOTM2Ij5vZ3JhbTwvdHNwYW4+PC90ZXh0PjxyZWN0IHg9IjEzNSIgeT0iNzIiIHdpZHRoPSIyNyIgaGVpZ2h0PSIxMDgiIGZpbGw9IiMwMGJmYzAiLz48cmVjdCB4PSIxMzUiIHk9IjcyIiB3aWR0aD0iMjciIGhlaWdodD0iMTA4IiBzdHJva2U9ImJsYWNrIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMSIvPjx0ZXh0IHRyYW5zZm9ybT0idHJhbnNsYXRlKDE0MCA3Ni44MjQwMDUpIiBmaWxsPSJibGFjayI+PHRzcGFuIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EgTmV1ZSIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9IjUwMCIgeD0iMy45NjQiIHk9IjEzIiB0ZXh0TGVuZ3RoPSI5LjA3MiI+UzwvdHNwYW4+PHRzcGFuIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EgTmV1ZSIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9IjUwMCIgeD0iMy4xOCIgeT0iMjkuMzkxOTk4IiB0ZXh0TGVuZ3RoPSIxMC42NCI+TzwvdHNwYW4+PHRzcGFuIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EgTmV1ZSIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9IjUwMCIgeD0iMy40NDYiIHk9IjQ1Ljc4Mzk5NyIgdGV4dExlbmd0aD0iMTAuMTA4Ij5DPC90c3Bhbj48dHNwYW4gZm9udC1mYW1pbHk9IkhlbHZldGljYSBOZXVlIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iNTAwIiB4PSIzLjgzMSIgeT0iNjIuMTc1OTk1IiB0ZXh0TGVuZ3RoPSI5LjMzOCI+SzwvdHNwYW4+PHRzcGFuIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EgTmV1ZSIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9IjUwMCIgeD0iNC4yMjMiIHk9Ijc4LjU2Nzk5MyIgdGV4dExlbmd0aD0iOC41NTQiPkU8L3RzcGFuPjx0c3BhbiBmb250LWZhbWlseT0iSGVsdmV0aWNhIE5ldWUiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSI1MDAiIHg9IjQuNDgyIiB5PSI5NC45NTk5OSIgdGV4dExlbmd0aD0iOC4wMzYiPlQ8L3RzcGFuPjwvdGV4dD48cmVjdCB4PSI2MyIgeT0iNzIiIHdpZHRoPSI3MiIgaGVpZ2h0PSIyNyIgZmlsbD0id2hpdGUiLz48cmVjdCB4PSI2MyIgeT0iNzIiIHdpZHRoPSI3MiIgaGVpZ2h0PSIyNyIgc3Ryb2tlPSJibGFjayIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjEiLz48dGV4dCB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2OCA3Ni4yNzYpIiBmaWxsPSJibGFjayI+PHRzcGFuIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EgTmV1ZSIgZm9udC1zaXplPSIxNiIgZm9udC13ZWlnaHQ9IjUwMCIgeD0iNy4xNDQiIHk9IjE1IiB0ZXh0TGVuZ3RoPSI0Ny43MTIiPnNvY2tldDwvdHNwYW4+PC90ZXh0PjxyZWN0IHg9IjYzIiB5PSI5OSIgd2lkdGg9IjcyIiBoZWlnaHQ9IjI3IiBmaWxsPSJ3aGl0ZSIvPjxyZWN0IHg9IjYzIiB5PSI5OSIgd2lkdGg9IjcyIiBoZWlnaHQ9IjI3IiBzdHJva2U9ImJsYWNrIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMSIvPjx0ZXh0IHRyYW5zZm9ybT0idHJhbnNsYXRlKDY4IDEwMy4yNzYpIiBmaWxsPSJibGFjayI+PHRzcGFuIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EgTmV1ZSIgZm9udC1zaXplPSIxNiIgZm9udC13ZWlnaHQ9IjUwMCIgeD0iMi4xMDQiIHk9IjE1IiB0ZXh0TGVuZ3RoPSI1Ny43OTIiPmNvbm5lY3Q8L3RzcGFuPjwvdGV4dD48cmVjdCB4PSI2MyIgeT0iMTI2IiB3aWR0aD0iNzIiIGhlaWdodD0iMjciIGZpbGw9IndoaXRlIi8+PHJlY3QgeD0iNjMiIHk9IjEyNiIgd2lkdGg9IjcyIiBoZWlnaHQ9IjI3IiBzdHJva2U9ImJsYWNrIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMSIvPjx0ZXh0IHRyYW5zZm9ybT0idHJhbnNsYXRlKDY4IDEzMC4yNzYpIiBmaWxsPSJibGFjayI+PHRzcGFuIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EgTmV1ZSIgZm9udC1zaXplPSIxNiIgZm9udC13ZWlnaHQ9IjUwMCIgeD0iMTMuNTEyIiB5PSIxNSIgdGV4dExlbmd0aD0iMzQuOTc2Ij5zZW5kPC90c3Bhbj48L3RleHQ+PHJlY3QgeD0iNjMiIHk9IjE1MyIgd2lkdGg9IjcyIiBoZWlnaHQ9IjI3IiBmaWxsPSJ3aGl0ZSIvPjxyZWN0IHg9IjYzIiB5PSIxNTMiIHdpZHRoPSI3MiIgaGVpZ2h0PSIyNyIgc3Ryb2tlPSJibGFjayIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjEiLz48dGV4dCB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2OCAxNTcuMjc2KSIgZmlsbD0iYmxhY2siPjx0c3BhbiBmb250LWZhbWlseT0iSGVsdmV0aWNhIE5ldWUiIGZvbnQtc2l6ZT0iMTYiIGZvbnQtd2VpZ2h0PSI1MDAiIHg9IjE1Ljg4OCIgeT0iMTUiIHRleHRMZW5ndGg9IjUuMzI4Ij5yPC90c3Bhbj48dHNwYW4gZm9udC1mYW1pbHk9IkhlbHZldGljYSBOZXVlIiBmb250LXNpemU9IjE2IiBmb250LXdlaWdodD0iNTAwIiB4PSIyMC45MjgiIHk9IjE1IiB0ZXh0TGVuZ3RoPSIyNS4xODQiPmVjdjwvdHNwYW4+PC90ZXh0PjxwYXRoIGQ9Ik0gMjI0Ljk4NjU5IDEyNy42MzQ1OCBDIDE5MS41MzEyNSAxMTcgMjA0Ljg3MjQgMjcuNDc0MyAyNTguMjQxMTQgNDIuNzUgQyAyNjMuMTkyNTggMTIuOTcyNzggMzI1LjI1MzI1IDE3LjgwNTk2IDMyNC44NDc1MyA0Mi43NSBDIDM2My43NjE0NiAxMC44NDYyNiA0MTMuNDkxMTQgNzQuNDYxNjggMzgwLjEzNTE2IDEwNi4zNjU0MiBDIDQyMC4xNjA2OCAxMjEuODMzMTggMzc5LjYzMDA4IDIwNS4xNzEzOCAzNDYuNzgxMjUgMTkxLjI1IEMgMzQ0LjE1MjM1IDIxNC40NTM2MiAyODUuNDI4NTIgMjIyLjU3MzYgMjgwLjI3NDIyIDE5MS4yNSBDIDI0Ny4wMjE3NCAyMjQuNzAyMSAxNzcuNjg1MDIgMTczLjI2NzY0IDIyNC45ODY1OSAxMjcuNjM0NTggWiIgZmlsbD0id2hpdGUiLz48cGF0aCBkPSJNIDIyNC45ODY1OSAxMjcuNjM0NTggQyAxOTEuNTMxMjUgMTE3IDIwNC44NzI0IDI3LjQ3NDMgMjU4LjI0MTE0IDQyLjc1IEMgMjYzLjE5MjU4IDEyLjk3Mjc4IDMyNS4yNTMyNSAxNy44MDU5NiAzMjQuODQ3NTMgNDIuNzUgQyAzNjMuNzYxNDYgMTAuODQ2MjYgNDEzLjQ5MTE0IDc0LjQ2MTY4IDM4MC4xMzUxNiAxMDYuMzY1NDIgQyA0MjAuMTYwNjggMTIxLjgzMzE4IDM3OS42MzAwOCAyMDUuMTcxMzggMzQ2Ljc4MTI1IDE5MS4yNSBDIDM0NC4xNTIzNSAyMTQuNDUzNjIgMjg1LjQyODUyIDIyMi41NzM2IDI4MC4yNzQyMiAxOTEuMjUgQyAyNDcuMDIxNzQgMjI0LjcwMjEgMTc3LjY4NTAyIDE3My4yNjc2NCAyMjQuOTg2NTkgMTI3LjYzNDU4IFoiIHN0cm9rZT0iYmxhY2siIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIxIi8+PHRleHQgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjEyIDU4LjM4MDAwNSkiIGZpbGw9ImJsYWNrIj48dHNwYW4gZm9udC1mYW1pbHk9IkhlbHZldGljYSBOZXVlIiBmb250LXNpemU9IjE2IiBmb250LXdlaWdodD0iNTAwIiB4PSIzNC4xIiB5PSIxNSIgdGV4dExlbmd0aD0iMzYuMzg0Ij53d3c8L3RzcGFuPjx0c3BhbiBmb250LWZhbWlseT0iSGVsdmV0aWNhIE5ldWUiIGZvbnQtc2l6ZT0iMTYiIGZvbnQtd2VpZ2h0PSI1MDAiIHg9IjY5LjYwNCIgeT0iMTUiIHRleHRMZW5ndGg9Ijc1LjI5NiI+LnB5NGUuY29tPC90c3Bhbj48dHNwYW4gZm9udC1mYW1pbHk9IkhlbHZldGljYSBOZXVlIiBmb250LXNpemU9IjE2IiBmb250LXdlaWdodD0iNTAwIiB4PSI0OC45MTYiIHk9IjUxLjQ0Nzk5OCIgdGV4dExlbmd0aD0iMTQuODE2Ij5XPC90c3Bhbj48dHNwYW4gZm9udC1mYW1pbHk9IkhlbHZldGljYSBOZXVlIiBmb250LXNpemU9IjE2IiBmb250LXdlaWdodD0iNTAwIiB4PSI2Mi44MiIgeT0iNTEuNDQ3OTk4IiB0ZXh0TGVuZ3RoPSI2Ny4yNjQiPmViIFBhZ2VzPC90c3Bhbj48dHNwYW4gZm9udC1mYW1pbHk9IkhlbHZldGljYSBOZXVlIiBmb250LXNpemU9IjE2IiBmb250LXdlaWdodD0iNTAwIiB4PSI4Ny4yNzYiIHk9IjY5Ljg5NTk5NiIgdGV4dExlbmd0aD0iNC40NDgiPi48L3RzcGFuPjx0c3BhbiBmb250LWZhbWlseT0iSGVsdmV0aWNhIE5ldWUiIGZvbnQtc2l6ZT0iMTYiIGZvbnQtd2VpZ2h0PSI1MDAiIHg9Ijg3LjI3NiIgeT0iODguMzQzOTk0IiB0ZXh0TGVuZ3RoPSI0LjQ0OCI+LjwvdHNwYW4+PHRzcGFuIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EgTmV1ZSIgZm9udC1zaXplPSIxNiIgZm9udC13ZWlnaHQ9IjUwMCIgeD0iODcuMjc2IiB5PSIxMDYuNzkxOTkiIHRleHRMZW5ndGg9IjQuNDQ4Ij4uPC90c3Bhbj48L3RleHQ+PHJlY3QgeD0iMTYyIiB5PSIxMDgiIHdpZHRoPSI4MSIgaGVpZ2h0PSIyNyIgZmlsbD0iIzAwYmZjMCIvPjxyZWN0IHg9IjE2MiIgeT0iMTA4IiB3aWR0aD0iODEiIGhlaWdodD0iMjciIHN0cm9rZT0iYmxhY2siIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIxIi8+PHRleHQgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTY3IDExMi4yNzYpIiBmaWxsPSJibGFjayI+PHRzcGFuIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EgTmV1ZSIgZm9udC1zaXplPSIxNiIgZm9udC13ZWlnaHQ9IjUwMCIgeD0iMTguODQiIHk9IjE1IiB0ZXh0TGVuZ3RoPSI1Mi4xNiI+UG9ydCA4MDwvdHNwYW4+PC90ZXh0PjwvZz48L2c+PC9zdmc+Cg=="}}]);