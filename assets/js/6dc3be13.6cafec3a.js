"use strict";(self.webpackChunklearncs_set=self.webpackChunklearncs_set||[]).push([[658],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>m});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),c=p(n),h=r,m=c["".concat(s,".").concat(h)]||c[h]||d[h]||o;return n?a.createElement(m,i(i({ref:t},u),{},{components:n})):a.createElement(m,i({ref:t},u))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=h;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[c]="string"==typeof e?e:r,i[1]=l;for(var p=2;p<o;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},9145:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>l,toc:()=>p});var a=n(7462),r=(n(7294),n(3905));const o={sidebar_position:2,description:"cs50x practice problem  prophecy",title:"prophecy"},i="Hall of Prophecy - CS50x 2023",l={unversionedId:"curriculum-resource/cs50x/lecture8/practice problems/prophecy",id:"curriculum-resource/cs50x/lecture8/practice problems/prophecy",title:"prophecy",description:"cs50x practice problem  prophecy",source:"@site/docs/curriculum-resource/cs50x/lecture8/practice problems/prophecy.md",sourceDirName:"curriculum-resource/cs50x/lecture8/practice problems",slug:"/curriculum-resource/cs50x/lecture8/practice problems/prophecy",permalink:"/docs/curriculum-resource/cs50x/lecture8/practice problems/prophecy",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2,description:"cs50x practice problem  prophecy",title:"prophecy"},sidebar:"tutorialSidebar",previous:{title:"favorites",permalink:"/docs/curriculum-resource/cs50x/lecture8/practice problems/favorites"},next:{title:"Lab",permalink:"/docs/curriculum-resource/cs50x/lecture8/lab"}},s={},p=[{value:"Learning Goals",id:"learning-goals",level:2},{value:"Background",id:"background",level:2},{value:"Getting Started",id:"getting-started",level:2},{value:"Implementation Details",id:"implementation-details",level:2},{value:"Developing a Schema",id:"developing-a-schema",level:3},{value:"Inserting Data",id:"inserting-data",level:3},{value:"Thought Question",id:"thought-question",level:2},{value:"How to Test Your Code",id:"how-to-test-your-code",level:2},{value:"How to Submit",id:"how-to-submit",level:2}],u={toc:p},c="wrapper";function d(e){let{components:t,...o}=e;return(0,r.kt)(c,(0,a.Z)({},u,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"hall-of-prophecy---cs50x-2023"},"Hall of Prophecy - CS50x 2023"),(0,r.kt)("h2",{id:"learning-goals"},(0,r.kt)("a",{parentName:"h2",href:"#learning-goals"},"Learning Goals")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u201cRefactor\u201d a ",(0,r.kt)("inlineCode",{parentName:"li"},"SQL")," database to eliminate redundancies"),(0,r.kt)("li",{parentName:"ul"},"Use ",(0,r.kt)("inlineCode",{parentName:"li"},"SELECT"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"CREATE"),", and ",(0,r.kt)("inlineCode",{parentName:"li"},"INSERT")," statements to reorganize data"),(0,r.kt)("li",{parentName:"ul"},"Write Python to load new ",(0,r.kt)("inlineCode",{parentName:"li"},"SQL")," tables")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Hall of Prophecy",src:n(4295).Z,width:"1000",height:"596"})),(0,r.kt)("h2",{id:"background"},(0,r.kt)("a",{parentName:"h2",href:"#background"},"Background")),(0,r.kt)("p",null,"The keeper of the Hall of Prophecy, whose job entailed labelling records and keeping them up to date, decided to create a SQL database of Hogwarts students. Unfortunately the database was poorly designed! The database, ",(0,r.kt)("inlineCode",{parentName:"p"},"roster.db"),", contains only one table, ",(0,r.kt)("inlineCode",{parentName:"p"},"students"),", with the name and head of each of the four Hogwarts Houses."),(0,r.kt)("p",null,"Stumbling upon this database, you decide it could be better designed. Take a look at ",(0,r.kt)("inlineCode",{parentName:"p"},"roster.db")," and notice how the name and head of each house repeats over and over. A better design would contain a students table (for ",(0,r.kt)("em",{parentName:"p"},"only")," students), a houses table (for ",(0,r.kt)("em",{parentName:"p"},"only")," houses), and a table that codifies the relationship between students and houses. This process of changing the \u201cschema\u201d of a database is known as ",(0,r.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Database_refactoring"},"refactoring"),"."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Hint"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"You can view the data in the Hall of Prophecy\u2019s table by executing ",(0,r.kt)("inlineCode",{parentName:"li"},"sqlite3 roster.db"),", followed by ",(0,r.kt)("inlineCode",{parentName:"li"},".schema")," in your ",(0,r.kt)("inlineCode",{parentName:"li"},"sqlite3")," prompt. This will output the ",(0,r.kt)("inlineCode",{parentName:"li"},"CREATE TABLE")," statement that was used to generate the ",(0,r.kt)("inlineCode",{parentName:"li"},"students")," table."),(0,r.kt)("li",{parentName:"ul"},"You can then use ",(0,r.kt)("inlineCode",{parentName:"li"},"SELECT")," statements to view the contents of this table.")))),(0,r.kt)("h2",{id:"getting-started"},(0,r.kt)("a",{parentName:"h2",href:"#getting-started"},"Getting Started")),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Log into ",(0,r.kt)("a",{parentName:"li",href:"https://cs50.dev/"},"cs50.dev")," using your GitHub account."),(0,r.kt)("li",{parentName:"ol"},"Click inside the terminal window and execute ",(0,r.kt)("inlineCode",{parentName:"li"},"cd"),"."),(0,r.kt)("li",{parentName:"ol"},"Execute ",(0,r.kt)("inlineCode",{parentName:"li"},"wget https://cdn.cs50.net/2022/fall/labs/7/prophecy.zip")," followed by Enter in order to download a zip called ",(0,r.kt)("inlineCode",{parentName:"li"},"prophecy.zip")," in your codespace. Take care not to overlook the space between ",(0,r.kt)("inlineCode",{parentName:"li"},"wget")," and the following URL, or any other character for that matter!"),(0,r.kt)("li",{parentName:"ol"},"Now execute ",(0,r.kt)("inlineCode",{parentName:"li"},"unzip prophecy.zip")," to create a folder called ",(0,r.kt)("inlineCode",{parentName:"li"},"prophecy"),"."),(0,r.kt)("li",{parentName:"ol"},"You no longer need the ZIP file, so you can execute ",(0,r.kt)("inlineCode",{parentName:"li"},"rm prophecy.zip")," and respond with \u201cy\u201d followed by Enter at the prompt.")),(0,r.kt)("h2",{id:"implementation-details"},(0,r.kt)("a",{parentName:"h2",href:"#implementation-details"},"Implementation Details")),(0,r.kt)("p",null,"You will use the existing data in ",(0,r.kt)("inlineCode",{parentName:"p"},"roster.db")," to create a new database, one with a table for students, a table for houses, and a table for house assignments. You can do this with individual ",(0,r.kt)("inlineCode",{parentName:"p"},"SQL")," queries, though we recommend ultimately writing your own Python program to automate the process! Notice we\u2019ve given you the data from the ",(0,r.kt)("inlineCode",{parentName:"p"},"students")," table of ",(0,r.kt)("inlineCode",{parentName:"p"},"roster.db")," in CSV format, ",(0,r.kt)("inlineCode",{parentName:"p"},"students.csv"),", for your convenience."),(0,r.kt)("h3",{id:"developing-a-schema"},(0,r.kt)("a",{parentName:"h3",href:"#developing-a-schema"},"Developing a Schema")),(0,r.kt)("p",null,"First, let\u2019s develop a new schema for the database. In ",(0,r.kt)("inlineCode",{parentName:"p"},"schema.sql"),", document the three ",(0,r.kt)("inlineCode",{parentName:"p"},"CREATE TABLE")," commands you\u2019ll need to create your three new tables."),(0,r.kt)("p",null,"Keep in mind you\u2019ll want each table to represent a single entity: that is, your students table should represent ",(0,r.kt)("em",{parentName:"p"},"only")," students, your houses table should represent only ",(0,r.kt)("em",{parentName:"p"},"houses"),", and your house assignments table should represent ",(0,r.kt)("em",{parentName:"p"},"only")," house assignments. You might find it helpful to first consider the pieces of information you\u2019ll need in each table, and then about which SQLite data type best represents that information. For example, this was the ",(0,r.kt)("inlineCode",{parentName:"p"},"CREATE TABLE")," command for ",(0,r.kt)("inlineCode",{parentName:"p"},"students"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"CREATE TABLE students (\n    id INTEGER,\n    student_name TEXT,\n    house TEXT,\n    head TEXT,\n    PRIMARY KEY(id)\n);\n\n")),(0,r.kt)("p",null,"Keep in mind that every table should have a primary key: a column that uniquely identifies every row in the table. Some tables may be best designed with foreign keys: columns that reference the primary keys of another table."),(0,r.kt)("p",null,"When you\u2019re ready to configure your database with your new schema, run your three new ",(0,r.kt)("inlineCode",{parentName:"p"},"CREATE TABLE")," queries. Type ",(0,r.kt)("inlineCode",{parentName:"p"},".schema")," to see your results."),(0,r.kt)("h3",{id:"inserting-data"},(0,r.kt)("a",{parentName:"h3",href:"#inserting-data"},"Inserting Data")),(0,r.kt)("p",null,"After you\u2019ve configured your database with your new schema, you can begin inserting data into your new database (using your new schema!). It\u2019s best to write a Python program here, which can save you the trouble of writing many ",(0,r.kt)("inlineCode",{parentName:"p"},"INSERT")," queries. Keep in mind that you have ",(0,r.kt)("inlineCode",{parentName:"p"},"students.csv"),", which contains the data from the previous database\u2019s ",(0,r.kt)("inlineCode",{parentName:"p"},"students")," table."),(0,r.kt)("h2",{id:"thought-question"},(0,r.kt)("a",{parentName:"h2",href:"#thought-question"},"Thought Question")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Why do you think it\u2019s considered better design not to repeat information like houses and heads for each student?")),(0,r.kt)("h2",{id:"how-to-test-your-code"},(0,r.kt)("a",{parentName:"h2",href:"#how-to-test-your-code"},"How to Test Your Code")),(0,r.kt)("p",null,"You\u2019ll likely find the following commands helpful for testing your code:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},".schema")," to check the schema of your database"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"SELECT * FROM table;")," where ",(0,r.kt)("inlineCode",{parentName:"li"},"table")," is the name of the table you\u2019d like to see data from")),(0,r.kt)("p",null,"No ",(0,r.kt)("inlineCode",{parentName:"p"},"check50")," for this one!"),(0,r.kt)("h2",{id:"how-to-submit"},(0,r.kt)("a",{parentName:"h2",href:"#how-to-submit"},"How to Submit")),(0,r.kt)("p",null,"No need to submit. This is a practice problem!"))}d.isMDXComponent=!0},4295:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/prophecy-97388448d9432197dfa1d5f6119e8a79.jpg"}}]);