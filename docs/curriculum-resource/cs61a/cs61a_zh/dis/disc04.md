---
title: Discussion 4 Tree Recursion
---

# è®¨è®º 4 | CS 61A 2024 æ˜¥å­£å­¦æœŸ

## è®¨è®º 4ï¼šæ ‘é€’å½’

-   [disc04.pdf](/resource/cs61a/disc/disc04.pdf)

å°ç»„é€‰ä¸€ä¸ªäººåŠ å…¥ Discordã€‚å¤šäººåŠ å…¥ä¹Ÿè¡Œï¼Œä½†ä¸€ä¸ªäººå°±å¤Ÿäº†ã€‚

ç°åœ¨åˆ‡æ¢åˆ° Pensieveï¼š

-   **æ‰€æœ‰äºº**ï¼šå‰å¾€ [discuss.pensieve.co](http://discuss.pensieve.co/) å¹¶ä½¿ç”¨æ‚¨çš„ @berkeley.edu é‚®ç®±ç™»å½•ï¼Œç„¶åè¾“å…¥æ‚¨çš„ç»„å·ã€‚ï¼ˆæ‚¨çš„ç»„å·æ˜¯æ‚¨çš„ Discord é¢‘é“å·ã€‚ï¼‰

è¿›å…¥ Pensieve åï¼Œæ‚¨æ— éœ€è¿”å›æ­¤é¡µé¢ï¼›Pensieve å…·æœ‰æ‰€æœ‰ç›¸åŒçš„å†…å®¹ï¼ˆä½†åŠŸèƒ½æ›´å¤šï¼‰ã€‚ å¦‚æœç”±äºæŸç§åŸå›  Pensieve æ— æ³•å·¥ä½œï¼Œè¯·è¿”å›æ­¤é¡µé¢å¹¶ç»§ç»­è®¨è®ºã€‚

å¦‚æœæ‚¨é‡åˆ°é—®é¢˜ï¼Œè¯·åœ¨ [Discord](https://cs61a.org/articles/discord/) ä¸Šçš„ `#help` é¢‘é“ä¸­å‘å¸–ã€‚

## å¼€å§‹

ä¸ºäº†å‘¼åº”ä»Šå¤©æ ‘é€’å½’çš„ä¸»é¢˜ï¼Œè¯·å¤§å®¶ä»‹ç»ä¸€ä¸‹è‡ªå·±çš„åå­—ï¼Œä»¥åŠæœ€å–œæ¬¢çš„ä¸€æ£µæ ‘ï¼ˆå¯ä»¥æ˜¯å…·ä½“çš„æ ‘ï¼Œä¹Ÿå¯ä»¥æ˜¯æ ‘çš„ç§ç±»ï¼‰ã€‚ æ ‘é€’å½’å‡½æ•°æ˜¯æŒ‡ä¼šå¤šæ¬¡è°ƒç”¨è‡ªèº«çš„å‡½æ•°ã€‚

åœ¨æœ¬æ¬¡è®¨è®ºä¸­ï¼Œåœ¨æ‚¨ç¡®ä¿¡æ‚¨çš„è§£å†³æ–¹æ¡ˆæ­£ç¡®ä¹‹å‰ï¼Œè¯·å‹¿ä½¿ç”¨ Python è§£é‡Šå™¨æ¥è¿è¡Œä»£ç ã€‚ é€šè¿‡_æ€è€ƒ_ä»£ç çš„è¿è¡Œç»“æœæ¥è§£å†³é—®é¢˜å¹¶æ£€æŸ¥ä»£ç ã€‚ ä¸ç¡®å®šï¼Ÿ ä¸æ‚¨çš„å°ç»„è®¨è®ºï¼

**\[æ–°å†…å®¹]** å¦‚æœå°ç»„äººæ•°ä¸è¶³ 4 äººï¼Œå¯ä»¥å’ŒåŒæˆ¿é—´çš„å…¶ä»–å°ç»„åˆå¹¶ã€‚

**\[æ–°å†…å®¹]** é€’å½’éœ€è¦ç»ƒä¹ ã€‚ å¦‚æœæ‚¨æ­£åœ¨åŠªåŠ›ç¼–å†™é€’å½’å‡½æ•°ï¼Œè¯·ä¸è¦æ°”é¦ã€‚ ç›¸åï¼Œæ¯æ¬¡è§£å†³é—®é¢˜åï¼ˆå³ä½¿æ˜¯åœ¨å¸®åŠ©ä¸‹æˆ–å°ç»„åˆä½œå®Œæˆï¼‰ï¼Œéƒ½è¯·è®°å½•ä¸‹ä¸ºäº†å–å¾—è¿›å±•ï¼Œä½ æ„è¯†åˆ°äº†ä»€ä¹ˆã€‚ å­¦ç”Ÿé€šè¿‡å®è·µå’Œåæ€æ¥æé«˜ã€‚

**\[ä¸ºäº†å¥½ç©]** è¿™ä¸ªæˆ´ç‰›ä»”å¸½çš„å®¶ä¼™çš„è¡¨æƒ…ç¬¦å·æ˜¯æœ‰æ•ˆçš„ Pythonï¼š`o[:-D]`

```
>>> o = [2, 0, 2, 4]
>>> [ o[:-D] for D in range(1,4) ]
[[2, 0, 2], [2, 0], [2]]
```

ğŸ¤ 

## æ ‘é€’å½’

å¯¹äºä»¥ä¸‹é—®é¢˜ï¼Œä¸è¦ç«‹å³å¼€å§‹å°è¯•ç¼–å†™ä»£ç ã€‚ è€Œæ˜¯é¦–å…ˆç”¨æ–‡å­—æè¿°é€’å½’æƒ…å†µã€‚ ä¸€äº›ä¾‹å­ï¼š

-   åœ¨è®²åº§ä¸­çš„ `fib` ä¸­ï¼Œé€’å½’æƒ…å†µæ˜¯å°†å‰ä¸¤ä¸ªæ–æ³¢é‚£å¥‘æ•°åŠ åœ¨ä¸€èµ·ã€‚
-   åœ¨å®éªŒä¸­çš„ `double_eights` ä¸­ï¼Œé€’å½’æƒ…å†µæ˜¯æ£€æŸ¥æ•°å­—çš„å…¶ä½™éƒ¨åˆ†ä¸­æ˜¯å¦æœ‰åŒ 8ã€‚
-   åœ¨è®²åº§ä¸­æåˆ°çš„ `count_partitions` å‡½æ•°é‡Œï¼Œé€’å½’çš„æƒ…å†µæ˜¯ï¼šä½¿ç”¨æœ€å¤§ä¸º `m` çš„æ•°æ¥åˆ’åˆ† `n-m`ï¼Œå¹¶ä¸”ä½¿ç”¨æœ€å¤§ä¸º `m-1` çš„æ•°æ¥åˆ’åˆ† `n`ã€‚

### Q1ï¼šæ˜†è™«ç»„åˆå­¦

ä¸€åªæ˜†è™«åœ¨ä¸€ä¸ª `m x n` çš„ç½‘æ ¼é‡Œã€‚ æ˜†è™«ä»å·¦ä¸‹è§’ `(1, 1)` å¼€å§‹ï¼Œæƒ³è¦åˆ°è¾¾å³ä¸Šè§’ `(m, n)`ã€‚ æ˜†è™«åªèƒ½å‘ä¸Šæˆ–å‘å³ç§»åŠ¨ã€‚ ç¼–å†™ä¸€ä¸ª `paths` å‡½æ•°ï¼Œè¾“å…¥ç½‘æ ¼çš„é«˜åº¦å’Œå®½åº¦ï¼Œè¿”å›æ˜†è™«ä»èµ·ç‚¹åˆ°ç»ˆç‚¹çš„è·¯å¾„æ€»æ•°ã€‚è¿™ä¸ªé—®é¢˜å­˜åœ¨[é—­å¼è§£](https://en.wikipedia.org/wiki/Closed-form_expression)ï¼Œä½†è¯·å°è¯•ç”¨é€’å½’æ–¹æ³•æ¥è§£å†³ã€‚

![æ˜†è™«ç½‘æ ¼ã€‚](/img/cs61a/grid.jpg)

åœ¨ `2 x 2` çš„ç½‘æ ¼ä¸­ï¼Œæ˜†è™«æœ‰ä¸¤æ¡ä»èµ·ç‚¹åˆ°ç»ˆç‚¹çš„è·¯å¾„ã€‚ åœ¨ `3 x 3` çš„ç½‘æ ¼ä¸­ï¼Œæ˜†è™«æœ‰å…­æ¡è·¯å¾„ï¼ˆä¸Šé¢åªæ˜¾ç¤ºäº†ä¸‰æ¡ï¼‰ã€‚

**æç¤ºï¼š** å¦‚æœæ˜†è™«åˆ°è¾¾ç½‘æ ¼çš„ä¸Šè¾¹ç•Œæˆ–å³è¾¹ç•Œä¼šæ€æ ·ï¼Ÿ

```python
def paths(m, n):
    """Return the number of paths from one corner of an
    M by N grid to the opposite corner.

    >>> paths(2, 2)
    2
    >>> paths(5, 7)
    210
    >>> paths(117, 1)
    1
    >>> paths(1, 157)
    1
    """
    "*** YOUR CODE HERE ***"
```

åœ¨ 61A ä»£ç å¹³å°è¿è¡Œ
**è®²è§£ç¯èŠ‚ï¼š** å°ç»„è¾¾æˆä¸€è‡´æ–¹æ¡ˆåï¼Œå°±è¯¥ç»ƒä¹ å¦‚ä½•æ¸…æ™°åœ°è§£é‡Šé€’å½’é€»è¾‘äº†ã€‚é€‰å‡ºä¸€ä½å±•ç¤ºè€…ï¼Œç„¶ååœ¨ discuss-queue é¢‘é“å‘é€å¸¦æœ‰ @discuss æ ‡ç­¾çš„æ¶ˆæ¯ï¼Œå†…å®¹åŒ…æ‹¬å°ç»„ç¼–å·å’Œ "Here's the path!"ã€‚åŠ©æ•™ä¼šåŠ å…¥è¯­éŸ³é¢‘é“ï¼Œå¬å–è®²è§£å¹¶ç»™å‡ºåé¦ˆã€‚

## åˆ—è¡¨çš„æ ‘é€’å½’

**ã€æ–°ã€‘** æœ‰äº›åŒå­¦å¯èƒ½å·²ç»äº†è§£äº†æˆ‘ä»¬è¿˜æ²¡è®²åˆ°çš„åˆ—è¡¨æ“ä½œï¼Œæ¯”å¦‚ `append`ã€‚ä»Šå¤©è¯·å…ˆä¸è¦ä½¿ç”¨ã€‚åªéœ€è¦ä½¿ç”¨åˆ—è¡¨å­—é¢é‡ (ä¾‹å¦‚ `[1, 2, 3]`)ã€å…ƒç´ é€‰æ‹© (ä¾‹å¦‚ `s[0]`)ã€åˆ—è¡¨ç›¸åŠ  (ä¾‹å¦‚ `[1] + [2, 3]`)ã€`len` å‡½æ•° (ä¾‹å¦‚ `len(s)`) å’Œåˆ‡ç‰‡ (ä¾‹å¦‚ `s[1:]`)ã€‚ä¸‹å‘¨æˆ‘ä»¬ä»‹ç»å…¶ä»–åˆ—è¡¨æ“ä½œæ—¶ï¼Œä¼šæœ‰å……è¶³çš„æ—¶é—´ã€‚

å…³äºåˆ—è¡¨ï¼Œæœ€é‡è¦çš„æ˜¯è¦è®°ä½ï¼Œä»»ä½•éç©ºåˆ—è¡¨ `s` éƒ½å¯ä»¥æ‹†åˆ†æˆç¬¬ä¸€ä¸ªå…ƒç´  `s[0]` å’Œå‰©ä½™éƒ¨åˆ† `s[1:]`ã€‚

```
>>> s = [2, 3, 6, 4]
>>> s[0]
2
>>> s[1:]
[3, 6, 4]
```

### Q2: æœ€å¤§ä¹˜ç§¯

å®ç° `max_product`ï¼Œå®ƒæ¥å—ä¸€ä¸ªæ•°å­—åˆ—è¡¨ï¼Œå¹¶è¿”å›å¯ä»¥é€šè¿‡å°†åˆ—è¡¨ä¸­éè¿ç»­å…ƒç´ ç›¸ä¹˜å½¢æˆçš„æœ€å¤§ä¹˜ç§¯ã€‚å‡è®¾è¾“å…¥åˆ—è¡¨ä¸­çš„æ‰€æœ‰æ•°å­—éƒ½å¤§äºæˆ–ç­‰äº 1ã€‚
```python
def max_product(s):
    """Return the maximum product of non-consecutive elements of s.

    >>> max_product([10, 3, 1, 9, 2])   # 10 * 9
    90
    >>> max_product([5, 10, 5, 10, 5])  # 5 * 5 * 5
    125
    >>> max_product([])                 # The product of no numbers is 1
    1
    """
```
åœ¨ 61A ä»£ç å¹³å°è¿è¡Œ
:::tip[**æç¤º**]
é¦–å…ˆå°è¯•å°†ç¬¬ä¸€ä¸ªå…ƒç´ ä¹˜ä»¥å‰©ä½™å…ƒç´ çš„ `max_product` (è·³è¿‡ä¸ç¬¬ä¸€ä¸ªå…ƒç´ ç›¸é‚»çš„ç¬¬äºŒä¸ªå…ƒç´ )ï¼Œç„¶åå°è¯•è·³è¿‡ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œè®¡ç®—å‰©ä½™å…ƒç´ çš„ `max_product`ã€‚ä½¿ç”¨ `max` å‡½æ•°æ¥æ¯”è¾ƒè¿™ä¸¤ç§ç»“æœï¼Œå–è¾ƒå¤§å€¼ã€‚

é‡åˆ°é—®é¢˜æ—¶ï¼Œæ¬¢è¿ä¸åŠ©æ•™äº¤æµï¼

è¯·å°ç»„åˆä½œå®Œæˆè¿™å¥è¯ï¼Œå¹¶å°†ç­”æ¡ˆå‘é€åˆ°å°ç»„çš„[é¢‘é“æ–‡æœ¬èŠå¤©]ä¸­ã€‚â€œé€’å½’æƒ…å†µæ˜¯é€‰æ‹© ... å’Œ ... ä¸­è¾ƒå¤§çš„ä¸€ä¸ªâ€
:::
### Q3: æ±‚å’Œé—®é¢˜

å®ç° `sums(n, m)`ï¼Œå®ƒæ¥å—æ€»æ•° `n` å’Œæœ€å¤§å€¼ `m`ã€‚å®ƒè¿”å›æ‰€æœ‰åˆ—è¡¨çš„åˆ—è¡¨ï¼š

1.  æ€»å’Œä¸º `n`ï¼Œ
2.  ä»…åŒ…å«é«˜è¾¾ `m` çš„æ­£æ•°ï¼Œå¹¶ä¸”
3.  å…¶ä¸­æ²¡æœ‰ä¸¤ä¸ªç›¸é‚»çš„æ•°å­—ç›¸åŒã€‚

æ•°å­—ç›¸åŒä½†é¡ºåºä¸åŒçš„åˆ—è¡¨éƒ½è¦è¿”å›ã€‚

ä»¥ä¸‹æ˜¯ä¸€ä¸ªé€’å½’æ–¹æ³•ï¼Œä¸æ¨¡æ¿ç›¸ç¬¦ï¼šå¯¹äºä» 1 åˆ° `m` çš„æ¯ä¸ª `k`ï¼Œæ„å»ºæ‰€æœ‰æ€»å’Œä¸º `n` ä¸”ä»¥ `k` å¼€å¤´çš„åˆ—è¡¨ï¼Œå¹¶å°†å®ƒä»¬æ·»åŠ åˆ° `result` åˆ—è¡¨ä¸­ã€‚

**æç¤ºï¼š** ä½¿ç”¨ `[k] + s` (å…¶ä¸­ `k` æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œ`s` æ˜¯ä¸€ä¸ªåˆ—è¡¨) æ¥æ„å»ºä¸€ä¸ªä»¥ `k` å¼€å¤´çš„æ–°åˆ—è¡¨ã€‚
```
>>> k = 2
>>> s = [4, 3, 1]
>>> [k] + s
[2, 4, 3, 1]
```
```python
def sums(n, m):
    """Return lists that sum to n containing positive numbers up to m that
    have no adjacent repeats.

    >>> sums(5, 1)
    []
    >>> sums(5, 2)
    [[2, 1, 2]]
    >>> sums(5, 3)
    [[1, 3, 1], [2, 1, 2], [2, 3], [3, 2]]
    >>> sums(5, 5)
    [[1, 3, 1], [1, 4], [2, 1, 2], [2, 3], [3, 2], [4, 1], [5]]
    >>> sums(6, 3)
    [[1, 2, 1, 2], [1, 2, 3], [1, 3, 2], [2, 1, 2, 1], [2, 1, 3], [2, 3, 1], [3, 1, 2], [3, 2, 1]]
    """
    if n < 0:
        return []
    if n == 0:
        sums_to_zero = []     # The only way to sum to zero using positives
        return [sums_to_zero] # Return a list of all the ways to sum to zero
    result = []
    for k in range(1, m + 1):
        result = result + [ ___ for rest in ___ if rest == [] or ___ ]
    return result
```
Run in 61A Code
:::tip[**æç¤ºä¿¡æ¯**]
`k` æ˜¯åˆ—è¡¨ä¸­åŠ èµ·æ¥æ€»å’Œä¸º `n` çš„åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªæ•°å­—ï¼Œ`rest` åˆ™æ˜¯åˆ—è¡¨å‰©ä½™çš„éƒ¨åˆ†ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦æ„å»ºä¸€ä¸ªæ€»å’Œä¸º `n` çš„åˆ—è¡¨ã€‚

è°ƒç”¨ `sums` å‡½æ•°æ¥ç”Ÿæˆæ‰€æœ‰æ€»å’Œä¸º `n-k` çš„åˆ—è¡¨ã€‚é€šè¿‡åœ¨è¿™äº›åˆ—è¡¨çš„å‰é¢æ·»åŠ  `k`ï¼Œå°±å¯ä»¥æ„å»ºå‡ºæ€»å’Œä¸º `n` çš„åˆ—è¡¨ã€‚

è¿™é‡Œéœ€è¦ç¡®ä¿â€œæ²¡æœ‰ä¸¤ä¸ªç›¸é‚»çš„æ•°å­—æ˜¯ç›¸åŒçš„â€ã€‚å› ä¸º `k` æ˜¯ä½ æ„å»ºçš„åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªæ•°å­—ï¼Œæ‰€ä»¥å®ƒä¸èƒ½å’Œ `rest` çš„ç¬¬ä¸€ä¸ªå…ƒç´ ç›¸åŒï¼ˆä¹Ÿå°±æ˜¯åˆ—è¡¨çš„ç¬¬äºŒä¸ªæ•°å­—ï¼‰ã€‚
:::
å¦‚æœæ‚¨é‡åˆ°å›°éš¾å¹¶æƒ³ä¸å·¥ä½œäººå‘˜äº¤è°ˆï¼Œè¯·åœ¨ Discord ä¸Šå‘å¸–ï¼

## è®°å½•æœ¬æ¬¡æ´»åŠ¨

è¯·å¤§å®¶å¡«å†™[å‡ºå‹¤è¡¨](https://docs.google.com/forms/d/e/1FAIpQLSeqlK8l6WkScGr-RHR-kM4p5bnR9cllYrG95fDqPJspSlll7A/viewform)ï¼ˆæ¯äººæ¯å‘¨æäº¤ä¸€æ¬¡ï¼‰ã€‚
