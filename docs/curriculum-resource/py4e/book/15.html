<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-curriculum-resource/py4e/book/15" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">15-database | CS自学社区</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://www.learncs.site/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://www.learncs.site/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://www.learncs.site/docs/curriculum-resource/py4e/book/15"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="baidu-site-verification" content="codeva-hJyfN2UKgo"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="15-database | CS自学社区"><meta data-rh="true" name="description" content="What is a database?"><meta data-rh="true" property="og:description" content="What is a database?"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://www.learncs.site/docs/curriculum-resource/py4e/book/15"><link data-rh="true" rel="alternate" href="https://www.learncs.site/docs/curriculum-resource/py4e/book/15" hreflang="en"><link data-rh="true" rel="alternate" href="https://www.learncs.site/docs/curriculum-resource/py4e/book/15" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="CS自学社区 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="CS自学社区 Atom Feed">




<link rel="stylesheet" href="/katex/katex.min.css"><link rel="stylesheet" href="/assets/css/styles.c4382977.css">
<link rel="preload" href="/assets/js/runtime~main.1f1549d9.js" as="script">
<link rel="preload" href="/assets/js/main.2f696ece.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#fafbfc;color:#091E42" role="banner"><div class="content_knG7 announcementBarContent_xLdY">🎉️🎉️🎉️课程文档汉化工作正在进行中 🎉️🎉️ 学习交流群请到 <a href="/community">社区页面</a> 查看入群方式 🎉️🎉️🎉️</div></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="TeachYourselfCS" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="TeachYourselfCS" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">TeachYourselfCS</b></a><a class="navbar__item navbar__link" href="/docs/roadmap">路线图</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">课程资源</a><a class="navbar__item navbar__link" href="/blog">博客</a><a class="navbar__item navbar__link" href="/community">社区</a><a class="navbar__item navbar__link" href="/donate">捐赠我们</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">前言</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/roadmap">路线图</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/课程资源">课程资源</a><button aria-label="Toggle the collapsible sidebar category &#x27;课程资源&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/cs50x">cs50x</a><button aria-label="Toggle the collapsible sidebar category &#x27;cs50x&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/cs61a">cs61a</a><button aria-label="Toggle the collapsible sidebar category &#x27;cs61a&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/cs61b">cs61b</a><button aria-label="Toggle the collapsible sidebar category &#x27;cs61b&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/cs61c">cs61c</a><button aria-label="Toggle the collapsible sidebar category &#x27;cs61c&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/18-01">MIT 18.01</a><button aria-label="Toggle the collapsible sidebar category &#x27;MIT 18.01&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/18-02">MIT 18.02</a><button aria-label="Toggle the collapsible sidebar category &#x27;MIT 18.02&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/18-06">MIT 18.06</a><button aria-label="Toggle the collapsible sidebar category &#x27;MIT 18.06&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/6-04j">MIT 6.042J</a><button aria-label="Toggle the collapsible sidebar category &#x27;MIT 6.042J&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/cs162">cs162</a><button aria-label="Toggle the collapsible sidebar category &#x27;cs162&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/cs144">cs144</a><button aria-label="Toggle the collapsible sidebar category &#x27;cs144&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/15-445">CMU 15-445</a><button aria-label="Toggle the collapsible sidebar category &#x27;CMU 15-445&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/curriculum-resource/py4e">py4e</a><button aria-label="Toggle the collapsible sidebar category &#x27;py4e&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/curriculum-resource/py4e/book/01">py4e book</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/curriculum-resource/py4e/book/01">01-intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/curriculum-resource/py4e/book/02">02-variables</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/curriculum-resource/py4e/book/03">02-conditional</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/curriculum-resource/py4e/book/04">04-functions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/curriculum-resource/py4e/book/05">05-iterations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/curriculum-resource/py4e/book/06">06-strings</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/curriculum-resource/py4e/book/07">07-files</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/curriculum-resource/py4e/book/08">08-list</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/curriculum-resource/py4e/book/09">09-dictionaries</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/curriculum-resource/py4e/book/10">10-tuples</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/curriculum-resource/py4e/book/11">11-regex</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/curriculum-resource/py4e/book/12">12-network</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/curriculum-resource/py4e/book/13">13-web</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/curriculum-resource/py4e/book/14">14-objects</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/curriculum-resource/py4e/book/15">15-database</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/curriculum-resource/py4e/book/16">16-visualizing-data</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/py4e/book_zh/01">py4e book 中文翻译</a></div></li></ul></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/课程资源"><span itemprop="name">课程资源</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/curriculum-resource/py4e"><span itemprop="name">py4e</span></a><meta itemprop="position" content="2"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">py4e book</span><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">15-database</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Using Databases and SQL</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-a-database">What is a database?<a href="#what-is-a-database" class="hash-link" aria-label="Direct link to What is a database?" title="Direct link to What is a database?">​</a></h2><p>A <em>database</em> is a file that is organized for storing data.
Most databases are organized like a dictionary in the sense that they
map from keys to values. The biggest difference is that the database is
on disk (or other permanent storage), so it persists after the program
ends. Because a database is stored on permanent storage, it can store
far more data than a dictionary, which is limited to the size of the
memory in the computer.</p><p>Like a dictionary, database software is designed to keep the
inserting and accessing of data very fast, even for large amounts of
data. Database software maintains its performance by building
<em>indexes</em> as data is added to the database to allow the computer
to jump quickly to a particular entry.</p><p>There are many different database systems which are used for a wide
variety of purposes including: Oracle, MySQL, Microsoft SQL Server,
PostgreSQL, and SQLite. We focus on SQLite in this book because it is a
very common database and is already built into Python. SQLite is
designed to be <em>embedded</em> into other applications to provide
database support within the application. For example, the Firefox
browser also uses the SQLite database internally as do many other
products.</p><p><a href="http://sqlite.org/" target="_blank" rel="noopener noreferrer">http://sqlite.org/</a></p><p>SQLite is well suited to some of the data manipulation problems that
we see in Informatics.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="database-concepts">Database concepts<a href="#database-concepts" class="hash-link" aria-label="Direct link to Database concepts" title="Direct link to Database concepts">​</a></h2><p>When you first look at a database it looks like a spreadsheet with
multiple sheets. The primary data structures in a database are:
<em>tables</em>, <em>rows</em>, and <em>columns</em>.</p><p><img loading="lazy" alt="Relational Databases" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bD0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB2aWV3Qm94PSI4IDYgNDgyIDE1OSIgd2lkdGg9IjQ4MnB0IiBoZWlnaHQ9IjE1OXB0IiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iPjxtZXRhZGF0YT4gUHJvZHVjZWQgYnkgT21uaUdyYWZmbGUgNi40LjEgPGRjOmRhdGU+MjAxNi0wMS0xNiAyMTowMzozMiArMDAwMDwvZGM6ZGF0ZT48L21ldGFkYXRhPjxkZWZzPjxmb250LWZhY2UgZm9udC1mYW1pbHk9IkhlbHZldGljYSBOZXVlIiBmb250LXNpemU9IjE0IiBwYW5vc2UtMT0iMiAwIDUgMyAwIDAgMCAyIDAgNCIgdW5pdHMtcGVyLWVtPSIxMDAwIiB1bmRlcmxpbmUtcG9zaXRpb249Ii0xMDAiIHVuZGVybGluZS10aGlja25lc3M9IjUwIiBzbG9wZT0iMCIgeC1oZWlnaHQ9IjUxNyIgY2FwLWhlaWdodD0iNzE0IiBhc2NlbnQ9Ijk1MS45OTU4NSIgZGVzY2VudD0iLTIxMi45OTc0NCIgZm9udC13ZWlnaHQ9IjUwMCI+PGZvbnQtZmFjZS1zcmM+PGZvbnQtZmFjZS1uYW1lIG5hbWU9IkhlbHZldGljYU5ldWUiLz48L2ZvbnQtZmFjZS1zcmM+PC9mb250LWZhY2U+PGZvbnQtZmFjZSBmb250LWZhbWlseT0iSGVsdmV0aWNhIE5ldWUiIGZvbnQtc2l6ZT0iMTYiIHBhbm9zZS0xPSIyIDAgNSAzIDAgMCAwIDIgMCA0IiB1bml0cy1wZXItZW09IjEwMDAiIHVuZGVybGluZS1wb3NpdGlvbj0iLTEwMCIgdW5kZXJsaW5lLXRoaWNrbmVzcz0iNTAiIHNsb3BlPSIwIiB4LWhlaWdodD0iNTE3IiBjYXAtaGVpZ2h0PSI3MTQiIGFzY2VudD0iOTUxLjk5NTg1IiBkZXNjZW50PSItMjEyLjk5NzQ0IiBmb250LXdlaWdodD0iNTAwIj48Zm9udC1mYWNlLXNyYz48Zm9udC1mYWNlLW5hbWUgbmFtZT0iSGVsdmV0aWNhTmV1ZSIvPjwvZm9udC1mYWNlLXNyYz48L2ZvbnQtZmFjZT48L2RlZnM+PGcgc3Ryb2tlPSJub25lIiBzdHJva2Utb3BhY2l0eT0iMSIgc3Ryb2tlLWRhc2hhcnJheT0ibm9uZSIgZmlsbD0ibm9uZSIgZmlsbC1vcGFjaXR5PSIxIj48dGl0bGU+Q2FudmFzIDE8L3RpdGxlPjxyZWN0IGZpbGw9IndoaXRlIiB3aWR0aD0iNTU5IiBoZWlnaHQ9IjQ0NCIvPjxnPjx0aXRsZT5MYXllciAxPC90aXRsZT48cmVjdCB4PSI1NCIgeT0iMzYiIHdpZHRoPSIxODAiIGhlaWdodD0iMTI2IiBmaWxsPSJ3aGl0ZSIvPjxyZWN0IHg9IjU0IiB5PSIzNiIgd2lkdGg9IjE4MCIgaGVpZ2h0PSIxMjYiIHN0cm9rZT0iYmxhY2siIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIzIi8+PHJlY3QgeD0iNTQiIHk9Ijk5IiB3aWR0aD0iMTgwIiBoZWlnaHQ9IjI3IiBzdHJva2U9ImJsYWNrIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMSIvPjxyZWN0IHg9IjE3MSIgeT0iMzYiIHdpZHRoPSIyNyIgaGVpZ2h0PSIxMjYiIHN0cm9rZT0iYmxhY2siIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIxIi8+PHRleHQgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTc1LjUgMTAzLjUpIiBmaWxsPSJibGFjayI+PHRzcGFuIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EgTmV1ZSIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9IjUwMCIgeD0iLjI3IiB5PSIxMyIgdGV4dExlbmd0aD0iMTkuNDYiPjIuMzwvdHNwYW4+PC90ZXh0Pjx0ZXh0IHRyYW5zZm9ybT0idHJhbnNsYXRlKDY4IDQyKSIgZmlsbD0iYmxhY2siPjx0c3BhbiBmb250LWZhbWlseT0iSGVsdmV0aWNhIE5ldWUiIGZvbnQtc2l6ZT0iMTYiIGZvbnQtd2VpZ2h0PSI1MDAiIHg9Ii4xODQiIHk9IjE1IiB0ZXh0TGVuZ3RoPSI5LjE4NCI+VDwvdHNwYW4+PHRzcGFuIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EgTmV1ZSIgZm9udC1zaXplPSIxNiIgZm9udC13ZWlnaHQ9IjUwMCIgeD0iNy41OTIiIHk9IjE1IiB0ZXh0TGVuZ3RoPSIzMC4yMjQiPmFibGU8L3RzcGFuPjwvdGV4dD48dGV4dCB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMy41NjI1IDEwMikiIGZpbGw9ImJsYWNrIj48dHNwYW4gZm9udC1mYW1pbHk9IkhlbHZldGljYSBOZXVlIiBmb250LXNpemU9IjE2IiBmb250LXdlaWdodD0iNTAwIiB4PSIuMzI0IiB5PSIxNSIgdGV4dExlbmd0aD0iNS4zMjgiPnI8L3RzcGFuPjx0c3BhbiBmb250LWZhbWlseT0iSGVsdmV0aWNhIE5ldWUiIGZvbnQtc2l6ZT0iMTYiIGZvbnQtd2VpZ2h0PSI1MDAiIHg9IjUuMzY0IiB5PSIxNSIgdGV4dExlbmd0aD0iMjEuMzEyIj5vdzwvdHNwYW4+PC90ZXh0Pjx0ZXh0IHRyYW5zZm9ybT0idHJhbnNsYXRlKDE2MyAxMikiIGZpbGw9ImJsYWNrIj48dHNwYW4gZm9udC1mYW1pbHk9IkhlbHZldGljYSBOZXVlIiBmb250LXNpemU9IjE2IiBmb250LXdlaWdodD0iNTAwIiB4PSIuMTE2IiB5PSIxNSIgdGV4dExlbmd0aD0iNTIuNzY4Ij5jb2x1bW48L3RzcGFuPjwvdGV4dD48cmVjdCB4PSIzMDYuNDM3NSIgeT0iMzYiIHdpZHRoPSIxODAiIGhlaWdodD0iMTI2IiBmaWxsPSJ3aGl0ZSIvPjxyZWN0IHg9IjMwNi40Mzc1IiB5PSIzNiIgd2lkdGg9IjE4MCIgaGVpZ2h0PSIxMjYiIHN0cm9rZT0iYmxhY2siIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIzIi8+PHJlY3QgeD0iMzA2LjQzNzUiIHk9Ijk5IiB3aWR0aD0iMTgwIiBoZWlnaHQ9IjI3IiBzdHJva2U9ImJsYWNrIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMSIvPjxyZWN0IHg9IjQyMy40Mzc1IiB5PSIzNiIgd2lkdGg9IjI3IiBoZWlnaHQ9IjEyNiIgc3Ryb2tlPSJibGFjayIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjEiLz48dGV4dCB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0MjcuOTM3NSAxMDMuNSkiIGZpbGw9ImJsYWNrIj48dHNwYW4gZm9udC1mYW1pbHk9IkhlbHZldGljYSBOZXVlIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iNTAwIiB4PSIuMjciIHk9IjEzIiB0ZXh0TGVuZ3RoPSIxOS40NiI+Mi4zPC90c3Bhbj48L3RleHQ+PHRleHQgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzA5LjkzNzUgNDIpIiBmaWxsPSJibGFjayI+PHRzcGFuIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EgTmV1ZSIgZm9udC1zaXplPSIxNiIgZm9udC13ZWlnaHQ9IjUwMCIgeD0iNi44NDcyNSIgeT0iMTUiIHRleHRMZW5ndGg9IjU4LjM2OCI+UmVsYXRpb248L3RzcGFuPjwvdGV4dD48dGV4dCB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNjEuNSAxMDIpIiBmaWxsPSJibGFjayI+PHRzcGFuIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EgTmV1ZSIgZm9udC1zaXplPSIxNiIgZm9udC13ZWlnaHQ9IjUwMCIgeD0iLjIxNiIgeT0iMTUiIHRleHRMZW5ndGg9IjM1LjU2OCI+dHVwbGU8L3RzcGFuPjwvdGV4dD48dGV4dCB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0MTEuOTM3NSAxMikiIGZpbGw9ImJsYWNrIj48dHNwYW4gZm9udC1mYW1pbHk9IkhlbHZldGljYSBOZXVlIiBmb250LXNpemU9IjE2IiBmb250LXdlaWdodD0iNTAwIiB4PSIuMjE2IiB5PSIxNSIgdGV4dExlbmd0aD0iNTkuNTY4Ij5hdHRyaWJ1dGU8L3RzcGFuPjwvdGV4dD48L2c+PC9nPjwvc3ZnPgo=" width="643" height="212" class="img_ev3q">
Relational Databases</p><p>In technical descriptions of relational databases the concepts of
table, row, and column are more formally referred to as
<em>relation</em>, <em>tuple</em>, and <em>attribute</em>, respectively.
We will use the less formal terms in this chapter.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="database-browser-for-sqlite">Database Browser for SQLite<a href="#database-browser-for-sqlite" class="hash-link" aria-label="Direct link to Database Browser for SQLite" title="Direct link to Database Browser for SQLite">​</a></h2><p>While this chapter will focus on using Python to work with data in
SQLite database files, many operations can be done more conveniently
using software called the <em>Database Browser for SQLite</em> which is
freely available from:</p><p><a href="http://sqlitebrowser.org/" target="_blank" rel="noopener noreferrer">http://sqlitebrowser.org/</a></p><p>Using the browser you can easily create tables, insert data, edit
data, or run simple SQL queries on the data in the database.</p><p>In a sense, the database browser is similar to a text editor when
working with text files. When you want to do one or very few operations
on a text file, you can just open it in a text editor and make the
changes you want. When you have many changes that you need to do to a
text file, often you will write a simple Python program. You will find
the same pattern when working with databases. You will do simple
operations in the database manager and more complex operations will be
most conveniently done in Python.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="creating-a-database-table">Creating a database table<a href="#creating-a-database-table" class="hash-link" aria-label="Direct link to Creating a database table" title="Direct link to Creating a database table">​</a></h2><p>Databases require more defined structure than Python lists or
dictionaries <a href="https://www.py4e.com/html3/15-database#fn1" target="_blank" rel="noopener noreferrer">1</a>.</p><p>When we create a database <em>table</em> we must tell the database in
advance the names of each of the <em>columns</em> in the table and the
type of data which we are planning to store in each <em>column</em>.
When the database software knows the type of data in each column, it can
choose the most efficient way to store and look up the data based on the
type of data.</p><p>You can look at the various data types supported by SQLite at the
following url:</p><p><a href="http://www.sqlite.org/datatypes.html" target="_blank" rel="noopener noreferrer">http://www.sqlite.org/datatypes.html</a></p><p>Defining structure for your data up front may seem inconvenient at
the beginning, but the payoff is fast access to your data even when the
database contains a large amount of data.</p><p>The code to create a database file and a table named
<code>Track</code> with two columns in the database is as follows:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import sqlite3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">conn = sqlite3.connect(&#x27;music.sqlite&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cur = conn.cursor()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cur.execute(&#x27;DROP TABLE IF EXISTS Track&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cur.execute(&#x27;CREATE TABLE Track (title TEXT, plays INTEGER)&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">conn.close()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Code: https://www.py4e.com/code3/db1.py</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>connect</code> operation makes a “connection” to the
database stored in the file <code>music.sqlite</code> in the current
directory. If the file does not exist, it will be created. The reason
this is called a “connection” is that sometimes the database is stored
on a separate “database server” from the server on which we are running
our application. In our simple examples the database will just be a
local file in the same directory as the Python code we are running.</p><p>A <em>cursor</em> is like a file handle that we can use to perform
operations on the data stored in the database. Calling
<code>cursor()</code> is very similar conceptually to calling
<code>open()</code> when dealing with text files.</p><p><img loading="lazy" alt="A Database Cursor" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bD0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB2aWV3Qm94PSIxNiAxNiA0MTggMTg0IiB3aWR0aD0iNDE4cHQiIGhlaWdodD0iMTg0cHQiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyI+PG1ldGFkYXRhPiBQcm9kdWNlZCBieSBPbW5pR3JhZmZsZSA2LjQuMSA8ZGM6ZGF0ZT4yMDE2LTAxLTE2IDIwOjU5OjAzICswMDAwPC9kYzpkYXRlPjwvbWV0YWRhdGE+PGRlZnM+PGZpbHRlciBpZD0iU2hhZG93IiBmaWx0ZXJVbml0cz0idXNlclNwYWNlT25Vc2UiPjxmZUdhdXNzaWFuQmx1ciBpbj0iU291cmNlQWxwaGEiIHJlc3VsdD0iYmx1ciIgc3RkRGV2aWF0aW9uPSIxLjMwOCIvPjxmZU9mZnNldCBpbj0iYmx1ciIgcmVzdWx0PSJvZmZzZXQiIGR4PSIwIiBkeT0iMiIvPjxmZUZsb29kIGZsb29kLWNvbG9yPSJibGFjayIgZmxvb2Qtb3BhY2l0eT0iLjUiIHJlc3VsdD0iZmxvb2QiLz48ZmVDb21wb3NpdGUgaW49ImZsb29kIiBpbjI9Im9mZnNldCIgb3BlcmF0b3I9ImluIi8+PC9maWx0ZXI+PGZvbnQtZmFjZSBmb250LWZhbWlseT0iSGVsdmV0aWNhIE5ldWUiIGZvbnQtc2l6ZT0iMTYiIHBhbm9zZS0xPSIyIDAgNSAzIDAgMCAwIDIgMCA0IiB1bml0cy1wZXItZW09IjEwMDAiIHVuZGVybGluZS1wb3NpdGlvbj0iLTEwMCIgdW5kZXJsaW5lLXRoaWNrbmVzcz0iNTAiIHNsb3BlPSIwIiB4LWhlaWdodD0iNTE3IiBjYXAtaGVpZ2h0PSI3MTQiIGFzY2VudD0iOTUxLjk5NTg1IiBkZXNjZW50PSItMjEyLjk5NzQ0IiBmb250LXdlaWdodD0iNTAwIj48Zm9udC1mYWNlLXNyYz48Zm9udC1mYWNlLW5hbWUgbmFtZT0iSGVsdmV0aWNhTmV1ZSIvPjwvZm9udC1mYWNlLXNyYz48L2ZvbnQtZmFjZT48Zm9udC1mYWNlIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EgTmV1ZSIgZm9udC1zaXplPSIxNCIgcGFub3NlLTE9IjIgMCA1IDMgMCAwIDAgMiAwIDQiIHVuaXRzLXBlci1lbT0iMTAwMCIgdW5kZXJsaW5lLXBvc2l0aW9uPSItMTAwIiB1bmRlcmxpbmUtdGhpY2tuZXNzPSI1MCIgc2xvcGU9IjAiIHgtaGVpZ2h0PSI1MTciIGNhcC1oZWlnaHQ9IjcxNCIgYXNjZW50PSI5NTEuOTk1ODUiIGRlc2NlbnQ9Ii0yMTIuOTk3NDQiIGZvbnQtd2VpZ2h0PSI1MDAiPjxmb250LWZhY2Utc3JjPjxmb250LWZhY2UtbmFtZSBuYW1lPSJIZWx2ZXRpY2FOZXVlIi8+PC9mb250LWZhY2Utc3JjPjwvZm9udC1mYWNlPjxtYXJrZXIgb3JpZW50PSJhdXRvIiBvdmVyZmxvdz0idmlzaWJsZSIgbWFya2VyVW5pdHM9InN0cm9rZVdpZHRoIiBpZD0iRmlsbGVkQXJyb3dfTWFya2VyIiB2aWV3Qm94PSItMSAtMyA3IDYiIG1hcmtlcldpZHRoPSI3IiBtYXJrZXJIZWlnaHQ9IjYiIGNvbG9yPSJibGFjayI+PGc+PHBhdGggZD0iTSA0LjggMCBMIDAgLTEuOCBMIDAgMS44IFoiIGZpbGw9ImN1cnJlbnRDb2xvciIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMSIvPjwvZz48L21hcmtlcj48bWFya2VyIG9yaWVudD0iYXV0byIgb3ZlcmZsb3c9InZpc2libGUiIG1hcmtlclVuaXRzPSJzdHJva2VXaWR0aCIgaWQ9IkZpbGxlZEFycm93X01hcmtlcl8yIiB2aWV3Qm94PSItNiAtMyA3IDYiIG1hcmtlcldpZHRoPSI3IiBtYXJrZXJIZWlnaHQ9IjYiIGNvbG9yPSJibGFjayI+PGc+PHBhdGggZD0iTSAtNC44IDAgTCAwIDEuOCBMIDAgLTEuOCBaIiBmaWxsPSJjdXJyZW50Q29sb3IiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjEiLz48L2c+PC9tYXJrZXI+PGZvbnQtZmFjZSBmb250LWZhbWlseT0iSGVsdmV0aWNhIiBmb250LXNpemU9IjEyIiB1bml0cy1wZXItZW09IjEwMDAiIHVuZGVybGluZS1wb3NpdGlvbj0iLTc1LjY4MzU5NCIgdW5kZXJsaW5lLXRoaWNrbmVzcz0iNDkuMzE2NDA2IiBzbG9wZT0iMCIgeC1oZWlnaHQ9IjUyMi45NDkyMiIgY2FwLWhlaWdodD0iNzE3LjI4NTE2IiBhc2NlbnQ9Ijc3MC4wMTk1MyIgZGVzY2VudD0iLTIyOS45ODA0NyIgZm9udC13ZWlnaHQ9IjUwMCI+PGZvbnQtZmFjZS1zcmM+PGZvbnQtZmFjZS1uYW1lIG5hbWU9IkhlbHZldGljYSIvPjwvZm9udC1mYWNlLXNyYz48L2ZvbnQtZmFjZT48bWFya2VyIG9yaWVudD0iYXV0byIgb3ZlcmZsb3c9InZpc2libGUiIG1hcmtlclVuaXRzPSJzdHJva2VXaWR0aCIgaWQ9IkJhcl9NYXJrZXIiIHZpZXdCb3g9Ii0xIC01IDEyIDEwIiBtYXJrZXJXaWR0aD0iMTIiIG1hcmtlckhlaWdodD0iMTAiIGNvbG9yPSJibGFjayI+PGc+PHBhdGggZD0iTSAxMCAwIEwgMCAwIE0gMCA0IEwgMCAtNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMSIvPjwvZz48L21hcmtlcj48bWFya2VyIG9yaWVudD0iYXV0byIgb3ZlcmZsb3c9InZpc2libGUiIG1hcmtlclVuaXRzPSJzdHJva2VXaWR0aCIgaWQ9IkNyb3dzRmVldF9NYXJrZXIiIHZpZXdCb3g9Ii0xIC01IDEyIDEwIiBtYXJrZXJXaWR0aD0iMTIiIG1hcmtlckhlaWdodD0iMTAiIGNvbG9yPSJibGFjayI+PGc+PHBhdGggZD0iTSAwIDAgTCAxMCAwIE0gMCAtNCBMIDEwIDAgTCAwIDQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjEiLz48L2c+PC9tYXJrZXI+PC9kZWZzPjxnIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLW9wYWNpdHk9IjEiIHN0cm9rZS1kYXNoYXJyYXk9Im5vbmUiIGZpbGw9Im5vbmUiIGZpbGwtb3BhY2l0eT0iMSI+PHRpdGxlPkNhbnZhcyAxPC90aXRsZT48cmVjdCBmaWxsPSJ3aGl0ZSIgd2lkdGg9IjU0NSIgaGVpZ2h0PSIyOTUiLz48Zz48dGl0bGU+TGF5ZXIgMTwvdGl0bGU+PGc+PHhsOnVzZSB4bDpocmVmPSIjaWQxMF9HcmFwaGljIiBmaWx0ZXI9InVybCgjU2hhZG93KSIvPjx4bDp1c2UgeGw6aHJlZj0iI2lkMTNfR3JhcGhpYyIgZmlsdGVyPSJ1cmwoI1NoYWRvdykiLz48eGw6dXNlIHhsOmhyZWY9IiNpZDQ1X0dyYXBoaWMiIGZpbHRlcj0idXJsKCNTaGFkb3cpIi8+PC9nPjxyZWN0IHg9IjE4IiB5PSIxOCIgd2lkdGg9IjEzNSIgaGVpZ2h0PSIxODAiIGZpbGw9IndoaXRlIi8+PHJlY3QgeD0iMTgiIHk9IjE4IiB3aWR0aD0iMTM1IiBoZWlnaHQ9IjE4MCIgc3Ryb2tlPSJibGFjayIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjEiLz48dGV4dCB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMyAxNTcuNSkiIGZpbGw9ImJsYWNrIj48dHNwYW4gZm9udC1mYW1pbHk9IkhlbHZldGljYSBOZXVlIiBmb250LXNpemU9IjE2IiBmb250LXdlaWdodD0iNTAwIiB4PSI0Ni41IiB5PSIxNSIgdGV4dExlbmd0aD0iMTAuMzY4Ij5ZPC90c3Bhbj48dHNwYW4gZm9udC1mYW1pbHk9IkhlbHZldGljYSBOZXVlIiBmb250LXNpemU9IjE2IiBmb250LXdlaWdodD0iNTAwIiB4PSI1NS4wOTIiIHk9IjE1IiB0ZXh0TGVuZ3RoPSIyMy40MDgiPm91cjwvdHNwYW4+PHRzcGFuIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EgTmV1ZSIgZm9udC1zaXplPSIxNiIgZm9udC13ZWlnaHQ9IjUwMCIgeD0iMzEuODI4IiB5PSIzMyIgdGV4dExlbmd0aD0iMTUuNjk2Ij5QcjwvdHNwYW4+PHRzcGFuIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EgTmV1ZSIgZm9udC1zaXplPSIxNiIgZm9udC13ZWlnaHQ9IjUwMCIgeD0iNDcuMjM2IiB5PSIzMyIgdGV4dExlbmd0aD0iNDUuOTM2Ij5vZ3JhbTwvdHNwYW4+PC90ZXh0PjxyZWN0IHg9IjEzNSIgeT0iMjciIHdpZHRoPSIyNyIgaGVpZ2h0PSIxMDgiIGZpbGw9IiMwMGJmYzAiLz48cmVjdCB4PSIxMzUiIHk9IjI3IiB3aWR0aD0iMjciIGhlaWdodD0iMTA4IiBzdHJva2U9ImJsYWNrIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMSIvPjx0ZXh0IHRyYW5zZm9ybT0idHJhbnNsYXRlKDE0MCAzMykiIGZpbGw9ImJsYWNrIj48dHNwYW4gZm9udC1mYW1pbHk9IkhlbHZldGljYSBOZXVlIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iNTAwIiB4PSIzLjQ0NiIgeT0iMTMiIHRleHRMZW5ndGg9IjEwLjEwOCI+QzwvdHNwYW4+PHRzcGFuIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EgTmV1ZSIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9IjUwMCIgeD0iMy40NDYiIHk9IjI5IiB0ZXh0TGVuZ3RoPSIxMC4xMDgiPlU8L3RzcGFuPjx0c3BhbiBmb250LWZhbWlseT0iSGVsdmV0aWNhIE5ldWUiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSI1MDAiIHg9IjMuNzA1IiB5PSI0NSIgdGV4dExlbmd0aD0iOS41OSI+UjwvdHNwYW4+PHRzcGFuIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EgTmV1ZSIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9IjUwMCIgeD0iMy45NjQiIHk9IjYxIiB0ZXh0TGVuZ3RoPSI5LjA3MiI+UzwvdHNwYW4+PHRzcGFuIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EgTmV1ZSIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9IjUwMCIgeD0iMy4xOCIgeT0iNzciIHRleHRMZW5ndGg9IjEwLjY0Ij5PPC90c3Bhbj48dHNwYW4gZm9udC1mYW1pbHk9IkhlbHZldGljYSBOZXVlIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iNTAwIiB4PSIzLjcwNSIgeT0iOTMiIHRleHRMZW5ndGg9IjkuNTkiPlI8L3RzcGFuPjwvdGV4dD48cmVjdCB4PSI1NCIgeT0iMjciIHdpZHRoPSI4MSIgaGVpZ2h0PSIyNyIgZmlsbD0id2hpdGUiLz48cmVjdCB4PSI1NCIgeT0iMjciIHdpZHRoPSI4MSIgaGVpZ2h0PSIyNyIgc3Ryb2tlPSJibGFjayIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjEiLz48dGV4dCB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1OSAzMS41KSIgZmlsbD0iYmxhY2siPjx0c3BhbiBmb250LWZhbWlseT0iSGVsdmV0aWNhIE5ldWUiIGZvbnQtc2l6ZT0iMTYiIGZvbnQtd2VpZ2h0PSI1MDAiIHg9IjcuMjA0IiB5PSIxNSIgdGV4dExlbmd0aD0iNTYuNTkyIj5leGVjdXRlPC90c3Bhbj48L3RleHQ+PHJlY3QgeD0iNTQiIHk9IjU0IiB3aWR0aD0iODEiIGhlaWdodD0iMjciIGZpbGw9IndoaXRlIi8+PHJlY3QgeD0iNTQiIHk9IjU0IiB3aWR0aD0iODEiIGhlaWdodD0iMjciIHN0cm9rZT0iYmxhY2siIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIxIi8+PHRleHQgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNTkgNTguNSkiIGZpbGw9ImJsYWNrIj48dHNwYW4gZm9udC1mYW1pbHk9IkhlbHZldGljYSBOZXVlIiBmb250LXNpemU9IjE2IiBmb250LXdlaWdodD0iNTAwIiB4PSI0LjIzNiIgeT0iMTUiIHRleHRMZW5ndGg9IjYyLjUyOCI+ZmV0Y2hvbmU8L3RzcGFuPjwvdGV4dD48cmVjdCB4PSI1NCIgeT0iODEiIHdpZHRoPSI4MSIgaGVpZ2h0PSIyNyIgZmlsbD0id2hpdGUiLz48cmVjdCB4PSI1NCIgeT0iODEiIHdpZHRoPSI4MSIgaGVpZ2h0PSIyNyIgc3Ryb2tlPSJibGFjayIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjEiLz48dGV4dCB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1OSA4NS41KSIgZmlsbD0iYmxhY2siPjx0c3BhbiBmb250LWZhbWlseT0iSGVsdmV0aWNhIE5ldWUiIGZvbnQtc2l6ZT0iMTYiIGZvbnQtd2VpZ2h0PSI1MDAiIHg9IjkuNzI0IiB5PSIxNSIgdGV4dExlbmd0aD0iNTEuNTUyIj5mZXRjaGFsbDwvdHNwYW4+PC90ZXh0PjxyZWN0IHg9IjU0IiB5PSIxMDgiIHdpZHRoPSI4MSIgaGVpZ2h0PSIyNyIgZmlsbD0id2hpdGUiLz48cmVjdCB4PSI1NCIgeT0iMTA4IiB3aWR0aD0iODEiIGhlaWdodD0iMjciIHN0cm9rZT0iYmxhY2siIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIxIi8+PHRleHQgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNTkgMTEyLjUpIiBmaWxsPSJibGFjayI+PHRzcGFuIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EgTmV1ZSIgZm9udC1zaXplPSIxNiIgZm9udC13ZWlnaHQ9IjUwMCIgeD0iMTYuNTQiIHk9IjE1IiB0ZXh0TGVuZ3RoPSIzNy45MiI+Y2xvc2U8L3RzcGFuPjwvdGV4dD48ZyBpZD0iaWQxMF9HcmFwaGljIj48cGF0aCBkPSJNIDIwNyAxMzEuNCBMIDIwNyAzMC42IEMgMjA3IDIzLjY0NDggMjU3LjQgMTggMzE5LjUgMTggQyAzODEuNiAxOCA0MzIgMjMuNjQ0OCA0MzIgMzAuNiBMIDQzMiAxMzEuNCBDIDQzMiAxMzguMzU1MiAzODEuNiAxNDQgMzE5LjUgMTQ0IEMgMjU3LjQgMTQ0IDIwNyAxMzguMzU1MiAyMDcgMTMxLjQiIGZpbGw9IndoaXRlIi8+PHBhdGggZD0iTSAyMDcgMTMxLjQgTCAyMDcgMzAuNiBDIDIwNyAyMy42NDQ4IDI1Ny40IDE4IDMxOS41IDE4IEMgMzgxLjYgMTggNDMyIDIzLjY0NDggNDMyIDMwLjYgTCA0MzIgMTMxLjQgQyA0MzIgMTM4LjM1NTIgMzgxLjYgMTQ0IDMxOS41IDE0NCBDIDI1Ny40IDE0NCAyMDcgMTM4LjM1NTIgMjA3IDEzMS40IE0gMjA3IDMwLjYgQyAyMDcgMzcuNTU1MiAyNTcuNCA0My4yIDMxOS41IDQzLjIgQyAzODEuNiA0My4yIDQzMiAzNy41NTUyIDQzMiAzMC42IiBzdHJva2U9ImJsYWNrIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMSIvPjwvZz48cGF0aCBkPSJNIDE3NC45IDgxIEwgMTc3Ljc1IDgxIEwgMTkxLjEgODEgTCAxOTQuMSA4MSIgbWFya2VyLWVuZD0idXJsKCNGaWxsZWRBcnJvd19NYXJrZXIpIiBtYXJrZXItc3RhcnQ9InVybCgjRmlsbGVkQXJyb3dfTWFya2VyXzIpIiBzdHJva2U9ImJsYWNrIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMiIvPjxyZWN0IHg9IjIxNiIgeT0iNTQiIHdpZHRoPSI2MyIgaGVpZ2h0PSIyNyIgZmlsbD0id2hpdGUiLz48cmVjdCB4PSIyMTYiIHk9IjU0IiB3aWR0aD0iNjMiIGhlaWdodD0iMjciIHN0cm9rZT0iYmxhY2siIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIxIi8+PHRleHQgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjIxIDYwLjUpIiBmaWxsPSJibGFjayI+PHRzcGFuIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EiIGZvbnQtc2l6ZT0iMTIiIGZvbnQtd2VpZ2h0PSI1MDAiIHg9IjEwLjgzMjAzMSIgeT0iMTEiIHRleHRMZW5ndGg9IjMxLjMzNTkzOCI+VXNlcnM8L3RzcGFuPjwvdGV4dD48ZyBpZD0iaWQxM19HcmFwaGljIj48cGF0aCBkPSJNIDM1Mi40NDk3MyAxMTIuNSBMIDM2NC40NDk3MyAxMTIuNSBMIDM5MS41IDExMi41IEwgMzkxLjUgOTMuNSBMIDM5MS41IDkxLjUiIG1hcmtlci1lbmQ9InVybCgjQmFyX01hcmtlcikiIG1hcmtlci1zdGFydD0idXJsKCNDcm93c0ZlZXRfTWFya2VyKSIgc3Ryb2tlPSJibGFjayIgc3Ryb2tlLWxpbmVjYXA9ImJ1dHQiIHN0cm9rZS1saW5lam9pbj0ibWl0ZXIiIHN0cm9rZS13aWR0aD0iMSIvPjwvZz48cmVjdCB4PSIyODgiIHk9Ijk5IiB3aWR0aD0iNjMuOTQ5NzMiIGhlaWdodD0iMjciIGZpbGw9IndoaXRlIi8+PHJlY3QgeD0iMjg4IiB5PSI5OSIgd2lkdGg9IjYzLjk0OTczIiBoZWlnaHQ9IjI3IiBzdHJva2U9ImJsYWNrIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMSIvPjx0ZXh0IHRyYW5zZm9ybT0idHJhbnNsYXRlKDI5MyAxMDUuNSkiIGZpbGw9ImJsYWNrIj48dHNwYW4gZm9udC1mYW1pbHk9IkhlbHZldGljYSIgZm9udC1zaXplPSIxMiIgZm9udC13ZWlnaHQ9IjUwMCIgeD0iMS45Njk5ODIiIHk9IjExIiB0ZXh0TGVuZ3RoPSI1MC4wMDk3NjYiPk1lbWJlcnM8L3RzcGFuPjwvdGV4dD48cmVjdCB4PSIzNjAiIHk9IjU0IiB3aWR0aD0iNjMiIGhlaWdodD0iMjciIGZpbGw9IndoaXRlIi8+PHJlY3QgeD0iMzYwIiB5PSI1NCIgd2lkdGg9IjYzIiBoZWlnaHQ9IjI3IiBzdHJva2U9ImJsYWNrIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMSIvPjx0ZXh0IHRyYW5zZm9ybT0idHJhbnNsYXRlKDM2NSA2MC41KSIgZmlsbD0iYmxhY2siPjx0c3BhbiBmb250LWZhbWlseT0iSGVsdmV0aWNhIiBmb250LXNpemU9IjEyIiBmb250LXdlaWdodD0iNTAwIiB4PSI0LjE1ODIwMzEiIHk9IjExIiB0ZXh0TGVuZ3RoPSI0NC42ODM1OTQiPkNvdXJzZXM8L3RzcGFuPjwvdGV4dD48ZyBpZD0iaWQ0NV9HcmFwaGljIj48cGF0aCBkPSJNIDI4Ny41IDExMi41IEwgMjc1LjUgMTEyLjUgTCAyNDcuNSAxMTIuNSBMIDI0Ny41IDkzLjUgTCAyNDcuNSA5MS41IiBtYXJrZXItZW5kPSJ1cmwoI0Jhcl9NYXJrZXIpIiBtYXJrZXItc3RhcnQ9InVybCgjQ3Jvd3NGZWV0X01hcmtlcikiIHN0cm9rZT0iYmxhY2siIHN0cm9rZS1saW5lY2FwPSJidXR0IiBzdHJva2UtbGluZWpvaW49Im1pdGVyIiBzdHJva2Utd2lkdGg9IjEiLz48L2c+PC9nPjwvZz48L3N2Zz4K" width="557" height="245" class="img_ev3q">
A Database Cursor</p><p>Once we have the cursor, we can begin to execute commands on the
contents of the database using the <code>execute()</code> method.</p><p>Database commands are expressed in a special language that has been
standardized across many different database vendors to allow us to learn
a single database language. The database language is called
<em>Structured Query Language</em> or <em>SQL</em> for short.</p><p><a href="https://en.wikipedia.org/wiki/SQL" target="_blank" rel="noopener noreferrer">http://en.wikipedia.org/wiki/SQL</a></p><p>In our example, we are executing two SQL commands in our database. As
a convention, we will show the SQL keywords in uppercase and the parts
of the command that we are adding (such as the table and column names)
will be shown in lowercase.</p><p>The first SQL command removes the <code>Track</code> table from the
database if it exists. This pattern is simply to allow us to run the
same program to create the <code>Track</code> table over and over again
without causing an error. Note that the <code>DROP TABLE</code> command
deletes the table and all of its contents from the database (i.e., there
is no “undo”).</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cur.execute(&#x27;DROP TABLE IF EXISTS Track &#x27;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The second command creates a table named <code>Track</code> with a
text column named <code>title</code> and an integer column named
<code>plays</code>.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cur.execute(&#x27;CREATE TABLE Track (title TEXT, plays INTEGER)&#x27;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now that we have created a table named <code>Track</code>, we can put
some data into that table using the SQL <code>INSERT</code> operation.
Again, we begin by making a connection to the database and obtaining the
<code>cursor</code>. We can then execute SQL commands using the
cursor.</p><p>The SQL <code>INSERT</code> command indicates which table we are
using and then defines a new row by listing the fields we want to
include <code>(title, plays)</code> followed by the <code>VALUES</code>
we want placed in the new row. We specify the values as question marks
<code>(?, ?)</code> to indicate that the actual values are passed in as
a tuple <code>( &#x27;My Way&#x27;, 15 )</code> as the second parameter to the
<code>execute()</code> call.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import sqlite3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">conn = sqlite3.connect(&#x27;music.sqlite&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cur = conn.cursor()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cur.execute(&#x27;INSERT INTO Track (title, plays) VALUES (?, ?)&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (&#x27;Thunderstruck&#x27;, 20))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cur.execute(&#x27;INSERT INTO Track (title, plays) VALUES (?, ?)&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (&#x27;My Way&#x27;, 15))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">conn.commit()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(&#x27;Track:&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cur.execute(&#x27;SELECT title, plays FROM Track&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for row in cur:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     print(row)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cur.execute(&#x27;DELETE FROM Track WHERE plays &lt; 100&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">conn.commit()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cur.close()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Code: https://www.py4e.com/code3/db2.py</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>First we <code>INSERT</code> two rows into our table and use
<code>commit()</code> to force the data to be written to the database
file.</p><p><img loading="lazy" alt="Rows in a Table" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bD0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB2aWV3Qm94PSIxNiAxMiAxOTQgOTgiIHdpZHRoPSIxOTRwdCIgaGVpZ2h0PSI5OHB0IiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iPjxtZXRhZGF0YT4gUHJvZHVjZWQgYnkgT21uaUdyYWZmbGUgNi40LjEgPGRjOmRhdGU+MjAxNi0wMS0xNiAyMTowODo0NSArMDAwMDwvZGM6ZGF0ZT48L21ldGFkYXRhPjxkZWZzPjxsaW5lYXJHcmFkaWVudCB4MT0iMCIgeDI9IjEiIGlkPSJHcmFkaWVudCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0id2hpdGUiLz48c3RvcCBvZmZzZXQ9Ii4zOTc1NzY4IiBzdG9wLWNvbG9yPSIjZjlmOWY5Ii8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSJzaWx2ZXIiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iT2JqX0dyYWRpZW50IiB4bDpocmVmPSIjR3JhZGllbnQiIGdyYWRpZW50VHJhbnNmb3JtPSJ0cmFuc2xhdGUoNzYuNTkyNTYzIDQ2LjEyNSkgcm90YXRlKDkwKSBzY2FsZSgyMC42MjUpIi8+PGZvbnQtZmFjZSBmb250LWZhbWlseT0iSGVsdmV0aWNhIE5ldWUiIGZvbnQtc2l6ZT0iMTIiIHBhbm9zZS0xPSIyIDAgNSAzIDAgMCAwIDIgMCA0IiB1bml0cy1wZXItZW09IjEwMDAiIHVuZGVybGluZS1wb3NpdGlvbj0iLTEwMCIgdW5kZXJsaW5lLXRoaWNrbmVzcz0iNTAiIHNsb3BlPSIwIiB4LWhlaWdodD0iNTE3IiBjYXAtaGVpZ2h0PSI3MTQiIGFzY2VudD0iOTUxLjk5NTg1IiBkZXNjZW50PSItMjEyLjk5NzQ0IiBmb250LXdlaWdodD0iNTAwIj48Zm9udC1mYWNlLXNyYz48Zm9udC1mYWNlLW5hbWUgbmFtZT0iSGVsdmV0aWNhTmV1ZSIvPjwvZm9udC1mYWNlLXNyYz48L2ZvbnQtZmFjZT48bGluZWFyR3JhZGllbnQgaWQ9Ik9ial9HcmFkaWVudF8yIiB4bDpocmVmPSIjR3JhZGllbnQiIGdyYWRpZW50VHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTY5LjQwNTA2IDQ2LjEyNSkgcm90YXRlKDkwKSBzY2FsZSgyMC42MjUpIi8+PGZvbnQtZmFjZSBmb250LWZhbWlseT0iSGVsdmV0aWNhIE5ldWUiIGZvbnQtc2l6ZT0iMTYiIHBhbm9zZS0xPSIyIDAgNSAzIDAgMCAwIDIgMCA0IiB1bml0cy1wZXItZW09IjEwMDAiIHVuZGVybGluZS1wb3NpdGlvbj0iLTEwMCIgdW5kZXJsaW5lLXRoaWNrbmVzcz0iNTAiIHNsb3BlPSIwIiB4LWhlaWdodD0iNTE3IiBjYXAtaGVpZ2h0PSI3MTQiIGFzY2VudD0iOTUxLjk5NTg1IiBkZXNjZW50PSItMjEyLjk5NzQ0IiBmb250LXdlaWdodD0iNTAwIj48Zm9udC1mYWNlLXNyYz48Zm9udC1mYWNlLW5hbWUgbmFtZT0iSGVsdmV0aWNhTmV1ZSIvPjwvZm9udC1mYWNlLXNyYz48L2ZvbnQtZmFjZT48L2RlZnM+PGcgc3Ryb2tlPSJub25lIiBzdHJva2Utb3BhY2l0eT0iMSIgc3Ryb2tlLWRhc2hhcnJheT0ibm9uZSIgZmlsbD0ibm9uZSIgZmlsbC1vcGFjaXR5PSIxIj48dGl0bGU+Q2FudmFzIDE8L3RpdGxlPjxyZWN0IGZpbGw9IndoaXRlIiB3aWR0aD0iNTYyIiBoZWlnaHQ9IjM4OCIvPjxnPjx0aXRsZT5MYXllciAxPC90aXRsZT48cmVjdCB4PSIyMS4zNzUiIHk9IjQ2LjEyNSIgd2lkdGg9IjExMC40MzUxMjciIGhlaWdodD0iMjAuNjI1IiBmaWxsPSJ1cmwoI09ial9HcmFkaWVudCkiLz48cmVjdCB4PSIyMS4zNzUiIHk9IjQ2LjEyNSIgd2lkdGg9IjExMC40MzUxMjciIGhlaWdodD0iMjAuNjI1IiBzdHJva2U9IiM2ZjZmNmYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIuNTYyNSIvPjx0ZXh0IHRyYW5zZm9ybT0idHJhbnNsYXRlKDI2LjM3NSA0OS40Mzc1KSIgZmlsbD0iYmxhY2siPjx0c3BhbiBmb250LWZhbWlseT0iSGVsdmV0aWNhIE5ldWUiIGZvbnQtc2l6ZT0iMTIiIGZvbnQtd2VpZ2h0PSI1MDAiIHg9IjAiIHk9IjExIiB0ZXh0TGVuZ3RoPSIxOS4zMzIiPnRpdGxlPC90c3Bhbj48L3RleHQ+PHJlY3QgeD0iMTMxLjgxMDEzIiB5PSI0Ni4xMjUiIHdpZHRoPSI3NS4xODk4NzMiIGhlaWdodD0iMjAuNjI1IiBmaWxsPSJ1cmwoI09ial9HcmFkaWVudF8yKSIvPjxyZWN0IHg9IjEzMS44MTAxMyIgeT0iNDYuMTI1IiB3aWR0aD0iNzUuMTg5ODczIiBoZWlnaHQ9IjIwLjYyNSIgc3Ryb2tlPSIjNmY2ZjZmIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iLjU2MjUiLz48dGV4dCB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzYuODEwMTMgNDkuNDM3NSkiIGZpbGw9ImJsYWNrIj48dHNwYW4gZm9udC1mYW1pbHk9IkhlbHZldGljYSBOZXVlIiBmb250LXNpemU9IjEyIiBmb250LXdlaWdodD0iNTAwIiB4PSIwIiB5PSIxMSIgdGV4dExlbmd0aD0iMjguMjI0Ij5wbGF5czwvdHNwYW4+PC90ZXh0PjxyZWN0IHg9IjIxLjM3NSIgeT0iODcuMzc1IiB3aWR0aD0iMTEwLjQzNTEyNyIgaGVpZ2h0PSIyMC42MjUiIGZpbGw9IiNmMGYwZjAiLz48cmVjdCB4PSIyMS4zNzUiIHk9Ijg3LjM3NSIgd2lkdGg9IjExMC40MzUxMjciIGhlaWdodD0iMjAuNjI1IiBzdHJva2U9IiM2ZjZmNmYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIuNTYyNSIvPjx0ZXh0IHRyYW5zZm9ybT0idHJhbnNsYXRlKDI2LjM3NSA5MC42ODc1KSIgZmlsbD0iYmxhY2siPjx0c3BhbiBmb250LWZhbWlseT0iSGVsdmV0aWNhIE5ldWUiIGZvbnQtc2l6ZT0iMTIiIGZvbnQtd2VpZ2h0PSI1MDAiIHg9IjAiIHk9IjExIiB0ZXh0TGVuZ3RoPSIzMC45Ij5NeSBXPC90c3Bhbj48dHNwYW4gZm9udC1mYW1pbHk9IkhlbHZldGljYSBOZXVlIiBmb250LXNpemU9IjEyIiBmb250LXdlaWdodD0iNTAwIiB4PSIzMC40NTYiIHk9IjExIiB0ZXh0TGVuZ3RoPSIxMi40NDQiPmF5PC90c3Bhbj48L3RleHQ+PHJlY3QgeD0iMjEuMzc1IiB5PSI2Ni43NSIgd2lkdGg9IjExMC40MzUxMjciIGhlaWdodD0iMjAuNjI1IiBmaWxsPSJ3aGl0ZSIvPjxyZWN0IHg9IjIxLjM3NSIgeT0iNjYuNzUiIHdpZHRoPSIxMTAuNDM1MTI3IiBoZWlnaHQ9IjIwLjYyNSIgc3Ryb2tlPSIjNmY2ZjZmIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iLjU2MjUiLz48dGV4dCB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNi4zNzUgNzAuMDYyNSkiIGZpbGw9ImJsYWNrIj48dHNwYW4gZm9udC1mYW1pbHk9IkhlbHZldGljYSBOZXVlIiBmb250LXNpemU9IjEyIiBmb250LXdlaWdodD0iNTAwIiB4PSIwIiB5PSIxMSIgdGV4dExlbmd0aD0iNzcuNTgiPlRodW5kZXJzdHJ1Y2s8L3RzcGFuPjwvdGV4dD48cmVjdCB4PSIxMzEuODEwMTMiIHk9Ijg3LjM3NSIgd2lkdGg9Ijc1LjE4OTg3MyIgaGVpZ2h0PSIyMC42MjUiIGZpbGw9IiNmMGYwZjAiLz48cmVjdCB4PSIxMzEuODEwMTMiIHk9Ijg3LjM3NSIgd2lkdGg9Ijc1LjE4OTg3MyIgaGVpZ2h0PSIyMC42MjUiIHN0cm9rZT0iIzZmNmY2ZiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9Ii41NjI1Ii8+PHRleHQgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM2LjgxMDEzIDkwLjY4NzUpIiBmaWxsPSJibGFjayI+PHRzcGFuIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EgTmV1ZSIgZm9udC1zaXplPSIxMiIgZm9udC13ZWlnaHQ9IjUwMCIgeD0iMCIgeT0iMTEiIHRleHRMZW5ndGg9IjEzLjM0NCI+MTU8L3RzcGFuPjwvdGV4dD48cmVjdCB4PSIxMzEuODEwMTMiIHk9IjY2Ljc1IiB3aWR0aD0iNzUuMTg5ODczIiBoZWlnaHQ9IjIwLjYyNSIgZmlsbD0id2hpdGUiLz48cmVjdCB4PSIxMzEuODEwMTMiIHk9IjY2Ljc1IiB3aWR0aD0iNzUuMTg5ODczIiBoZWlnaHQ9IjIwLjYyNSIgc3Ryb2tlPSIjNmY2ZjZmIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iLjU2MjUiLz48dGV4dCB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzYuODEwMTMgNzAuMDYyNSkiIGZpbGw9ImJsYWNrIj48dHNwYW4gZm9udC1mYW1pbHk9IkhlbHZldGljYSBOZXVlIiBmb250LXNpemU9IjEyIiBmb250LXdlaWdodD0iNTAwIiB4PSIwIiB5PSIxMSIgdGV4dExlbmd0aD0iMTMuMzQ0Ij4yMDwvdHNwYW4+PC90ZXh0Pjx0ZXh0IHRyYW5zZm9ybT0idHJhbnNsYXRlKDIxLjU2MjUgMTgpIiBmaWxsPSJibGFjayI+PHRzcGFuIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EgTmV1ZSIgZm9udC1zaXplPSIxNiIgZm9udC13ZWlnaHQ9IjUwMCIgeD0iLjIzNiIgeT0iMTUiIHRleHRMZW5ndGg9IjkuMTg0Ij5UPC90c3Bhbj48dHNwYW4gZm9udC1mYW1pbHk9IkhlbHZldGljYSBOZXVlIiBmb250LXNpemU9IjE2IiBmb250LXdlaWdodD0iNTAwIiB4PSI3Ljk0OCIgeT0iMTUiIHRleHRMZW5ndGg9IjM4LjgxNiI+cmFja3M8L3RzcGFuPjwvdGV4dD48L2c+PC9nPjwvc3ZnPgo=" width="259" height="131" class="img_ev3q">
Rows in a Table</p><p>Then we use the <code>SELECT</code> command to retrieve the rows we
just inserted from the table. On the <code>SELECT</code> command, we
indicate which columns we would like <code>(title, plays)</code> and
indicate which table we want to retrieve the data from. After we execute
the <code>SELECT</code> statement, the cursor is something we can loop
through in a <code>for</code> statement. For efficiency, the cursor does
not read all of the data from the database when we execute the
<code>SELECT</code> statement. Instead, the data is read on demand as we
loop through the rows in the <code>for</code> statement.</p><p>The output of the program is as follows:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Track:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(&#x27;Thunderstruck&#x27;, 20)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(&#x27;My Way&#x27;, 15)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Our <code>for</code> loop finds two rows, and each row is a Python
tuple with the first value as the <code>title</code> and the second
value as the number of <code>plays</code>.</p><p>At the very end of the program, we execute an SQL command to
<code>DELETE</code> the rows we have just created so we can run the
program over and over. The <code>DELETE</code> command shows the use of
a <code>WHERE</code> clause that allows us to express a selection
criterion so that we can ask the database to apply the command to only
the rows that match the criterion. In this example the criterion happens
to apply to all the rows so we empty the table out so we can run the
program repeatedly. After the <code>DELETE</code> is performed, we also
call <code>commit()</code> to force the data to be removed from the
database.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="structured-query-language-summary">Structured Query Language summary<a href="#structured-query-language-summary" class="hash-link" aria-label="Direct link to Structured Query Language summary" title="Direct link to Structured Query Language summary">​</a></h2><p>So far, we have been using the Structured Query Language in our
Python examples and have covered many of the basics of the SQL commands.
In this section, we look at the SQL language in particular and give an
overview of SQL syntax.</p><p>Since there are so many different database vendors, the Structured
Query Language (SQL) was standardized so we could communicate in a
portable manner to database systems from multiple vendors.</p><p>A relational database is made up of tables, rows, and columns. The
columns generally have a type such as text, numeric, or date data. When
we create a table, we indicate the names and types of the columns:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">CREATE TABLE Track (title TEXT, plays INTEGER)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>To insert a row into a table, we use the SQL <code>INSERT</code>
command:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">INSERT INTO Track (title, plays) VALUES (&#x27;My Way&#x27;, 15)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>INSERT</code> statement specifies the table name, then a
list of the fields/columns that you would like to set in the new row,
and then the keyword <code>VALUES</code> and a list of corresponding
values for each of the fields.</p><p>The SQL <code>SELECT</code> command is used to retrieve rows and
columns from a database. The <code>SELECT</code> statement lets you
specify which columns you would like to retrieve as well as a
<code>WHERE</code> clause to select which rows you would like to see. It
also allows an optional <code>ORDER BY</code> clause to control the
sorting of the returned rows.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT * FROM Track WHERE title = &#x27;My Way&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Using <code>*</code> indicates that you want the database to return
all of the columns for each row that matches the <code>WHERE</code>
clause.</p><p>Note, unlike in Python, in a SQL <code>WHERE</code> clause we use a
single equal sign to indicate a test for equality rather than a double
equal sign. Other logical operations allowed in a <code>WHERE</code>
clause include <code>&lt;</code>, <code>&gt;</code>, <code>&lt;=</code>,
<code>&gt;=</code>, <code>!=</code>, as well as <code>AND</code> and
<code>OR</code> and parentheses to build your logical expressions.</p><p>You can request that the returned rows be sorted by one of the fields
as follows:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT title,plays FROM Track ORDER BY title</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>It is possible to <code>UPDATE</code> a column or columns within one
or more rows in a table using the SQL <code>UPDATE</code> statement as
follows:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">UPDATE Track SET plays = 16 WHERE title = &#x27;My Way&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>UPDATE</code> statement specifies a table and then a list
of fields and values to change after the <code>SET</code> keyword and
then an optional <code>WHERE</code> clause to select the rows that are
to be updated. A single <code>UPDATE</code> statement will change all of
the rows that match the <code>WHERE</code> clause. If a
<code>WHERE</code> clause is not specified, it performs the
<code>UPDATE</code> on all of the rows in the table.</p><p>To remove a row, you need a <code>WHERE</code> clause on an SQL
<code>DELETE</code> statement. The <code>WHERE</code> clause determines
which rows are to be deleted:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">DELETE FROM Track WHERE title = &#x27;My Way&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>These four basic SQL commands (INSERT, SELECT, UPDATE, and DELETE)
allow the four basic operations needed to create and maintain data. We
use “CRUD” (Create, Read, Update, and Delete) to capture all these
concepts in a single term. <a href="https://www.py4e.com/html3/15-database#fn2" target="_blank" rel="noopener noreferrer">2</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="multiple-tables-and-basic-data-modeling">Multiple tables and basic data modeling<a href="#multiple-tables-and-basic-data-modeling" class="hash-link" aria-label="Direct link to Multiple tables and basic data modeling" title="Direct link to Multiple tables and basic data modeling">​</a></h2><p>The real power of a relational database is when we create multiple
tables and make links between those tables. The act of deciding how to
break up your application data into multiple tables and establishing the
relationships between the tables is called <em>data modeling</em>. The
design document that shows the tables and their relationships is called
a <em>data model</em>.</p><p>Data modeling is a relatively sophisticated skill and we will only
introduce the most basic concepts of relational data modeling in this
section. For more detail on data modeling you can start with:</p><p><a href="https://en.wikipedia.org/wiki/Relational_model" target="_blank" rel="noopener noreferrer">http://en.wikipedia.org/wiki/Relational<!-- -->_<!-- -->model</a></p><p>Lets say for our tracks database we wanted to track the name of the
<code>artist</code> for each track in addition to the <code>title</code>
and number of plays for each track. A simple approach might be to simply
add another column to the database called <code>artist</code> and put
the name of the artist in the column as follows:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">DROP TABLE IF EXISTS Track;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CREATE TABLE Track (title TEXT, plays INTEGER, artist TEXT);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Then we could insert a few tracks into our table.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">INSERT INTO Track (title, plays, artist)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VALUES (&#x27;My Way&#x27;, 15, &#x27;Frank Sinatra&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">INSERT INTO Track (title, plays, artist)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VALUES (&#x27;New York&#x27;, 25, &#x27;Frank Sinatra&#x27;);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If we were to look at our data with a
<code>SELECT * FROM Track</code> statement, it looks like we have done a
fine job.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sqlite&gt; SELECT * FROM Track;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">My Way|15|Frank Sinatra</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">New York|25|Frank Sinatra</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sqlite&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We have made a <em>very bad error</em> in our data modeling. We have
violated the rules of <em>database normalization</em>.</p><p><a href="https://en.wikipedia.org/wiki/Database_normalization" target="_blank" rel="noopener noreferrer">https://en.wikipedia.org/wiki/Database<!-- -->_<!-- -->normalization</a></p><p>While database normalization seems very complex on the surface and
contains a lot of mathematical justifications, for now we can reduce it
all into one simple rule that we will follow.</p><p>We should never put the same string data in a column more than once.
If we need the data more than once, we create a numeric <em>key</em> for
the data and reference the actual data using this key. Especially if the
multiple entries refer to the same object.</p><p>To demonstrate the slippery slope we are going down by assigning
string columns to out database model, think about how we would change
the data model if we wanted to keep track of the eye color of our
artists? Would we do this?</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">DROP TABLE IF EXISTS Track;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CREATE TABLE Track (title TEXT, plays INTEGER,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    artist TEXT, eyes TEXT);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">INSERT INTO Track (title, plays, artist, eyes)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VALUES (&#x27;My Way&#x27;, 15, &#x27;Frank Sinatra&#x27;, &#x27;Blue&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">INSERT INTO Track (title, plays, artist, eyes)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VALUES (&#x27;New York&#x27;, 25, &#x27;Frank Sinatra&#x27;, &#x27;Blue&#x27;);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Since Frank Sinatra recorded over 1200 songs, are we really going to
put the string ‘Blue’ in 1200 rows in our <code>Track</code> table. And
what would happen if we decided his eye color was ‘Light Blue’?
Something just does not feel right.</p><p>The correct solution is to create a table for the each
<code>Artist</code> and store all the data about the artist in that
table. And then somehow we need to make a connection between a row in
the <code>Track</code> table to a row in the <code>Artist</code> table.
Perhaps we could call this “link” between two “tables” a “relationship”
between two tables. And that is exactly what database experts decided to
all these links.</p><p>Lets make an <code>Artist</code> table as follows:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">DROP TABLE IF EXISTS Artist;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CREATE TABLE Artist (name TEXT, eyes TEXT);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">INSERT INTO Artist (name, eyes)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   VALUES (&#x27;Frank Sinatra&#x27;, &#x27;blue&#x27;);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now we have two tables but we need a way to <em>link</em> rows in
the two tables. To do this, we need what we call ‘keys’. These keys will
just be integer numbers that we can use to lookup a row in different
table. If we are going to make links to rows inside of a table, we need
to add a <em>primary key</em> to the rows in the table. By convention we
usually name the primary key column ‘id’. So our <code>Artist</code>
table looks as follows:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">DROP TABLE IF EXISTS Artist;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CREATE TABLE Artist (id INTEGER, name TEXT, eyes TEXT);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">INSERT INTO Artist (id, name, eyes)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   VALUES (42, &#x27;Frank Sinatra&#x27;, &#x27;blue&#x27;);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now we have a row in the table for ‘Frank Sinatra’ (and his eye
color) and a primary key of ‘42’ to use to link our tracks to him. So we
alter our Track table as follows:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">DROP TABLE IF EXISTS Track;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CREATE TABLE Track (title TEXT, plays INTEGER,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    artist_id INTEGER);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">INSERT INTO Track (title, plays, artist_id)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VALUES (&#x27;My Way&#x27;, 15, 42);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">INSERT INTO Track (title, plays, artist_id)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VALUES (&#x27;New York&#x27;, 25, 42);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>artist_id</code> column is an integer, and by naming
convention is a <em>foreign key</em> pointing at a <em>primary</em> key
in the <code>Artist</code> table. We call it a foreign key because it is
pointing to a row in a different table.</p><p>Now we are following the rules of database normalization, but when
we want to get data out of our database, we don’t want to see the 42, we
want to see the name and eye color of the artist. To do this we use the
<code>JOIN</code> keyword in our SELECT statement.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT title, plays, name, eyes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM Track JOIN Artist</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ON Track.artist_id = Artist.id;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>JOIN</code> clause includes an <code>ON</code> condition
that defines how the rows are to to be connected. For each row in
<code>Track</code> add the data from <code>Artist</code> from the row
where <code>artist_id</code> <code>Track</code> table matches the
<code>id</code> from the <code>Artist</code> table.</p><p>The output would be:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">My Way|15|Frank Sinatra|blue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">New York|25|Frank Sinatra|blue</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>While it might seem a little clunky and your instincts might tell you
that it would be faster just to keep the data in one table, it turns out
the the limit on database performance is how much data needs to be
scanned when retrieving a query. While the details are very complex,
integers are a lot smaller than strings (especially Unicode) and far
quicker to to move and compare.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="data-model-diagrams">Data model diagrams<a href="#data-model-diagrams" class="hash-link" aria-label="Direct link to Data model diagrams" title="Direct link to Data model diagrams">​</a></h2><p>While our <code>Track</code> and <code>Artist</code> database design
is simple with just two tables and a single one-to-many relationship,
these data models can get complicated quickly and are easier to
understand if we can make a graphical representation of our data
model.</p><p><img loading="lazy" alt="A Verbose One-to-Many Data Modellabel{figvrbo2m}" src="/assets/images/one-to-many-verbose-dda10afb65f760bd6d108a4af4631682.png" width="641" height="161" class="img_ev3q">
A Verbose One-to-Many Data Model</p><p>While there are many graphical representations of data models, we
will use one of the “classic” approaches, called “Crow’s Foot Diagrams”
as shown in Figure . Each table is shown as a box with the name of the
table and its columns. Then where there is a relationship between two
tables a line is drawn connecting the tables with a notation added to
the end of each line indicating the nature of the relationship.</p><p><a href="https://en.wikipedia.org/wiki/Entity-relationship_model" target="_blank" rel="noopener noreferrer">https://en.wikipedia.org/wiki/Entity-relationship<!-- -->_<!-- -->model</a></p><p>In this case, “many” tracks can be associated with each artist. So
the track end is shown with the crow’s foot spread out indicating it is
the” “many” end. The artist end is shown with a vertical like that
indicates “one”. There will be “many” artists in general, but the
important aspect is that for each artist there will be many tracks. And
each of those artists may be associated with multiple tracks.</p><p>You will note that the column that holds the <em>foreign<!-- -->_<!-- -->key</em>
like <code>artist_id</code> is on the “many” end and the <em>primary</em>
<em>key</em> is at the “one” end.</p><p>Since the pattern of foreign and primary key placement is so
consistent and follows the “many” and “one” ends of the lines, we never
include either the primary or foreign key columns in our diagram of the
data model as shown in the second diagram as shown in Figure . The
columns are thought of as “implementation detail” to capture the nature
of the relationship details and not an essential part of the data being
modeled.</p><p><img loading="lazy" alt="A Succinct One-to-Many Data Modellabel{figo2m}" src="/assets/images/one-to-many-93cc3f3ca34eed5162a8f3b0ee659f94.png" width="627" height="111" class="img_ev3q">
A Succinct One-to-Many Data Model</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="automatically-creating-primary-keys">Automatically creating primary keys<a href="#automatically-creating-primary-keys" class="hash-link" aria-label="Direct link to Automatically creating primary keys" title="Direct link to Automatically creating primary keys">​</a></h2><p>In the above example, we arbitrarily assigned Frank the primary key
of 42. However when we are inserting millions or rows, it is nice to
have the database automatically generate the values for the id column.
We do this by declaring the <code>id</code> column as a
<code>PRIMARY KEY</code> and leave out the <code>id</code> value when
inserting the row:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">DROP TABLE IF EXISTS Artist;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CREATE TABLE Artist (id INTEGER PRIMARY KEY,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name TEXT, eyes TEXT);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">INSERT INTO Artist (name, eyes)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   VALUES (&#x27;Frank Sinatra&#x27;, &#x27;blue&#x27;);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now we have instructed the database to auto-assign us a unique value
to the Frank Sinatra row. But we then need a way to have the database
tell us the <code>id</code> value for the recently inserted row. One way
is to use a <code>SELECT</code> statement to retrieve data from an
SQLite built-in-fuction called <code>last_insert_rowid()</code>.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sqlite&gt; DROP TABLE IF EXISTS Artist;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sqlite&gt; CREATE TABLE Artist (id INTEGER PRIMARY KEY,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   ...&gt;     name TEXT, eyes TEXT);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sqlite&gt; INSERT INTO Artist (name, eyes)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   ...&gt;    VALUES (&#x27;Frank Sinatra&#x27;, &#x27;blue&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sqlite&gt; select last_insert_rowid();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sqlite&gt; SELECT * FROM Artist;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1|Frank Sinatra|blue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sqlite&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Once we know the <code>id</code> of our ‘Frank Sinatra’ row, we can
use it when we <code>INSERT</code> the tracks into the
<code>Track</code> table. As a general strategy, we add these
<code>id</code> columns to any table we create:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sqlite&gt; DROP TABLE IF EXISTS Track;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sqlite&gt; CREATE TABLE Track (id INTEGER PRIMARY KEY,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   ...&gt;     title TEXT, plays INTEGER, artist_id INTEGER);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Note that the <code>artist_id</code> value is the new auto-assigned
row in the <code>Artist</code> table and that while we added an
<code>INTEGER PRIMARY KEY</code> to the the <code>Track</code> table, we
did not include <code>id</code> in the list of fields on the
<code>INSERT</code> statements into the <code>Track</code> table. Again
this tells the database to choose a unique value for us for the
<code>id</code> column.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sqlite&gt; INSERT INTO Track (title, plays, artist_id)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   ...&gt;     VALUES (&#x27;My Way&#x27;, 15, 1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sqlite&gt; select last_insert_rowid();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sqlite&gt; INSERT INTO Track (title, plays, artist_id)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   ...&gt;     VALUES (&#x27;New York&#x27;, 25, 1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sqlite&gt; select last_insert_rowid();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sqlite&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can call <code>SELECT last_insert_rowid();</code> after each of
the inserts to retrieve the value that the database assigned to the
<code>id</code> of each newly created row. Later when we are coding in
Python, we can ask for the <code>id</code> value in our code and store
it in a variable for later use.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="logical-keys-for-fast-lookup">Logical keys for fast lookup<a href="#logical-keys-for-fast-lookup" class="hash-link" aria-label="Direct link to Logical keys for fast lookup" title="Direct link to Logical keys for fast lookup">​</a></h2><p>If we had a table full of artists and a table full of tracks, each
with a foreign key link to a row in a table full of artists and we
wanted to list all the tracks that were sung by ‘Frank Sinatra’ as
follows:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT title, plays, name, eyes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM Track JOIN Artist</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ON Track.artist_id = Artist.id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WHERE Artist.name = &#x27;Frank Sinatra&#x27;;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Since we have two tables and a foreign key between the two tables,
our data is well-modeled, but if we are going to have millions of
records in the <code>Artist</code> table and going to do a lot of
lookups by artist name, we would benefit if we gave the database a hint
about our intended use of the <code>name</code> column.</p><p>We do this by adding an “index” to a text column that we intend to
use in <code>WHERE</code> clauses:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">CREATE INDEX artist_name ON Artist(name);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>When the database has been told that an index is needed on a column
in a table, it stores extra information to make it possible to look up a
row more quickly using the indexed field ( <code>name</code> in this
example). Once you request that an index be created, there is nothing
special that is needed in the SQL to access the table. The database
keeps the index up to date as data is inserted, deleted, and updated,
and uses it automatically if it will increase the performance of a
database query.</p><p>These text columns that are used to find rows based on some
information in the “real world” like the name of an artist are called
<em>Logical keys</em>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="adding-constraints-to-the-data-database">Adding constraints to the data database<a href="#adding-constraints-to-the-data-database" class="hash-link" aria-label="Direct link to Adding constraints to the data database" title="Direct link to Adding constraints to the data database">​</a></h2><p>We can also use an index to enforce a constraint (i.e. rules) on our
database operations. The most common constraint is a <em>uniqueness</em>
<em>constraint</em> which insists that all of the values in a column are
unique. We can add the optional <code>UNIQUE</code> keyword, to the
<code>CREATE INDEX</code> statement to tell the database that we would
like it to enforce the constraint on our SQL. We can drop and re-create
the <code>artist_name</code> index with a <code>UNIQUE</code> constraint
as follows.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">DROP INDEX artist_name;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CREATE UNIQUE INDEX artist_name ON Artist(name);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If we try to insert ‘Frank Sinatra’ a second time, it will fail with
an error.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sqlite&gt; SELECT * FROM Artist;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1|Frank Sinatra|blue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sqlite&gt; INSERT INTO Artist (name, eyes)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   ...&gt;    VALUES (&#x27;Frank Sinatra&#x27;, &#x27;blue&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Runtime error: UNIQUE constraint failed: Artist.name (19)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sqlite&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We can tell the database to ignore any duplicate key errors by
adding the <code>IGNORE</code> keyword to the <code>INSERT</code>
statement as follows:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sqlite&gt; INSERT OR IGNORE INTO Artist (name, eyes)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   ...&gt;     VALUES (&#x27;Frank Sinatra&#x27;, &#x27;blue&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sqlite&gt; SELECT id FROM Artist WHERE name=&#x27;Frank Sinatra&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sqlite&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>By combining an <code>INSERT OR IGNORE</code> and a
<code>SELECT</code> we can insert a new record if the name is not
already there and whether or not the record is already there, retrieve
the <em>primary</em> key of the record.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sqlite&gt; INSERT OR IGNORE INTO Artist (name, eyes)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   ...&gt;      VALUES (&#x27;Elvis&#x27;, &#x27;blue&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sqlite&gt; SELECT id FROM Artist WHERE name=&#x27;Elvis&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sqlite&gt; SELECT * FROM Artist;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1|Frank Sinatra|blue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2|Elvis|blue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sqlite&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Since we have not added a uniqueness constraint to the eye color
column, there is no problem having multiple ‘Blue’ values in the
<code>eye</code> column.</p><p><img loading="lazy" alt="Tracks, Albums, and Artistslabel{figtaa}" src="/assets/images/tracks-albums-artists-0f56c4c92727951248c6a6eedf06908e.png" width="1019" height="241" class="img_ev3q">
Tracks, Albums, and Artists</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="sample-multi-table-application">Sample multi-table application<a href="#sample-multi-table-application" class="hash-link" aria-label="Direct link to Sample multi-table application" title="Direct link to Sample multi-table application">​</a></h2><p>A sample application called <code>tracks_csv.py</code> shows how
these ideas can be combined to parse textual data and load it into
several tables using a proper data model with relational connections
between the tables.</p><p>This application reads and parses a comma-separated file
<code>tracks.csv</code> based on an export from Dr. Chuck’s iTunes
library.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Another One Bites The Dust,Queen,Greatest Hits,55,100,217103</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Asche Zu Asche,Rammstein,Herzeleid,79,100,231810</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Beauty School Dropout,Various,Grease,48,100,239960</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Black Dog,Led Zeppelin,IV,109,100,296620</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The columns in this file are: title, artist, album, number of plays,
rating (0-100) and length in milliseconds.</p><p>Our data model is shown in Figure and described in SQL as
follows:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">DROP TABLE IF EXISTS Artist;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DROP TABLE IF EXISTS Album;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DROP TABLE IF EXISTS Track;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CREATE TABLE Artist (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    id INTEGER PRIMARY KEY,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name TEXT UNIQUE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CREATE TABLE Album (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    id INTEGER PRIMARY KEY,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    artist_id  INTEGER,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    title TEXT UNIQUE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CREATE TABLE Track (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    id INTEGER PRIMARY KEY,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    title TEXT UNIQUE,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    album_id INTEGER,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    len INTEGER, rating INTEGER, count INTEGER</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We are adding the <code>UNIQUE</code> keyword to <code>TEXT</code>
columns that we would like to have a uniqueness constraint that we will
use in <code>INSERT IGNORE</code> statements. This is more succinct that
separate <code>CREATE INDEX</code> statements but has the same
effect.</p><p>With these tables in place, we write the following code
<code>tracks_csv.py</code> to parse the data and insert it into the
tables:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import sqlite3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">conn = sqlite3.connect(&#x27;trackdb.sqlite&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cur = conn.cursor()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">handle = open(&#x27;tracks.csv&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for line in handle:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    line = line.strip();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pieces = line.split(&#x27;,&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if len(pieces) != 6 : continue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name = pieces[0]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    artist = pieces[1]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    album = pieces[2]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    count = pieces[3]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    rating = pieces[4]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    length = pieces[5]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(name, artist, album, count, rating, length)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cur.execute(&#x27;&#x27;&#x27;INSERT OR IGNORE INTO Artist (name)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        VALUES ( ? )&#x27;&#x27;&#x27;, ( artist, ) )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cur.execute(&#x27;SELECT id FROM Artist WHERE name = ? &#x27;, (artist, ))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    artist_id = cur.fetchone()[0]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cur.execute(&#x27;&#x27;&#x27;INSERT OR IGNORE INTO Album (title, artist_id)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        VALUES ( ?, ? )&#x27;&#x27;&#x27;, ( album, artist_id ) )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cur.execute(&#x27;SELECT id FROM Album WHERE title = ? &#x27;, (album, ))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    album_id = cur.fetchone()[0]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cur.execute(&#x27;&#x27;&#x27;INSERT OR REPLACE INTO Track</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        (title, album_id, len, rating, count)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        VALUES ( ?, ?, ?, ?, ? )&#x27;&#x27;&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ( name, album_id, length, rating, count ) )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    conn.commit()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can see that we are repeating the pattern of
<code>INSERT OR IGNORE</code> followed by a <code>SELECT</code> to get
the appropriate <code>artist_id</code> and <code>album_id</code> for use
in later <code>INSERT</code> statements. We start from
<code>Artist</code> because we need <code>artist_id</code> to insert the
<code>Album</code> and need the <code>album_id</code> to insert the
<code>Track</code>.</p><p>If we look at the <code>Album</code> table, we can see that the
entries were added and assigned a <em>primary</em> key as necessary as
the data was parsed. We can also see the <em>foreign key</em> pointing
to a row in the <code>Artist</code> table for each <code>Album</code>
row.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sqlite&gt; .mode column</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sqlite&gt; SELECT * FROM Album LIMIT 5;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">id  artist_id  title</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--  ---------  -----------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1   1          Greatest Hits</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2   2          Herzeleid</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3   3          Grease</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4   4          IV</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">5   5          The Wall [Disc 2]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We can reconstruct all of the <code>Track</code> data, following all
the relations using <code>JOIN / ON</code> clauses. You can see both
ends of each of the (2) relational connections in each row in the output
below:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sqlite&gt; .mode line</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sqlite&gt; SELECT * FROM Track</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   ...&gt; JOIN Album ON Track.album_id = Album.id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   ...&gt; JOIN Artist ON Album.artist_id = Artist.id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   ...&gt; LIMIT 2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       id = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    title = Another One Bites The Dust</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> album_id = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      len = 217103</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   rating = 100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    count = 55</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       id = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">artist_id = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    title = Greatest Hits</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       id = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     name = Queen</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       id = 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    title = Asche Zu Asche</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> album_id = 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      len = 231810</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   rating = 100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    count = 79</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       id = 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">artist_id = 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    title = Herzeleid</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       id = 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     name = Rammstein</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This example shows three tables and two <em>one-to-many</em>
relationships between the tables. It also shows how to use indexes and
uniqueness constraints to programmatically construct the tables and
their relationships.</p><p><a href="https://en.wikipedia.org/wiki/One-to-many_(data_model)" target="_blank" rel="noopener noreferrer">https://en.wikipedia.org/wiki/One-to-many<!-- -->_<!-- -->(data<!-- -->_<!-- -->model)</a></p><p>Up next we will look at the many-to-many relationships in data
models.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="many-to-many-relationships-in-databases">Many to many relationships in databases<a href="#many-to-many-relationships-in-databases" class="hash-link" aria-label="Direct link to Many to many relationships in databases" title="Direct link to Many to many relationships in databases">​</a></h2><p>Some data relationships cannot be modeled by a simple one-to-many
relationship. For example, lets say we are going to build a data model
for a course management system. There will be courses, users, and
rosters. A user can be on the roster for many courses and a course will
have many users on its roster.</p><p>It is pretty simple to <em>draw</em> a many-to-many relationship as
shown in Figure . We simply draw two tables and connect them with a line
that has the “many” indicator on both ends of the lines. The problem is
how to <em>implement</em> the relationship using primary keys and
foreign keys.</p><p>Before we explore how we implement many-to-many relationships, let’s
see if we could hack something up by extending a one-to many
relationship.</p><p><img loading="lazy" alt="A Many to Many Relationshiplabel{figm2m}" src="data:image/png;base64,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Yzlo0CDz0vh50XSrVq1cVlwdp59+unHR78cXcjusS8ADNwwe8ZWVNp4f3Y/rJEACJJAVgULaRP9Yfnvnp1EGseDwQejHcfP3hUPIiy++WB544AHBcBeUkzgp5px8Uwk/Ha03eq7R7Vhnux1HpXx5LbQX4fMQynocBPVDLC/8Q1y1alX5jsyaDQEMeWHWGRw4YuZFly5dBFGrixF4a0U3MpQieIYtxT0+xuQXLlxoXPnDb8i7775rhvHQTY3hwCSFrpjzZNnCCPAdLIxTPZXiPa/O3cRElZkzZxozA7gNQNgTzCxDzDZfYYEXb8yWQ3uNcCgwqm7Xrl11Tto7KtttD0YTk2nvIBWlJsLl7iSQNYG0FzbrY7G+2iDAe14b94Fn0bgE0t7Bz8d2GpcPr5wESIAESIAESIAEYglQUYrFwkwSIAESIAESIAESEKGixKeABEiABEiABEiABBIIUFFKAMNsEiABEiABEiABEqCixGeABEiABEiABEiABBIIUFFKAMNsEiABEiABEiABEqCixGeABEiABEiABEiABBIIUFFKAMNsEiABEiABEiABEqCixGeABEiABEiABEiABBIIUFFKAMNsEiABEiABEiABEqCixGeABEiABEiABEiABBIIUFFKAMNsEiABEiABEiABEqCixGeABEiABEiABEiABBIIUFFKAMNsEiABEiABEiABEqCixGeABEiABEiABEiABBIIrJ+QL6tXr5YhQ4YkbWY+CZBAmQgsW7asTDWz2lonwHa31u8Qz69eCaS1uzmKUsuWn3UyrV27ViZOnFivTHhdJFDzBFq0aFHz58gTzIYA291sOLIWEmgqgbh2N2forW/fvk09DvcnARLIgADfxQwgNpMqeK+byY3iadY9gbh3sUWgEr1ydEGtWbMmms11EiCBChFo1aqVtG/fXuK+bip0CjxMhQmw3a0wcB6OBCIEktrdWEUpsi9XSYAESIAESIAESKAhCeQMvTUkBV40CZAACZAACZAACcQQoKIUA4VZJEACJEACJEACJAACVJT4HJAACZAACZAACZBAAoH/A/8sTG6o1hbtAAAAAElFTkSuQmCC" width="586" height="113" class="img_ev3q">
A Many to Many Relationship</p><p>If SQL supported the notion of arrays, we might try to define
this:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">CREATE TABLE Course (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    id     INTEGER PRIMARY KEY,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    title  TEXT UNIQUE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    student_ids ARRAY OF INTEGER;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Sadly, while this is a tempting idea, SQL does not support arrays. <a href="https://www.py4e.com/html3/15-database#fn3" target="_blank" rel="noopener noreferrer">3</a></p><p>Or we could just make long string and concatenate all the
<code>User</code> primary keys into a long string separated by
commas.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">CREATE TABLE Course (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    id     INTEGER PRIMARY KEY,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    title  TEXT UNIQUE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    student_ids ARRAY OF INTEGER;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">INSERT INTO Course (title, student_ids)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">VALUES( &#x27;si311&#x27;, &#x27;1,3,4,5,6,9,14&#x27;);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This would be very inefficient because as the course roster grows in
size and the number of courses increases it becomes quite expensive to
figure out which courses have student 14 on their roster.</p><p><img loading="lazy" alt="A Many to Many Connector Tablelabel{figm2mvrb}" src="/assets/images/many-to-many-verbose-8cdbb4cceb86d71aa2e183e92d6716b7.png" width="955" height="144" class="img_ev3q">
A Many to Many Connector Table</p><p>Instead of either of these approaches, we model a many-to-many
relationship using an additional table that we call a “junction table”,
“through table”, “connector table”, or “join table” as shown in Figure .
The purpose of this table is to capture the <em>connection</em> between
<em>a</em> course and <em>a</em> student.</p><p>In a sense the table sits between the <code>Course</code> and
<code>User</code> table and has a one-to-many relationship to both
tables. By using an intermediate table we break a many-to-many
relationship into two one-to-many relationships. Databases are very good
at modeling and processing one-to-many relationships.</p><p>An example <code>Member</code> table would be as follows:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">CREATE TABLE User (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    id     INTEGER PRIMARY KEY,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name   TEXT UNIQUE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CREATE TABLE Course (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    id     INTEGER PRIMARY KEY,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    title  TEXT UNIQUE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CREATE TABLE Member (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    user_id     INTEGER,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    course_id   INTEGER,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PRIMARY KEY (user_id, course_id)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Following our naming convention, <code>Member.user_id</code> and
<code>Member.course_id</code> are foreign keys pointing at the
corresponding rows in the <code>User</code> and <code>Course</code>
tables. Each entry in the member table links a row in the
<code>User</code> table to a row in the <code>Course</code> table by
going <em>through</em> the <code>Member</code> table.</p><p>We indicate that the <em>combination</em> of <code>course_id</code>
and <code>user_id</code> is the <code>PRIMARY KEY</code> for the
<code>Member</code> table, also creating an uniqueness constraint for a
<code>course_id</code> / <code>user_id</code> combination.</p><p>Now lets say we need to insert a number of students into the rosters
of a number of courses. Lets assume the data comes to us in a
JSON-formatted file with records like this:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [ &quot;Charley&quot;, &quot;si110&quot;],\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [ &quot;Mea&quot;, &quot;si110&quot;],\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [ &quot;Hattie&quot;, &quot;si110&quot;],\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [ &quot;Keziah&quot;, &quot;si110&quot;],\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [ &quot;Rosa&quot;, &quot;si106&quot;],\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [ &quot;Mea&quot;, &quot;si106&quot;],\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [ &quot;Mairin&quot;, &quot;si106&quot;],\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [ &quot;Zendel&quot;, &quot;si106&quot;],\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [ &quot;Honie&quot;, &quot;si106&quot;],\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [ &quot;Rosa&quot;, &quot;si106&quot;],\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We could write code as follows to read the JSON file and insert the
members of each course roster into the database using the following
code:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import sqlite3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">conn = sqlite3.connect(&#x27;rosterdb.sqlite&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cur = conn.cursor()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">str_data = open(&#x27;roster_data_sample.json&#x27;).read()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">json_data = json.loads(str_data)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for entry in json_data:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name = entry[0]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    title = entry[1]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print((name, title))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cur.execute(&#x27;&#x27;&#x27;INSERT OR IGNORE INTO User (name)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        VALUES ( ? )&#x27;&#x27;&#x27;, ( name, ) )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cur.execute(&#x27;SELECT id FROM User WHERE name = ? &#x27;, (name, ))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    user_id = cur.fetchone()[0]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cur.execute(&#x27;&#x27;&#x27;INSERT OR IGNORE INTO Course (title)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        VALUES ( ? )&#x27;&#x27;&#x27;, ( title, ) )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cur.execute(&#x27;SELECT id FROM Course WHERE title = ? &#x27;, (title, ))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    course_id = cur.fetchone()[0]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cur.execute(&#x27;&#x27;&#x27;INSERT OR REPLACE INTO Member</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        (user_id, course_id) VALUES ( ?, ? )&#x27;&#x27;&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ( user_id, course_id ) )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    conn.commit()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Like in a previous example, we first make sure that we have an entry
in the <code>User</code> table and know the primary key of the entry as
well as an entry in the <code>Course</code> table and know its primary
key. We use the ‘INSERT OR IGNORE’ and ‘SELECT’ pattern so our code
works regardless of whether the record is in the table or not.</p><p>Our insert into the <code>Member</code> table is simply inserting the
two integers as a new or existing row depending on the constraint to
make sure we do not end up with duplicate entries in the
<code>Member</code> table for a particular <code>user_id</code> /
<code>course_id</code> combination.</p><p>To reconstruct our data across all three tables, we again use
<code>JOIN</code> / <code>ON</code> to construct a <code>SELECT</code>
query;</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sqlite&gt; SELECT * FROM Course</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   ...&gt; JOIN Member ON Course.id = Member.course_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   ...&gt; JOIN User ON Member.user_id = User.id;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+----+-------+---------+-----------+----+---------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| id | title | user_id | course_id | id |  name   |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+----+-------+---------+-----------+----+---------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 1  | si110 | 1       | 1         | 1  | Charley |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 1  | si110 | 2       | 1         | 2  | Mea     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 1  | si110 | 3       | 1         | 3  | Hattie  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 1  | si110 | 4       | 1         | 4  | Lyena   |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 1  | si110 | 5       | 1         | 5  | Keziah  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 1  | si110 | 6       | 1         | 6  | Ellyce  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 1  | si110 | 7       | 1         | 7  | Thalia  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 1  | si110 | 8       | 1         | 8  | Meabh   |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 2  | si106 | 2       | 2         | 2  | Mea     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 2  | si106 | 10      | 2         | 10 | Mairin  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 2  | si106 | 11      | 2         | 11 | Zendel  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 2  | si106 | 12      | 2         | 12 | Honie   |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| 2  | si106 | 9       | 2         | 9  | Rosa    |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+----+-------+---------+-----------+----+---------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sqlite&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can see the three tables from left to right -
<code>Course</code>, <code>Member</code>, and <code>User</code> and you
can see the connections between the primary keys and foreign keys in
each row of output.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="modeling-data-at-the-many-to-many-connection">Modeling data at the many-to-many connection<a href="#modeling-data-at-the-many-to-many-connection" class="hash-link" aria-label="Direct link to Modeling data at the many-to-many connection" title="Direct link to Modeling data at the many-to-many connection">​</a></h2><p>While we have presented the “join table” as having two foreign keys
making a connection between rows in two tables, this is the simplest
form of a join table. It is quite common to want to add some data to the
connection itself.</p><p>Continuing with our example of users, courses, and rosters to model a
simple learning management system, we will also need to understand the
<em>role</em> that each user is assigned in each course.</p><p>If we first try to solve this by adding an “instructor” flag to the
<code>User</code> table, we will find that this does not work because a
user can be a instructor in one course and a student in another course.
If we add an <code>instructor_id</code> to the <code>Course</code> table
it will not work because a course can have multiple instructors. And
there is no one-to-many hack that can deal with the fact that the number
of roles will expand into roles like Teaching Assistant or Parent.</p><p>But if we simply add a <code>role</code> column to the
<code>Member</code> table - we can represent a wide range of roles, role
combinations, etc.</p><p>Lets change our member table as follows:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">DROP TABLE Member;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CREATE TABLE Member (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    user_id     INTEGER,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    course_id   INTEGER,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    role        INTEGER,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PRIMARY KEY (user_id, course_id)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For simplicity, we will decide that zero in the role means “student”
and one in the <code>role</code> means instructor. Lets assume our JSON
data is augmented with the role as follows:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [ &quot;Charley&quot;, &quot;si110&quot;, 1],\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [ &quot;Mea&quot;, &quot;si110&quot;, 0],\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [ &quot;Hattie&quot;, &quot;si110&quot;, 0],\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [ &quot;Keziah&quot;, &quot;si110&quot;, 0],\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [ &quot;Rosa&quot;, &quot;si106&quot;, 0],\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [ &quot;Mea&quot;, &quot;si106&quot;, 1],\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [ &quot;Mairin&quot;, &quot;si106&quot;, 0],\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [ &quot;Zendel&quot;, &quot;si106&quot;, 0],\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [ &quot;Honie&quot;, &quot;si106&quot;, 0],\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [ &quot;Rosa&quot;, &quot;si106&quot;, 0],\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We could alter the <code>roster.py</code> program above to
incorporate role as follows:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">for entry in json_data:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name = entry[0]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    title = entry[1]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    role = entry[2]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cur.execute(&#x27;&#x27;&#x27;INSERT OR REPLACE INTO Member</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        (user_id, course_id, role) VALUES ( ?, ?, ? )&#x27;&#x27;&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ( user_id, course_id, role ) )</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In a real system, we would proably build a <code>Role</code> table
and make the <code>role</code> column in <code>Member</code> a foreign
key into the Role table as follows:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">DROP TABLE Member;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CREATE TABLE Member (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    user_id     INTEGER,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    course_id   INTEGER,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    role_id     INTEGER,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PRIMARY KEY (user_id, course_id, role_id)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CREATE TABLE Role (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    id          INTEGER PRIMARY KEY,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name        TEXT UNIQUE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">INSERT INTO Role (id, name) VALUES (0, &#x27;Student&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">INSERT INTO Role (id, name) VALUES (1, &#x27;Instructor&#x27;);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Notice that because we declared the <code>id</code> column in the
<code>Role</code> table as a <code>PRIMARY KEY</code>, we <em>could</em>
omit it in the <code>INSERT</code> statement. But we can also choose the
<code>id</code> value as long as the value is not already in the
<code>id</code> column and does not violate the implied
<code>UNIQUE</code> constaint on primary keys.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a href="#summary" class="hash-link" aria-label="Direct link to Summary" title="Direct link to Summary">​</a></h2><p>This chapter has covered a lot of ground to give you an overview of
the basics of using a database in Python. It is more complicated to
write the code to use a database to store data than Python dictionaries
or flat files so there is little reason to use a database unless your
application truly needs the capabilities of a database. The situations
where a database can be quite useful are: (1) when your application
needs to make many small random updates within a large data set, (2)
when your data is so large it cannot fit in a dictionary and you need to
look up information repeatedly, or (3) when you have a long-running
process that you want to be able to stop and restart and retain the data
from one run to the next.</p><p>You can build a simple database with a single table to suit many
application needs, but most problems will require several tables and
links/relationships between rows in different tables. When you start
making links between tables, it is important to do some thoughtful
design and follow the rules of database normalization to make the best
use of the database’s capabilities. Since the primary motivation for
using a database is that you have a large amount of data to deal with,
it is important to model your data efficiently so your programs run as
fast as possible.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="debugging">Debugging<a href="#debugging" class="hash-link" aria-label="Direct link to Debugging" title="Direct link to Debugging">​</a></h2><p>One common pattern when you are developing a Python program to
connect to an SQLite database will be to run a Python program and check
the results using the Database Browser for SQLite. The browser allows
you to quickly check to see if your program is working properly.</p><p>You must be careful because SQLite takes care to keep two programs
from changing the same data at the same time. For example, if you open a
database in the browser and make a change to the database and have not
yet pressed the “save” button in the browser, the browser “locks” the
database file and keeps any other program from accessing the file. In
particular, your Python program will not be able to access the file if
it is locked.</p><p>So a solution is to make sure to either close the database browser or
use the <em>File</em> menu to close the database in the browser before
you attempt to access the database from Python to avoid the problem of
your Python code failing because the database is locked.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="glossary">Glossary<a href="#glossary" class="hash-link" aria-label="Direct link to Glossary" title="Direct link to Glossary">​</a></h2><p>attribute
One of the values within a tuple. More commonly called a “column” or
“field”.
constraint
When we tell the database to enforce a rule on a field or a row in a
table. A common constraint is to insist that there can be no duplicate
values in a particular field (i.e., all the values must be unique).
cursor
A cursor allows you to execute SQL commands in a database and retrieve
data from the database. A cursor is similar to a socket or file handle
for network connections and files, respectively.
database browser
A piece of software that allows you to directly connect to a database
and manipulate the database directly without writing a program.
foreign key
A numeric key that points to the primary key of a row in another table.
Foreign keys establish relationships between rows stored in different
tables.
index
Additional data that the database software maintains as rows and inserts
into a table to make lookups very fast.
logical key
A key that the “outside world” uses to look up a particular row. For
example in a table of user accounts, a person’s email address might be a
good candidate as the logical key for the user’s data.
normalization
Designing a data model so that no data is replicated. We store each item
of data at one place in the database and reference it elsewhere using a
foreign key.
primary key
A numeric key assigned to each row that is used to refer to one row in a
table from another table. Often the database is configured to
automatically assign primary keys as rows are inserted.
relation
An area within a database that contains tuples and attributes. More
typically called a “table”.
tuple
A single entry in a database table that is a set of attributes. More
typically called “row”.</p><hr><ol><li><p>SQLite actually does allow some flexibility in the type
of data stored in a column, but we will keep our data types strict in
this chapter so the concepts apply equally to other database systems
such as MySQL. <a href="https://www.py4e.com/html3/15-database#fnref1" target="_blank" rel="noopener noreferrer">↩︎</a></p></li><li><p>Yes there is a disconnect between “CRUD” term and the
first letters of the four SQL statements that implement “CRUD”. A
possible explanation might be to claim that “CRUD” is the “concept” and
SQL is the implementation. Another possible explanation is that “CRUD”
is more fun to say than “ISUD”. <a href="https://www.py4e.com/html3/15-database#fnref2" target="_blank" rel="noopener noreferrer">↩︎</a></p></li><li><p>Some SQL dialects support arrays but arrays do not scale
well. NoSQL databases use arrays and data replication but at a cost of
database integrity. NoSQL is a story for another course
<a href="https://www.pg4e.com/" target="_blank" rel="noopener noreferrer">https://www.pg4e.com/</a> <a href="https://www.py4e.com/html3/15-database#fnref3" target="_blank" rel="noopener noreferrer">↩︎</a></p></li></ol><hr><p>If you find a mistake in this book, feel free to send me a fix using
<a href="https://github.com/csev/py4e/tree/master/book3" target="_blank" rel="noopener noreferrer">Github</a>.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/curriculum-resource/py4e/book/14"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">14-objects</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/curriculum-resource/py4e/book/16"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">16-visualizing-data</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#what-is-a-database" class="table-of-contents__link toc-highlight">What is a database?</a></li><li><a href="#database-concepts" class="table-of-contents__link toc-highlight">Database concepts</a></li><li><a href="#database-browser-for-sqlite" class="table-of-contents__link toc-highlight">Database Browser for SQLite</a></li><li><a href="#creating-a-database-table" class="table-of-contents__link toc-highlight">Creating a database table</a></li><li><a href="#structured-query-language-summary" class="table-of-contents__link toc-highlight">Structured Query Language summary</a></li><li><a href="#multiple-tables-and-basic-data-modeling" class="table-of-contents__link toc-highlight">Multiple tables and basic data modeling</a></li><li><a href="#data-model-diagrams" class="table-of-contents__link toc-highlight">Data model diagrams</a></li><li><a href="#automatically-creating-primary-keys" class="table-of-contents__link toc-highlight">Automatically creating primary keys</a></li><li><a href="#logical-keys-for-fast-lookup" class="table-of-contents__link toc-highlight">Logical keys for fast lookup</a></li><li><a href="#adding-constraints-to-the-data-database" class="table-of-contents__link toc-highlight">Adding constraints to the data database</a></li><li><a href="#sample-multi-table-application" class="table-of-contents__link toc-highlight">Sample multi-table application</a></li><li><a href="#many-to-many-relationships-in-databases" class="table-of-contents__link toc-highlight">Many to many relationships in databases</a></li><li><a href="#modeling-data-at-the-many-to-many-connection" class="table-of-contents__link toc-highlight">Modeling data at the many-to-many connection</a></li><li><a href="#summary" class="table-of-contents__link toc-highlight">Summary</a></li><li><a href="#debugging" class="table-of-contents__link toc-highlight">Debugging</a></li><li><a href="#glossary" class="table-of-contents__link toc-highlight">Glossary</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">CS学习社区</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">路线图</a></li></ul></div><div class="col footer__col"><div class="footer__title">社区</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/WqwvTrEQmA" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">捐赠</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/donate">捐赠我们</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyleft © 2025 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.1f1549d9.js"></script>
<script src="/assets/js/main.2f696ece.js"></script>
</body>
</html>