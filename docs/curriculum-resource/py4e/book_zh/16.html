<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-curriculum-resource/py4e/book_zh/16" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">16-visualizing-data | CS自学社区</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://www.learncs.site/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://www.learncs.site/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://www.learncs.site/docs/curriculum-resource/py4e/book_zh/16"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="baidu-site-verification" content="codeva-hJyfN2UKgo"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="16-visualizing-data | CS自学社区"><meta data-rh="true" name="description" content="到目前为止，我们一直在学习 Python 语言，然后学习如何使用 Python、网络和数据库来处理数据。"><meta data-rh="true" property="og:description" content="到目前为止，我们一直在学习 Python 语言，然后学习如何使用 Python、网络和数据库来处理数据。"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://www.learncs.site/docs/curriculum-resource/py4e/book_zh/16"><link data-rh="true" rel="alternate" href="https://www.learncs.site/docs/curriculum-resource/py4e/book_zh/16" hreflang="en"><link data-rh="true" rel="alternate" href="https://www.learncs.site/docs/curriculum-resource/py4e/book_zh/16" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="CS自学社区 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="CS自学社区 Atom Feed">




<link rel="stylesheet" href="/katex/katex.min.css"><link rel="stylesheet" href="/assets/css/styles.c4382977.css">
<link rel="preload" href="/assets/js/runtime~main.1f1549d9.js" as="script">
<link rel="preload" href="/assets/js/main.2f696ece.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#fafbfc;color:#091E42" role="banner"><div class="content_knG7 announcementBarContent_xLdY">🎉️🎉️🎉️课程文档汉化工作正在进行中 🎉️🎉️ 学习交流群请到 <a href="/community">社区页面</a> 查看入群方式 🎉️🎉️🎉️</div></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="TeachYourselfCS" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="TeachYourselfCS" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">TeachYourselfCS</b></a><a class="navbar__item navbar__link" href="/docs/roadmap">路线图</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">课程资源</a><a class="navbar__item navbar__link" href="/blog">博客</a><a class="navbar__item navbar__link" href="/community">社区</a><a class="navbar__item navbar__link" href="/donate">捐赠我们</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">前言</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/roadmap">路线图</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/课程资源">课程资源</a><button aria-label="Toggle the collapsible sidebar category &#x27;课程资源&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/cs50x">cs50x</a><button aria-label="Toggle the collapsible sidebar category &#x27;cs50x&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/cs61a">cs61a</a><button aria-label="Toggle the collapsible sidebar category &#x27;cs61a&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/cs61b">cs61b</a><button aria-label="Toggle the collapsible sidebar category &#x27;cs61b&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/cs61c">cs61c</a><button aria-label="Toggle the collapsible sidebar category &#x27;cs61c&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/18-01">MIT 18.01</a><button aria-label="Toggle the collapsible sidebar category &#x27;MIT 18.01&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/18-02">MIT 18.02</a><button aria-label="Toggle the collapsible sidebar category &#x27;MIT 18.02&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/18-06">MIT 18.06</a><button aria-label="Toggle the collapsible sidebar category &#x27;MIT 18.06&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/6-04j">MIT 6.042J</a><button aria-label="Toggle the collapsible sidebar category &#x27;MIT 6.042J&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/cs162">cs162</a><button aria-label="Toggle the collapsible sidebar category &#x27;cs162&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/cs144">cs144</a><button aria-label="Toggle the collapsible sidebar category &#x27;cs144&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/15-445">CMU 15-445</a><button aria-label="Toggle the collapsible sidebar category &#x27;CMU 15-445&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/curriculum-resource/py4e">py4e</a><button aria-label="Toggle the collapsible sidebar category &#x27;py4e&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/py4e/book/01">py4e book</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/curriculum-resource/py4e/book_zh/01">py4e book 中文翻译</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/curriculum-resource/py4e/book_zh/01">01-intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/curriculum-resource/py4e/book_zh/02">02-variables</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/curriculum-resource/py4e/book_zh/03">02-conditional</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/curriculum-resource/py4e/book_zh/04">04-functions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/curriculum-resource/py4e/book_zh/05">05-iterations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/curriculum-resource/py4e/book_zh/06">06-strings</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/curriculum-resource/py4e/book_zh/07">07-files</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/curriculum-resource/py4e/book_zh/08">08-list</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/curriculum-resource/py4e/book_zh/09">09-dictionaries</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/curriculum-resource/py4e/book_zh/10">10-tuples</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/curriculum-resource/py4e/book_zh/11">11-regex</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/curriculum-resource/py4e/book_zh/12">12-network</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/curriculum-resource/py4e/book_zh/13">13-web</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/curriculum-resource/py4e/book_zh/14">14-objects</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/curriculum-resource/py4e/book_zh/15">15-database</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/curriculum-resource/py4e/book_zh/16">16-visualizing-data</a></li></ul></li></ul></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/课程资源"><span itemprop="name">课程资源</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/curriculum-resource/py4e"><span itemprop="name">py4e</span></a><meta itemprop="position" content="2"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">py4e book 中文翻译</span><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">16-visualizing-data</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>可视化数据</h1><p>到目前为止，我们一直在学习 Python 语言，然后学习如何使用 Python、网络和数据库来处理数据。</p><p>在本章中，我们将看三个完整的应用程序，它们将所有这些内容结合起来管理和可视化数据。你可以将这些应用程序用作示例代码，以帮助你开始解决实际问题。</p><p>每个应用程序都是一个 ZIP 文件，你可以下载并解压缩到你的计算机上并执行。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="从地理编码数据构建-openstreetmap">从地理编码数据构建 OpenStreetMap<a href="#从地理编码数据构建-openstreetmap" class="hash-link" aria-label="Direct link to 从地理编码数据构建 OpenStreetMap" title="Direct link to 从地理编码数据构建 OpenStreetMap">​</a></h2><p>在这个项目中，我们使用 OpenStreetMap 地理编码 API 来清理一些用户输入的大学名称的地理位置，然后将数据放置在实际的 OpenStreetMap 上。</p><p><img loading="lazy" alt="一个 OpenStreetMap 地图" src="/assets/images/openstreet-map-bdb1cf047e38b81cce53165936d80a72.png" width="655" height="395" class="img_ev3q">一个 OpenStreetMap 地图</p><p>要开始，请从以下地址下载应用程序：</p><p><a href="https://www.py4e.com/code3/opengeo.zip" target="_blank" rel="noopener noreferrer">www.py4e.com/code3/opengeo.zip</a></p><p>首先要解决的问题是，这些地理编码 API 每天都有请求次数的速率限制。如果你有大量数据，你可能需要多次停止和重新启动查找过程。所以我们将问题分解为两个阶段。</p><p>在第一阶段，我们获取文件 <em><em>where.data</em></em> 中的输入“调查”数据，并逐行读取，从 Google 检索地理编码信息并将其存储在数据库 <em><em>geodata.sqlite</em></em> 中。在我们为每个用户输入的位置使用地理编码 API 之前，我们只需检查是否已经有该特定输入行的数据。数据库充当了我们地理编码数据的本地“缓存”，以确保我们永远不会两次向 Google 请求相同的数据。</p><p>你可以随时通过删除文件 <em><em>geodata.sqlite</em></em> 来重新启动该过程。</p><p>运行 <em><em>geoload.py</em></em> 程序。这个程序将读取 <em><em>where.data</em></em> 中的输入行，并对每一行检查它是否已在数据库中。如果我们没有该位置的数据，它将调用地理编码 API 来检索数据并将其存储在数据库中。</p><p>下面是在数据库中已有部分数据后的示例运行：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">在数据库中找到 AGH University of Science and Technology</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">在数据库中找到 Academy of Fine Arts Warsaw Poland</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">在数据库中找到 American University in Cairo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">在数据库中找到 Arizona State University</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">在数据库中找到 Athens Information Technology</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">正在检索 https://py4e-data.dr-chuck.net/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   opengeo?q=BITS+Pilani</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">检索到 794 个字符 {&quot;type&quot;:&quot;FeatureColl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">正在检索 https://py4e.com/data3/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   opengeo?q=Babcock+University</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">检索到 760 个字符 {&quot;type&quot;:&quot;FeatureColl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">正在检索 https://py4e.com/data3/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   opengeo?q=Banaras+Hindu+University</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">检索到 866 个字符 {&quot;type&quot;:&quot;FeatureColl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>前五个位置已经在数据库中，因此它们被跳过。程序扫描到找到新位置的点并开始检索它们。</p><p><em><em>geoload.py</em></em> 程序可以随时停止，并且有一个计数器，你可以用它来限制每次运行对地理编码 API 的调用次数。鉴于 <em><em>where.data</em></em> 只有几百个数据项，你应该不会遇到每日速率限制，但如果你有更多数据，可能需要几天内运行几次才能让你的数据库包含所有输入的地理编码数据。</p><p>一旦你将一些数据加载到 <em><em>geodata.sqlite</em></em> 中，你就可以使用 <em><em>geodump.py</em></em> 程序来可视化数据。这个程序读取数据库并将位置、纬度和经度以可执行 JavaScript 代码的形式写入文件 <em><em>where.js</em></em>。</p><p><em><em>geodump.py</em></em> 程序的一次运行如下：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">AGH University of Science and Technology, Czarnowiejska,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Czarna Wieś, Krowodrza, Kraków, Lesser Poland</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Voivodeship, 31-126, Poland 50.0657 19.91895</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Academy of Fine Arts, Krakowskie Przedmieście,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Northern Śródmieście, Śródmieście, Warsaw, Masovian</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Voivodeship, 00-046, Poland 52.239 21.0155</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">260 行已写入 where.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">在网络浏览器中打开 where.html 文件以查看数据。</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>文件 <em><em>where.html</em></em> 包含用于可视化 Google 地图的 HTML 和 JavaScript。它读取 <em><em>where.js</em></em> 中的最新数据以获取要可视化的数据。以下是 <em><em>where.js</em></em> 文件的格式：</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">myData </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">50.0657</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">19.91895</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;</span><span class="token constant" style="color:#36acaa">AGH</span><span class="token plain"> </span><span class="token maybe-class-name">University</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">of</span><span class="token plain"> </span><span class="token maybe-class-name">Science</span><span class="token plain"> and </span><span class="token maybe-class-name">Technology</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">Czarnowiejska</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token maybe-class-name">Czarna</span><span class="token plain"> </span><span class="token maybe-class-name">Wieś</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">Krowodrza</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">Kraków</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">Lesser</span><span class="token plain"> </span><span class="token maybe-class-name">Poland</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token maybe-class-name">Voivodeship</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">31</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">126</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">Poland</span><span class="token plain"> &#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">52.239</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">21.0155</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;</span><span class="token maybe-class-name">Academy</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">of</span><span class="token plain"> </span><span class="token maybe-class-name">Fine</span><span class="token plain"> </span><span class="token maybe-class-name">Arts</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">Krakowskie</span><span class="token plain"> </span><span class="token maybe-class-name">Przedmieściee</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Śródmieście </span><span class="token constant" style="color:#36acaa">P</span><span class="token plain">ółnocne</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Śródmieście</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">Warsaw</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token maybe-class-name">Masovian</span><span class="token plain"> </span><span class="token maybe-class-name">Voivodeship</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">00</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">046</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">Poland</span><span class="token plain">&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这是一个包含列表的列表的 JavaScript 变量。JavaScript 列表常量的语法与 Python 非常相似，所以你应该熟悉这个语法。</p><p>只需在浏览器中打开 <em><em>where.html</em></em> 即可查看位置。你可以将鼠标悬停在每个地图图钉上，以查找地理编码 API 为用户输入返回的位置。如果你在打开 <em><em>where.html</em></em> 文件时看不到任何数据，你可能需要检查浏览器的 JavaScript 或开发者控制台。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="可视化网络和互连">可视化网络和互连<a href="#可视化网络和互连" class="hash-link" aria-label="Direct link to 可视化网络和互连" title="Direct link to 可视化网络和互连">​</a></h2><p>在这个应用程序中，我们将执行搜索引擎的一些功能。我们将首先爬取网络的一个小子集，并运行简化版的 Google PageRank 算法来确定哪些页面连接最紧密，然后可视化我们这个小角落网络的页面排名和连接性。我们将使用 D3 JavaScript 可视化库 <a href="http://d3js.org/" target="_blank" rel="noopener noreferrer">http://d3js.org/</a> 来生成可视化输出。</p><p>你可以从以下地址下载并解压缩此应用程序：</p><p><a href="https://www.py4e.com/code3/pagerank.zip" target="_blank" rel="noopener noreferrer">www.py4e.com/code3/pagerank.zip</a></p><p><img loading="lazy" alt="一个 PageRank 可视化" src="/assets/images/pagerank-43a86eee6afdeb9e1dae77201da132dc.png" width="638" height="496" class="img_ev3q">
一个 PageRank 可视化</p><p>第一个程序 (<em><em>spider.py</em></em>) 爬取一个网站并将一系列页面拉入数据库 (<em><em>spider.sqlite</em></em>)，记录页面之间的链接。你可以随时通过删除 <em><em>spider.sqlite</em></em> 文件并重新运行 <em><em>spider.py</em></em> 来重新启动该过程。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">输入网址或回车：http://www.dr-chuck.com/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[&#x27;http://www.dr-chuck.com&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">多少页：2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 http://www.dr-chuck.com/ 12</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2 http://www.dr-chuck.com/csev-blog/ 57</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">多少页：</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在这个示例运行中，我们告诉它爬取一个网站并检索两个页面。如果你重新启动程序并告诉它爬取更多页面，它不会重新爬取任何已经在数据库中的页面。重新启动时，它会转到一个随机的未爬取页面并从那里开始。所以 <em><em>spider.py</em></em> 的每次后续运行都是累加的。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">输入网址或回车：http://www.dr-chuck.com/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[&#x27;http://www.dr-chuck.com&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">多少页：3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3 http://www.dr-chuck.com/csev-blog 57</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4 http://www.dr-chuck.com/dr-chuck/resume/speaking.htm 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">5 http://www.dr-chuck.com/dr-chuck/resume/index.htm 13</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">多少页：</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>你可以在同一个数据库中有多个起始点——在程序中，这些被称为“网络”(webs)。爬虫在所有网络中所有未访问的链接中随机选择下一个要爬取的页面。</p><p>如果你想转储 <em><em>spider.sqlite</em></em> 文件的内容，可以运行 <em><em>spdump.py</em></em>，如下所示：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(5, None, 1.0, 3, &#x27;http://www.dr-chuck.com/csev-blog&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(3, None, 1.0, 4, &#x27;http://www.dr-chuck.com/dr-chuck/resume/speaking.htm&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(1, None, 1.0, 2, &#x27;http://www.dr-chuck.com/csev-blog/&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(1, None, 1.0, 5, &#x27;http://www.dr-chuck.com/dr-chuck/resume/index.htm&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4 行。</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这显示了入链数、旧的 PageRank、新的 PageRank、页面 ID 和页面 URL。<em><em>spdump.py</em></em> 程序仅显示至少有一个入链指向它们的页面。</p><p>一旦数据库中有了一些页面，你就可以使用 <em><em>sprank.py</em></em> 程序在这些页面上运行 PageRank。你只需告诉它要运行多少次 PageRank 迭代。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">多少次迭代：2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 0.546848992536</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2 0.226714939664</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[(1, 0.559), (2, 0.659), (3, 0.985), (4, 2.135), (5, 0.659)]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>你可以再次转储数据库以查看 PageRank 已更新：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(5, 1.0, 0.985, 3, &#x27;http://www.dr-chuck.com/csev-blog&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(3, 1.0, 2.135, 4, &#x27;http://www.dr-chuck.com/dr-chuck/resume/speaking.htm&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(1, 1.0, 0.659, 2, &#x27;http://www.dr-chuck.com/csev-blog/&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(1, 1.0, 0.659, 5, &#x27;http://www.dr-chuck.com/dr-chuck/resume/index.htm&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4 行。</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>你可以随心所欲地运行 <em><em>sprank.py</em></em>，它每次运行时都会简单地优化 PageRank。你甚至可以运行几次 <em><em>sprank.py</em></em>，然后用 <em><em>spider.py</em></em> 爬取一些更多页面，然后再次运行 <em><em>sprank.py</em></em> 以重新收敛 PageRank 值。搜索引擎通常一直运行爬取和排名程序。</p><p>如果你想在不重新爬取网页的情况下重新启动 PageRank 计算，可以使用 <em><em>spreset.py</em></em>，然后重新启动 <em><em>sprank.py</em></em>。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">多少次迭代：50</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 0.546848992536</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2 0.226714939664</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3 0.0659516187242</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4 0.0244199333</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">5 0.0102096489546</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">6 0.00610244329379</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">42 0.000109076928206</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">43 9.91987599002e-05</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">44 9.02151706798e-05</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">45 8.20451504471e-05</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">46 7.46150183837e-05</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">47 6.7857770908e-05</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">48 6.17124694224e-05</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">49 5.61236959327e-05</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">50 5.10410499467e-05</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[(512, 0.0296), (1, 12.79), (2, 28.93), (3, 6.808), (4, 13.46)]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>对于 PageRank 算法的每次迭代，它都会打印每个页面的平均 PageRank 变化。网络最初非常不平衡，因此单个页面的 PageRank 值在迭代之间会剧烈变化。但在几次短暂的迭代中，PageRank 会收敛。你应该运行足够长时间的 <em><em>sprank.py</em></em>，直到 PageRank 值收敛。</p><p>如果你想可视化当前 PageRank 最高的页面，运行 <em><em>spjson.py</em></em> 读取数据库并将连接最紧密的页面的数据以 JSON 格式写入，以便在 Web 浏览器中查看。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">正在 spider.json 上创建 JSON 输出...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">多少个节点？30</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">在浏览器中打开 force.html 以查看可视化结果</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>你可以通过在 Web 浏览器中打开文件 <em><em>force.html</em></em> 来查看此数据。这显示了节点和链接的自动布局。你可以单击并拖动任何节点，也可以双击一个节点以查找该节点代表的 URL。</p><p>如果你重新运行其他实用程序，请重新运行 <em><em>spjson.py</em></em> 并在浏览器中按刷新以从 <em><em>spider.json</em></em> 获取新数据。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="可视化邮件数据">可视化邮件数据<a href="#可视化邮件数据" class="hash-link" aria-label="Direct link to 可视化邮件数据" title="Direct link to 可视化邮件数据">​</a></h2><p>到本书的这一点，你已经非常熟悉我们的 <em><em>mbox-short.txt</em></em> 和 <em><em>mbox.txt</em></em> 数据文件了。现在是时候将我们对电子邮件数据的分析提升到一个新的水平了。</p><p>在现实世界中，有时你必须从服务器下拉邮件数据。这可能需要相当长的时间，并且数据可能不一致、充满错误，需要大量清理或调整。在本节中，我们将使用迄今为止最复杂的应用程序，下拉近 1 GB 的数据并对其进行可视化。</p><p><img loading="lazy" alt="Sakai 开发者列表的词云" src="/assets/images/wordcloud-429c3ddae60f2ceedbdfe9633155bc82.png" width="820" height="877" class="img_ev3q">
Sakai 开发者列表的词云</p><p>你可以从以下地址下载此应用程序：</p><p><a href="https://www.py4e.com/code3/gmane.zip" target="_blank" rel="noopener noreferrer">https://www.py4e.com/code3/gmane.zip</a></p><p>我们将使用一个名为 <em><em>gmane</em></em> 的免费邮件列表归档服务的数据——该服务现已关闭，为了本课程的目的，一个部分存档保存在 <a href="http://mbox.dr-chuck.net/" target="_blank" rel="noopener noreferrer">http://mbox.dr-chuck.net</a>。gmane 服务在开源项目中非常受欢迎，因为它为其电子邮件活动提供了一个很好的可搜索存档。</p><p><a href="http://mbox.dr-chuck.net/export.php" target="_blank" rel="noopener noreferrer">http://mbox.dr-chuck.net/export.php</a></p><p>当使用此软件爬取 Sakai 电子邮件数据时，它产生了近 1 GB 的数据，并且在几天内运行了多次。上述 ZIP 文件中的 <em><em>README.txt</em></em> 文件可能包含有关如何下载大部分 Sakai 电子邮件语料库的预爬取 <em><em>content.sqlite</em></em> 文件副本的说明，这样你就不必为了运行程序而爬取五天。如果你下载了预爬取的内容，你仍应运行爬取过程以赶上更新的消息。</p><p>第一步是爬取存储库。基本 URL 在 <em><em>gmane.py</em></em> 中是硬编码的，并且硬编码为 Sakai 开发者列表。你可以通过更改该基本 URL 来爬取另一个存储库。如果切换基本 URL，请确保删除 <em><em>content.sqlite</em></em> 文件。</p><p><em><em>gmane.py</em></em> 文件作为一个负责任的缓存爬虫运行，它运行缓慢，每秒检索一封邮件消息，以避免被限流。它将其所有数据存储在数据库中，并且可以根据需要随时中断和重新启动。下拉所有数据可能需要很多小时。所以你可能需要重新启动几次。</p><p>下面是 <em><em>gmane.py</em></em> 检索 Sakai 开发者列表最后五条消息的运行示例：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">多少条消息：10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">http://mbox.dr-chuck.net/sakai.devel/51410/51411 9460</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    nealcaidin@sakaifoundation.org 2013-04-05 re: [building ...\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">http://mbox.dr-chuck.net/sakai.devel/51411/51412 3379\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    samuelgutierrezjimenez@gmail.com 2013-04-06 re: [building ...\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">http://mbox.dr-chuck.net/sakai.devel/51412/51413 9903\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    da1@vt.edu 2013-04-05 [building sakai] melete 2.9 oracle ...\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">http://mbox.dr-chuck.net/sakai.devel/51413/51414 349265\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    m.shedid@elraed-it.com 2013-04-07 [building sakai] ...\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">http://mbox.dr-chuck.net/sakai.devel/51414/51415 3481\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    samuelgutierrezjimenez@gmail.com 2013-04-07 re: ...\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">http://mbox.dr-chuck.net/sakai.devel/51415/51416 0\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">不以 From 开头</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>该程序从 1 开始扫描 <em><em>content.sqlite</em></em>，直到第一个尚未爬取的消息编号，并从该消息开始爬取。它继续爬取，直到爬取了所需数量的消息，或者到达一个看起来不是格式正确的 Mbox 消息的页面。</p><p>有时存储库会丢失一条消息。也许管理员可以删除消息，或者它们可能会丢失。如果你的爬虫停止了，并且看起来它遇到了丢失的消息，请进入 SQLite 管理器并添加一个包含丢失 ID 的行，将所有其他字段留空，然后重新启动 <em><em>gmane.py</em></em>。这将解除爬取过程的卡顿状态，并允许它继续。这些空消息将在过程的下一阶段被忽略。</p><p>一个好处是，一旦你爬取了所有消息并将它们保存在 <em><em>content.sqlite</em></em> 中，你可以再次运行 <em><em>gmane.py</em></em> 来获取发送到列表的新消息。</p><p><em><em>content.sqlite</em></em> 数据非常原始，数据模型效率低下，并且未压缩。这是故意的，因为它允许你在 SQLite 管理器中查看 <em><em>content.sqlite</em></em> 以调试爬取过程中的问题。对此数据库运行任何查询都不是一个好主意，因为它们会相当慢。</p><p>第二个过程是运行程序 <em><em>gmodel.py</em></em>。这个程序从 <em><em>content.sqlite</em></em> 读取原始数据，并在文件 <em><em>index.sqlite</em></em> 中生成一个清理过且模型良好的数据版本。这个文件会比 <em><em>content.sqlite</em></em> 小得多（通常小 10 倍），因为它还压缩了头部和正文文本。</p><p>每次运行 <em><em>gmodel.py</em></em> 时，它都会删除并重建 <em><em>index.sqlite</em></em>，允许你调整其参数并编辑 <em><em>content.sqlite</em></em> 中的映射表以调整数据清理过程。这是 <em><em>gmodel.py</em></em> 的一个示例运行。它每处理 250 封邮件消息就打印一行，这样你可以看到一些进展，因为这个程序处理近 1 GB 的邮件数据可能需要运行一段时间。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">加载了所有发件人 1588 和映射 28 dns 映射 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 2005-12-08T23:34:30-06:00 ggolden22@mac.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">251 2005-12-22T10:03:20-08:00 tpamsler@ucdavis.edu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">501 2006-01-12T11:17:34-05:00 lance@indiana.edu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">751 2006-01-24T11:13:28-08:00 vrajgopalan@ucmerced.edu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><em><em>gmodel.py</em></em> 程序处理许多数据清理任务。</p><p>对于 .com、.org、.edu 和 .net，域名被截断为两级。其他域名被截断为三级。所以 si.umich.edu 变成 umich.edu，caret.cam.ac.uk 变成 cam.ac.uk。电子邮件地址也被强制转换为小写，并且一些像下面这样的 @gmane.org 地址</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">arwhyte-63aXycvo3TyHXe+LvDLADg@public.gmane.org</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>只要在消息语料库的其他地方存在匹配的真实电子邮件地址，就会被转换为真实地址。</p><p>在 <em><em>mapping.sqlite</em></em> 数据库中有两个表，允许你映射在邮件列表生命周期内发生变化的域名和单个电子邮件地址。例如，Steve Githens 在 Sakai 开发者列表的生命周期中随着工作变动使用了以下电子邮件地址：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">s-githens@northwestern.edu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sgithens@cam.ac.uk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">swgithen@mtu.edu</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>我们可以在 <em><em>mapping.sqlite</em></em> 的 Mapping 表中添加两个条目，这样 <em><em>gmodel.py</em></em> 就会将所有三个地址映射到一个地址：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">s-githens@northwestern.edu -&gt;  swgithen@mtu.edu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sgithens@cam.ac.uk -&gt; swgithen@mtu.edu</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如果存在多个你想要映射到单个 DNS 的 DNS 名称，你也可以在 DNSMapping 表中进行类似的条目。以下映射已添加到 Sakai 数据中：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">iupui.edu -&gt; indiana.edu</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>因此，来自印第安纳大学各个校区的所有帐户都被一起跟踪。</p><p>你可以反复重新运行 <em><em>gmodel.py</em></em>，边查看数据边添加映射，使数据越来越干净。完成后，你将在 <em><em>index.sqlite</em></em> 中拥有一个索引良好的邮件版本。这是用于进行数据分析的文件。使用这个文件，数据分析将非常快速。</p><p>第一个，最简单的数据分析是确定“谁发送了最多的邮件？”和“哪个组织发送了最多的邮件？”。这使用 <em><em>gbasic.py</em></em> 完成：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">要转储多少个？5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">已加载消息= 51330 主题= 25033 发件人= 1584</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">前 5 名电子邮件列表参与者</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">steve.swinsburg@gmail.com 2657</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">azeckoski@unicon.net 1742</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ieb@tfd.co.uk 1591</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">csev@umich.edu 1304</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">david.horwitz@uct.ac.za 1184</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">前 5 名电子邮件列表组织</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gmail.com 7339</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">umich.edu 6243</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">uct.ac.za 2451</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">indiana.edu 2258</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">unicon.net 2055</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>请注意 <em><em>gbasic.py</em></em> 与 <em><em>gmane.py</em></em> 甚至 <em><em>gmodel.py</em></em> 相比运行速度快了多少。它们都在处理相同的数据，但 <em><em>gbasic.py</em></em> 使用的是 <em><em>index.sqlite</em></em> 中压缩和规范化的数据。如果你有大量数据要管理，像这个应用程序这样的多步骤过程可能需要稍长的时间来开发，但当你真正开始探索和可视化你的数据时，它会为你节省大量时间。</p><p>你可以使用文件 <em><em>gword.py</em></em> 生成主题行中词频的简单可视化：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">计数范围：33229 129</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">输出已写入 gword.js</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这将生成文件 <em><em>gword.js</em></em>，你可以使用 <em><em>gword.htm</em></em> 对其进行可视化，以生成类似于本节开头所示的词云。</p><p>第二个可视化由 <em><em>gline.py</em></em> 生成。它计算随时间变化的组织邮件参与情况。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">已加载消息= 51330 发件人= 1584</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">前 10 名组织</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[&#x27;gmail.com&#x27;, &#x27;umich.edu&#x27;, &#x27;uct.ac.za&#x27;, &#x27;indiana.edu&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;unicon.net&#x27;, &#x27;tfd.co.uk&#x27;, &#x27;berkeley.edu&#x27;, &#x27;longsight.com&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;stanford.edu&#x27;, &#x27;ox.ac.uk&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">输出已写入 gline.js</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>其输出被写入 <em><em>gline.js</em></em>，并使用 <em><em>gline.htm</em></em> 进行可视化。</p><p><img loading="lazy" alt="按组织划分的 Sakai 邮件活动" src="/assets/images/mailorg-149bb1fc4c8c2bac6fa3fc8da68b153f.png" width="1225" height="684" class="img_ev3q">按组织划分的 Sakai 邮件活动</p><p>这是一个相对复杂和精密的应用程序，并具有进行一些真实数据检索、清理和可视化的功能。</p><hr><p>如果你在本书中发现错误，欢迎使用 <a href="https://github.com/csev/py4e/tree/master/book3" target="_blank" rel="noopener noreferrer">Github</a> 给我发送修正。</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/curriculum-resource/py4e/book_zh/15"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">15-database</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#从地理编码数据构建-openstreetmap" class="table-of-contents__link toc-highlight">从地理编码数据构建 OpenStreetMap</a></li><li><a href="#可视化网络和互连" class="table-of-contents__link toc-highlight">可视化网络和互连</a></li><li><a href="#可视化邮件数据" class="table-of-contents__link toc-highlight">可视化邮件数据</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">CS学习社区</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">路线图</a></li></ul></div><div class="col footer__col"><div class="footer__title">社区</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/WqwvTrEQmA" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">捐赠</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/donate">捐赠我们</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyleft © 2025 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.1f1549d9.js"></script>
<script src="/assets/js/main.2f696ece.js"></script>
</body>
</html>