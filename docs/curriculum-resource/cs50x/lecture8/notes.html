<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-curriculum-resource/cs50x/lecture8/notes" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Notes | CS自学社区</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://www.learncs.site/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://www.learncs.site/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://www.learncs.site/docs/curriculum-resource/cs50x/lecture8/notes"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Notes | CS自学社区"><meta data-rh="true" name="description" content="lecture7 SQL Notes | 课程笔记"><meta data-rh="true" property="og:description" content="lecture7 SQL Notes | 课程笔记"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://www.learncs.site/docs/curriculum-resource/cs50x/lecture8/notes"><link data-rh="true" rel="alternate" href="https://www.learncs.site/docs/curriculum-resource/cs50x/lecture8/notes" hreflang="en"><link data-rh="true" rel="alternate" href="https://www.learncs.site/docs/curriculum-resource/cs50x/lecture8/notes" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="CS自学社区 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="CS自学社区 Atom Feed">



<link rel="preconnect" href="https://hm.baidu.com">
<script async src="https://hm.baidu.com/hm.js?c106b2729592653e5e0c26db5e5d3142"></script><link rel="stylesheet" href="/assets/css/styles.a5380579.css">
<link rel="preload" href="/assets/js/runtime~main.6515d569.js" as="script">
<link rel="preload" href="/assets/js/main.292e3472.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="TeachYourselfCS" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="TeachYourselfCS" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">TeachYourselfCS</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">自学路线</a><a class="navbar__item navbar__link" href="/community">社区</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">前言</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/roadmap">路线图</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/课程资源">课程资源</a><button aria-label="Toggle the collapsible sidebar category &#x27;课程资源&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/curriculum-resource/cs50x">cs50x</a><button aria-label="Toggle the collapsible sidebar category &#x27;cs50x&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/cs50x/lecture1">Lecture0 Scratch</a><button aria-label="Toggle the collapsible sidebar category &#x27;Lecture0 Scratch&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/cs50x/lecture2">lecture1 C</a><button aria-label="Toggle the collapsible sidebar category &#x27;lecture1 C&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/cs50x/lecture3">lecture2 Arrays</a><button aria-label="Toggle the collapsible sidebar category &#x27;lecture2 Arrays&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/cs50x/lecture4">lecture3 Algorithms</a><button aria-label="Toggle the collapsible sidebar category &#x27;lecture3 Algorithms&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/cs50x/lecture5">lecture4 Memory</a><button aria-label="Toggle the collapsible sidebar category &#x27;lecture4 Memory&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/cs50x/lecture6">lecture5 Data Structures</a><button aria-label="Toggle the collapsible sidebar category &#x27;lecture5 Data Structures&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/cs50x/lecture7">lecture6 python</a><button aria-label="Toggle the collapsible sidebar category &#x27;lecture6 python&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/curriculum-resource/cs50x/lecture8">lecture7 SQL</a><button aria-label="Toggle the collapsible sidebar category &#x27;lecture7 SQL&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/curriculum-resource/cs50x/lecture8/notes">Notes</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/cs50x/lecture8/problem set">Problem Set</a><button aria-label="Toggle the collapsible sidebar category &#x27;Problem Set&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/cs50x/lecture8/practice problems">Practice Problem</a><button aria-label="Toggle the collapsible sidebar category &#x27;Practice Problem&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/curriculum-resource/cs50x/lecture8/lab">Lab</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/cs50x/lecture9">lecture8 HTML,CSS,JavaScript</a><button aria-label="Toggle the collapsible sidebar category &#x27;lecture8 HTML,CSS,JavaScript&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/cs50x/lecture10">lecture9 Flask</a><button aria-label="Toggle the collapsible sidebar category &#x27;lecture9 Flask&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/cs50x/lecture11">lecture10 Emoji</a><button aria-label="Toggle the collapsible sidebar category &#x27;lecture10 Emoji&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/cs50x/lecture12">lecture11 Cybersecurity</a><button aria-label="Toggle the collapsible sidebar category &#x27;lecture11 Cybersecurity&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/cs61a">cs61a</a><button aria-label="Toggle the collapsible sidebar category &#x27;cs61a&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/curriculum-resource/cs61b">cs61b</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/tutorial---basics">Tutorial - Basics</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tutorial - Basics&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/tutorial---extras">Tutorial - Extras</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tutorial - Extras&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/课程资源"><span itemprop="name">课程资源</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/curriculum-resource/cs50x"><span itemprop="name">cs50x</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/curriculum-resource/cs50x/lecture8"><span itemprop="name">lecture7 SQL</span></a><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Notes</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Lecture 7 - CS50x 2023</h1><ul><li><a href="#welcome">Welcome!</a></li><li><a href="#flat-file-database">Flat-File Database</a></li><li><a href="#relational-databases">Relational Databases</a></li><li><a href="#imdb">IMDb</a></li><li><a href="#joins"><code>JOIN</code>s</a></li><li><a href="#indexes">Indexes</a></li><li><a href="#using-sql-in-python">Using SQL in Python</a></li><li><a href="#race-conditions">Race Conditions</a></li><li><a href="#sql-injection-attacks">SQL Injection Attacks</a></li><li><a href="#summing-up">Summing Up</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="welcome">Welcome!<a href="#welcome" class="hash-link" aria-label="Direct link to Welcome!" title="Direct link to Welcome!">​</a></h2><ul><li>In previous weeks, we introduced you to Python, a high-level programming language that utilized the same building blocks we learned in C.</li><li>This week, we will be continuing more syntax related to Python.</li><li>Further, we will be integrating this knowledge with data.</li><li>Finally, we will be discussing <em>SQL</em> or <em>Structured Query Language</em>.</li><li>Overall, one of the goals of this course is to learn to program generally – not simply how to program in the languages described in this course.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="flat-file-database">Flat-File Database<a href="#flat-file-database" class="hash-link" aria-label="Direct link to Flat-File Database" title="Direct link to Flat-File Database">​</a></h2><ul><li><p>As you have likely seen before, data can often be described in patterns of columns and tables.</p></li><li><p>Spreadsheets like those created in Microsoft Excel and Google Sheets can be outputted to a <code>csv</code> or <em>comma-separated values</em> file.</p></li><li><p>If you look at a <code>csv</code> file, you’ll notice that the file is flat in that all of our data is stored in a single table represented by a text file. We call this form of data a <em>flat-file database</em>.</p></li><li><p>Python comes with native support for <code>csv</code> files.</p></li><li><p>In your terminal window, type <code>code favorites.py</code> and write code as follows:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Prints all favorites in CSV using csv.reader</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import csv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Open CSV file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">with open(&quot;favorites.csv&quot;, &quot;r&quot;) as file:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Create reader</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    reader = csv.reader(file)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Skip header row</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    next(reader)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Iterate over CSV file, printing each favorite</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for row in reader:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        print(row[1])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Notice that the <code>csv</code> library is imported. Further, we created a <code>reader</code> that will hold the result of <code>csv.reader(file)</code>. The <code>csv.reader</code> function reads each row from the file, and in our code we store the results in <code>reader</code>. <code>print(row[1])</code>, therefore, will print the language from the <code>favorites.csv</code> file.</p></li><li><p>You can improve your code as follows:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Stores favorite in a variable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import csv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Open CSV file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">with open(&quot;favorites.csv&quot;, &quot;r&quot;) as file:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Create reader</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    reader = csv.reader(file)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Skip header row</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    next(reader)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Iterate over CSV file, printing each favorite</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for row in reader:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        favorite = row[1]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        print(favorite)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Notice that <code>favorite</code> is stored and then printed. Also notice that we use the <code>next</code> function to skip to the next line of our reader.</p></li><li><p>Python also allows you to index by the keys of a list. Modify your code as follows:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Prints all favorites in CSV using csv.DictReader</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import csv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Open CSV file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">with open(&quot;favorites.csv&quot;, &quot;r&quot;) as file:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Create DictReader</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    reader = csv.DictReader(file)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Iterate over CSV file, printing each favorite</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for row in reader:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        print(row[&quot;language&quot;])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Notice that this example directly utilizes the <code>language</code> key in the print statement.</p></li><li><p>To count the number of favorite languages expressed in the <code>csv</code> file, we can do the following:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Counts favorites using variables</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import csv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Open CSV file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">with open(&quot;favorites.csv&quot;, &quot;r&quot;) as file:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Create DictReader</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    reader = csv.DictReader(file)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Counts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    scratch, c, python = 0, 0, 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Iterate over CSV file, counting favorites</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for row in reader:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        favorite = row[&quot;language&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if favorite == &quot;Scratch&quot;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            scratch += 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        elif favorite == &quot;C&quot;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            c += 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        elif favorite == &quot;Python&quot;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            python += 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Print counts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(f&quot;Scratch: {scratch}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(f&quot;C: {c}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(f&quot;Python: {python}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Notice that each language is counted using <code>if</code> statements.</p></li><li><p>Python allows us to use a dictionary to count the <code>counts</code> of each language. Consider the following improvement upon our code:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Counts favorites using dictionary</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import csv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Open CSV file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">with open(&quot;favorites.csv&quot;, &quot;r&quot;) as file:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Create DictReader</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    reader = csv.DictReader(file)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Counts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    counts = {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Iterate over CSV file, counting favorites</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for row in reader:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        favorite = row[&quot;language&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if favorite in counts:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            counts[favorite] += 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        else:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            counts[favorite] = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Print counts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for favorite in counts:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(f&quot;{favorite}: {counts[favorite]}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Notice that the value in <code>counts</code> with the key <code>favorite</code> is incremented when it exists already. If it does not exist, we define <code>counts[favorite]</code> and set it to 1. Further, the formatted string has been improved to present the <code>counts[favorite]</code>.</p></li><li><p>Python also allows sorting <code>counts</code>. Improve your code as follows:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Sorts favorites by key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import csv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Open CSV file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">with open(&quot;favorites.csv&quot;, &quot;r&quot;) as file:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Create DictReader</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    reader = csv.DictReader(file)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Counts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    counts = {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Iterate over CSV file, counting favorites</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for row in reader:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        favorite = row[&quot;language&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if favorite in counts:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            counts[favorite] += 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        else:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            counts[favorite] = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Print counts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for favorite in sorted(counts):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(f&quot;{favorite}: {counts[favorite]}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Notice the <code>sorted(counts)</code> at the bottom of the code.</p></li><li><p>If you look at the parameters for the <code>sorted</code> function in the Python documentation, you will find it has many built-in parameters. You can leverage some of these built-in parameters as follows:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Sorts favorites by value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import csv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Open CSV file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">with open(&quot;favorites.csv&quot;, &quot;r&quot;) as file:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Create DictReader</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    reader = csv.DictReader(file)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Counts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    counts = {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Iterate over CSV file, counting favorites</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for row in reader:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        favorite = row[&quot;language&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if favorite in counts:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            counts[favorite] += 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        else:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            counts[favorite] = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def get_value(language):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return counts[language]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Print counts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for favorite in sorted(counts, key=get_value, reverse=True):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(f&quot;{favorite}: {counts[favorite]}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Notice that a function called <code>get_value</code> is created, and that the function itself is passed in as an argument to the <code>sorted</code> function. The <code>key</code> argument allows you to tell Python the method you wish to use to sort items.</p></li><li><p>Python has a unique ability that we have not seen to date: It allows for the utilization of <em>anonymous</em> or <code>lambda</code> functions. These functions can be utilized when you want to not bother creating an entirely different function. Notice the following modification:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Sorts favorites by value using lambda function</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import csv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Open CSV file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">with open(&quot;favorites.csv&quot;, &quot;r&quot;) as file:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Create DictReader</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    reader = csv.DictReader(file)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Counts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    counts = {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Iterate over CSV file, counting favorites</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for row in reader:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        favorite = row[&quot;language&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if favorite in counts:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            counts[favorite] += 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        else:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            counts[favorite] = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Print counts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for favorite in sorted(counts, key=lambda language: counts[language], reverse=True):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(f&quot;{favorite}: {counts[favorite]}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Notice that the <code>get_value</code> function has been removed. Instead, <code>lambda language: counts[language]</code> does in one line what our previous two-line function did.</p></li><li><p>We can change the column we are examining, focusing on our favorite problem instead:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Favorite problem instead of favorite language</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import csv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Open CSV file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">with open(&quot;favorites.csv&quot;, &quot;r&quot;) as file:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Create DictReader</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    reader = csv.DictReader(file)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Counts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    counts = {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Iterate over CSV file, counting favorites</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for row in reader:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        favorite = row[&quot;problem&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if favorite in counts:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            counts[favorite] += 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        else:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            counts[favorite] = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Print counts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for favorite in sorted(counts, key=lambda problem: counts[problem], reverse=True):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(f&quot;{favorite}: {counts[favorite]}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Notice that <code>problem</code> replaced <code>language</code>.</p></li><li><p>What if we wanted to allow users to provide input directly in the terminal? We can modify our code, leveraging our previous knowledge about user input:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Favorite problem instead of favorite language</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import csv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Open CSV file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">with open(&quot;favorites.csv&quot;, &quot;r&quot;) as file:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Create DictReader</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    reader = csv.DictReader(file)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Counts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    counts = {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Iterate over CSV file, counting favorites</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for row in reader:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        favorite = row[&quot;problem&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if favorite in counts:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            counts[favorite] += 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        else:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            counts[favorite] = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Print count</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">favorite = input(&quot;Favorite: &quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if favorite in counts:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(f&quot;{favorite}: {counts[favorite]}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Notice how compact our code is compared to our experience in C.</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="relational-databases">Relational Databases<a href="#relational-databases" class="hash-link" aria-label="Direct link to Relational Databases" title="Direct link to Relational Databases">​</a></h2><ul><li><p>Google, Twitter, and Meta all use relational databases to store their information at scale.</p></li><li><p>Relational databases store data in rows and columns in structures called <em>tables</em>.</p></li><li><p>SQL allows for four types of commands:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  Create</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Read</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Delete</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>These four operations are affectionately called <em>CRUD</em>.</p></li><li><p>We can create a SQL database at the terminal by typing <code>sqlite3 favorites.db</code>. Upon being prompted, we will agree that we want to create <code>favorites.db</code> by pressing <code>y</code>.</p></li><li><p>You will notice a different prompt as we are now inside a program called <code>sqlite3</code>.</p></li><li><p>We can put <code>sqlite3</code> into <code>csv</code> mode by typing <code>.mode csv</code>. Then, we can import our data from our <code>csv</code> file by typing <code>.import favorites.csv favorites</code>. It seems that nothing has happened!</p></li><li><p>We can type <code>.schema</code> to see the structure of the database.</p></li><li><p>You can read items from a table using the syntax <code>SELECT columns FROM table</code>.</p></li><li><p>For example, you can type <code>SELECT * FROM favorites;</code> which will iterate every row in <code>favorites</code>.</p></li><li><p>You can get a subset of the data using the command <code>SELECT language FROM favorites;</code>.</p></li><li><p>SQL supports many commands to access data, including:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  AVG</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  COUNT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  DISTINCT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  LOWER</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  MAX</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  MIN</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  UPPER</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>For example, you can type <code>SELECT COUNT(language) FROM favorites;</code>. Further, you can type <code>SELECT DISTINCT(language) FROM favorites;</code> to get a list of the individual languages within the database. You could even type <code>SELECT COUNT(DISTINCT(language)) FROM favorites;</code> to get a count of those.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Searches database popularity of a problem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import csv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from cs50 import SQL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Open database</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">db = SQL(&quot;sqlite:///favorites.db&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Prompt user for favorite</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">favorite = input(&quot;Favorite: &quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Search for title</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rows = db.execute(&quot;SELECT COUNT(*) FROM favorites WHERE problem LIKE ?&quot;, &quot;%&quot; + favorite + &quot;%&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Get first (and only) row</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">row = rows[0]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Print popularity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(row[&quot;COUNT(*)&quot;])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>SQL offers additional commands we can utilize in our queries:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  WHERE       -- adding a Boolean expression to filter our data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  LIKE        -- filtering responses more loosely</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ORDER BY    -- ordering responses</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  LIMIT       -- limiting the number of responses</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  GROUP BY    -- grouping responses together</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Notice that we use <code>--</code> to write a comment in SQL.</p></li><li><p>For example, we can execute <code>SELECT COUNT(*) FROM favorites WHERE language = &#x27;C&#x27;;</code>. A count is presented.</p></li><li><p>Further, we could type <code>SELECT COUNT(*) FROM favorites WHERE language = &#x27;C&#x27; AND problem = &#x27;Mario&#x27;;</code>. Notice how the <code>AND</code> is utilized to narrow our results.</p></li><li><p>Similarly, we could execute <code>SELECT language, COUNT(*) FROM favorites GROUP BY language;</code>. This would offer a temporary table that would show the language and count.</p></li><li><p>We could improve this by typing <code>SELECT language, COUNT(*) FROM favorites GROUP BY language ORDER BY COUNT(*);</code>. This will order the resulting table by the <code>count</code>.</p></li><li><p>We can also <code>INSERT</code> into a SQL database utilizing the form <code>INSERT INTO table (column...) VALUES(value, ...);</code>.</p></li><li><p>We can execute <code>INSERT INTO favorites (language, problem) VALUES (&#x27;SQL&#x27;, &#x27;Fiftyville&#x27;);</code>.</p></li><li><p>We can also utilize the <code>UPDATE</code> command to update your data.</p></li><li><p>For example, you can execute <code>UPDATE favorites SET language = &#x27;C++&#x27; WHERE language = &#x27;C&#x27;;</code>. This will result in overwriting all previous statements where C was the favorite programming language.</p></li><li><p>Notice that these queries have immense power. Accordingly, in the real-world setting, you should consider who has permissions to execute certain commands.</p></li><li><p><code>DELETE</code> allows you to delete parts of your data. For example, you could <code>DELETE FROM favorites WHERE problem = &#x27;Tideman&#x27;;</code>.</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="imdb">IMDb<a href="#imdb" class="hash-link" aria-label="Direct link to IMDb" title="Direct link to IMDb">​</a></h2><ul><li><p>IMDb offers a database of people, shows, writers, stars, genres, and ratings. Each of these tables is related to one another as follows:</p><p><img loading="lazy" alt="six boxes that represent various sql tables arrows are drawn to each showing their many relationships with one another" src="/assets/images/cs50Week7Slide025-bb45d9f803af6cf4dab84dd80e079cba.png" title="imdb relationships" width="960" height="540" class="img_ev3q"></p></li><li><p>After downloading <a href="https://github.com/cs50/lectures/blob/2022/fall/7/src7/imdb/shows.db" target="_blank" rel="noopener noreferrer"><code>shows.db</code></a>, you can execute <code>sqlite3 shows.db</code> in your terminal window.</p></li><li><p>Upon executing <code>.schema</code> you will find not only each of the tables but the individual fields inside each of these fields.</p></li><li><p>As you can see by the image above, <code>shows</code> has an <code>id</code> field. The <code>genres</code> table has a <code>show_id</code> field which has data that is common between it and the <code>shows</code> table.</p></li><li><p>As you can see also in the image above, <code>show_id</code> exists in all of the tables. In the <code>shows</code> table, it is simply called <code>id</code>. This common field between all the fields is called a <em>key</em>. Primary keys are used to identify a unique record in a table. <em>Foreign keys</em> are used to build relationships between tables by pointing to the primary key in another table.</p></li><li><p>By storing data in a relational database, as above, data can be more efficiently stored.</p></li><li><p>In <em>sqlite</em>, we have five datatypes, including:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  BLOB       -- binary large objects that are groups of ones and zeros</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  INTEGER    -- an integer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  NUMERIC    -- for numbers that are formatted specially like dates</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  REAL       -- like a float</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  TEXT       -- for strings and the like</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>Additionally, columns can be set to add special constraints:</p></li><li><p>To illustrate the relationship between these tables further, we could execute the following command: <code>SELECT * FROM people LIMIT 10;</code>. Examining the output, we could execute <code>SELECT * FROM shows LIMIT 10;</code>. Further, we could execute <code>SELECT * FROM stars LIMIT 10;</code>. <code>show_id</code> is a foreign key in this final query because <code>show_id</code> corresponds to the unique <code>id</code> field in <code>shows</code>. <code>person_id</code> corresponds to the unique <code>id</code> field in the <code>people</code> column.</p></li><li><p>We can further play with this data to understand these relationships. Execute <code>SELECT * FROM genres;</code>. There are a lot of genres!</p></li><li><p>We can further limit this data down by executing <code>SELECT * FROM genres WHERE genre = &#x27;Comedy&#x27; LIMIT 10;</code>. From this query, you can see that there are 10 shows presented.</p></li><li><p>You can discover what shows these are by executing <code>SELECT * FROM shows WHERE id = 626124;</code></p></li><li><p>We can further our query to be more efficient by executing</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT title</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM shows</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WHERE id IN (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SELECT show_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    FROM genres</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    WHERE genre = &#x27;Comedy&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LIMIT 10;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Notice that this query nests together two queries. An inner query is used by an outer query.</p></li><li><p>We can refine further by executing</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT title</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM shows</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WHERE id IN (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SELECT show_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    FROM genres</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    WHERE genre = &#x27;Comedy&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ORDER BY title LIMIT 10;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>What if you wanted to find all shows in which Steve Carell stars? You could execute <code>SELECT * FROM people WHERE name = &#x27;Steve Carell&#x27;;</code> You would find his individual <code>id</code>. You could utilize this <code>id</code> to locate many <code>shows</code> in which he appears. However, this would be tedious to attempt this one by one. How could we next our queries to make this more streamlined? Consider the following:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT title FROM shows WHERE id IN</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (SELECT show_id FROM stars WHERE person_id =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (SELECT * FROM people WHERE name = &#x27;Steve Carell&#x27;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Notice that this lengthy query will result in a final result that is useful in discovering the answer to our question.</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="joins"><code>JOIN</code>s<a href="#joins" class="hash-link" aria-label="Direct link to joins" title="Direct link to joins">​</a></h2><ul><li><p>Consider the following two tables:</p><p><img loading="lazy" alt="two boxes representing the shows and genres table with an arrow connecting id and show id" src="/assets/images/cs50Week7Slide030-3f664e686d78bb4ac5669cd5b5e515c0.png" title="primary and foreign keys" width="960" height="540" class="img_ev3q"></p></li><li><p>How could we combine tables temporarily? Tables could be joined together using the <code>JOIN</code> command.</p></li><li><p>Execute the following command:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT * FROM shows</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  JOIN ratings on shows.id = ratings.show_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  WHERE title = &#x27;The Office&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>Now you can see all the shows that have been called <em>The Office</em>.</p></li><li><p>You could similarly apply <code>JOIN</code> to our Steve Carell query above by executing the following:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT title FROM people</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  JOIN stars ON people.id = stars.person_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  JOIN shows ON stars.show_id = shows.id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  WHERE name = `Steve Carell`;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Notice how each <code>JOIN</code> command tells us which columns are aligned to each which other columns.</p></li><li><p>This could be similarly implemented as follows:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT title FROM people, stars, shows</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WHERE people.id = stars.person_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AND stars.show_id = shows.id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AND name = &#x27;Steve Carell&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Notice that this achieves the same results.</p></li><li><p>The wildcard <code>%</code> operator can be used to find all people whose names start with <code>Steve C</code> one could employ the syntax <code>SELECT * FROM people WHERE name LIKE &#x27;Steve C%&#x27;;</code>.</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="indexes">Indexes<a href="#indexes" class="hash-link" aria-label="Direct link to Indexes" title="Direct link to Indexes">​</a></h2><ul><li><p>While relational databases have the ability to be more fast and more robust than utilizing a <code>CSV</code> file, data can be optimized within a table using <em>indexes</em>.</p></li><li><p>Indexes can be utilized to speed up our queries.</p></li><li><p>We can track the speed of our queries by executing <code>.timer on</code> in <code>sqlite3</code>.</p></li><li><p>To understand how indexes can speed up our queries, run the following: <code>SELECT * FROM shows WHERE title = &#x27;The Office&#x27;;</code> Notice the time that displays after the query executes.</p></li><li><p>Then, we can create an index with the syntax <code>CREATE INDEX title_index on shows (title);</code>. This tells <code>sqlite3</code> to create an index and perform some special under-the-hood optimization relating to this column <code>title</code>.</p></li><li><p>This will create a data structure called a <em>B Tree</em>, a data structure that looks similar to a binary tree. However, unlike a binary tree, there can be more than two child notes.</p><p><img loading="lazy" alt="one node at the top from which come four children and below that there are three children coming from one of the nodes and two from another two from another and three from another" src="/assets/images/cs50Week7Slide039-d1d6b95538a8ebdcd608e0ee3f9dd15e.png" title="b tree" width="960" height="540" class="img_ev3q"></p></li><li><p>Running the query <code>SELECT * FROM shows WHERE title = &#x27;The Office&#x27;;</code>, you will notice that the query runs much more quickly!</p></li><li><p>Unfortunately, indexing all columns would result in utilizing more storage space. Therefore, there is a tradeoff for enhanced speed.</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="using-sql-in-python">Using SQL in Python<a href="#using-sql-in-python" class="hash-link" aria-label="Direct link to Using SQL in Python" title="Direct link to Using SQL in Python">​</a></h2><ul><li><p>To assist in working with SQL in this course, the CS50 Library can be utilized as follows in your code:</p></li><li><p>Similar to previous uses of the CS50 Library, this library will assist with the complicated steps of utilizing SQL within your Python code.</p></li><li><p>You can read more about the CS50 Library’s SQL functionality in the <a href="https://cs50.readthedocs.io/libraries/cs50/python/#cs50.SQL" target="_blank" rel="noopener noreferrer">documentation</a>.</p></li><li><p>Recall where we last left off in <code>favorites.py</code>. Your code should appear as follows:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Favorite problem instead of favorite language</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import csv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Open CSV file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">with open(&quot;favorites.csv&quot;, &quot;r&quot;) as file:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Create DictReader</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    reader = csv.DictReader(file)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Counts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    counts = {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Iterate over CSV file, counting favorites</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for row in reader:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        favorite = row[&quot;problem&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if favorite in counts:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            counts[favorite] += 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        else:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            counts[favorite] = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Print count</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">favorite = input(&quot;Favorite: &quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if favorite in counts:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(f&quot;{favorite}: {counts[favorite]}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>Modify your code as follows:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Searches database popularity of a problem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import csv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from cs50 import SQL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Open database</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">db = SQL(&quot;sqlite:///favorites.db&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Prompt user for favorite</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">favorite = input(&quot;Favorite: &quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Search for title</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rows = db.execute(&quot;SELECT COUNT(*) FROM favorites WHERE problem LIKE ?&quot;, &quot;%&quot; + favorite + &quot;%&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Get first (and only) row</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">row = rows[0]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Print popularity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(row[&quot;COUNT(*)&quot;])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Notice that <code>db = SQL(&quot;sqlite:///favorites.db&quot;)</code> provide Python the location of the database file. Then, the line that begins with <code>rows</code> executes SQL commands utilizing <code>db.execute</code>. Indeed, this command passes the syntax within the quotation marks to the <code>db.execute</code> function. We can issue any SQL command using this syntax. Further, notice that <code>rows</code> is returned as a list of dictionaries. In this case, there is only one result, one row, returned to the rows list as a dictionary.</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="race-conditions">Race Conditions<a href="#race-conditions" class="hash-link" aria-label="Direct link to Race Conditions" title="Direct link to Race Conditions">​</a></h2><ul><li>Utilization of SQL can sometimes result in some problems.</li><li>You can imagine a case where multiple users could be accessing the same database and executing commands at the same time.</li><li>This could result in glitches where code is interrupted by other people’s actions. This could result in a loss of data.</li><li>Built-in SQL features such as <code>BEGIN TRANSACTION</code>, <code>COMMIT</code>, and <code>ROLLBACK</code> help avoid some of these race condition problems.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="sql-injection-attacks">SQL Injection Attacks<a href="#sql-injection-attacks" class="hash-link" aria-label="Direct link to SQL Injection Attacks" title="Direct link to SQL Injection Attacks">​</a></h2><ul><li><p>Now, still considering the code above, you might be wondering what the <code>?</code> question marks do above. One of the problems that can arise in real-world applications of SQL is what is called an <em>injection attack</em>. An injection attack is where a malicious actor could input malicious SQL code.</p></li><li><p>For example, consider a login screen as follows:</p><p><img loading="lazy" alt="harvard key login screen with username and password fields" src="/assets/images/cs50Week7Slide051-e00c15988c54defdd13ebea756886e6a.png" title="harvard key login screen" width="960" height="540" class="img_ev3q"></p></li><li><p>Without the proper protections in our own code, a bad actor could run malicious code. Consider the following:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rows = db.execute(&quot;SELECT COUNT(*) FROM favorites WHERE problem LIKE ?&quot;, &quot;%&quot; + favorite + &quot;%&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Notice that because the <code>?</code> is in place, validation can be run on <code>favorite</code> before it is blindly accepted by the query.</p></li><li><p>You never want to utilize formatted strings in queries as above or blindly trust the user’s input.</p></li><li><p>Utilizing the CS50 Library, the library will <em>sanitize</em> and remove any potentially malicious characters.</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="summing-up">Summing Up<a href="#summing-up" class="hash-link" aria-label="Direct link to Summing Up" title="Direct link to Summing Up">​</a></h2><p>In this lesson, you learned more syntax related to Python. Further, you learned how to integrate this knowledge with data in the form of flat-file and relational databases. Finally, you learned about <em>SQL</em>. Specifically, we discussed…</p><ul><li>Flat-file databases</li><li>Relational databases</li><li>SQL</li><li><code>JOIN</code>s</li><li>Indexes</li><li>Using SQL in Python</li><li>Race conditions</li><li>SQL injection attacks</li></ul><p>See you next time!</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/curriculum-resource/cs50x/lecture8"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">lecture7 SQL</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/curriculum-resource/cs50x/lecture8/problem set"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Problem Set</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#welcome" class="table-of-contents__link toc-highlight">Welcome!</a></li><li><a href="#flat-file-database" class="table-of-contents__link toc-highlight">Flat-File Database</a></li><li><a href="#relational-databases" class="table-of-contents__link toc-highlight">Relational Databases</a></li><li><a href="#imdb" class="table-of-contents__link toc-highlight">IMDb</a></li><li><a href="#joins" class="table-of-contents__link toc-highlight"><code>JOIN</code>s</a></li><li><a href="#indexes" class="table-of-contents__link toc-highlight">Indexes</a></li><li><a href="#using-sql-in-python" class="table-of-contents__link toc-highlight">Using SQL in Python</a></li><li><a href="#race-conditions" class="table-of-contents__link toc-highlight">Race Conditions</a></li><li><a href="#sql-injection-attacks" class="table-of-contents__link toc-highlight">SQL Injection Attacks</a></li><li><a href="#summing-up" class="table-of-contents__link toc-highlight">Summing Up</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">CS学习社区</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">路线图</a></li></ul></div><div class="col footer__col"><div class="footer__title">社区</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.6515d569.js"></script>
<script src="/assets/js/main.292e3472.js"></script>
</body>
</html>