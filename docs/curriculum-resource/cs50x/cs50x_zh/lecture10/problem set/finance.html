<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-curriculum-resource/cs50x/cs50x_zh/lecture10/problem set/finance" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">finance | CS自学社区</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://www.learncs.site/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://www.learncs.site/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://www.learncs.site/docs/curriculum-resource/cs50x/cs50x_zh/lecture10/problem set/finance"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="baidu-site-verification" content="codeva-hJyfN2UKgo"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="finance | CS自学社区"><meta data-rh="true" name="description" content="cs50x problem set finance"><meta data-rh="true" property="og:description" content="cs50x problem set finance"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://www.learncs.site/docs/curriculum-resource/cs50x/cs50x_zh/lecture10/problem set/finance"><link data-rh="true" rel="alternate" href="https://www.learncs.site/docs/curriculum-resource/cs50x/cs50x_zh/lecture10/problem set/finance" hreflang="en"><link data-rh="true" rel="alternate" href="https://www.learncs.site/docs/curriculum-resource/cs50x/cs50x_zh/lecture10/problem set/finance" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="CS自学社区 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="CS自学社区 Atom Feed">




<link rel="stylesheet" href="/katex/katex.min.css"><link rel="stylesheet" href="/assets/css/styles.c4382977.css">
<link rel="preload" href="/assets/js/runtime~main.035397b9.js" as="script">
<link rel="preload" href="/assets/js/main.2f696ece.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#fafbfc;color:#091E42" role="banner"><div class="content_knG7 announcementBarContent_xLdY">🎉️🎉️🎉️课程文档汉化工作正在进行中 🎉️🎉️ 学习交流群请到 <a href="/community">社区页面</a> 查看入群方式 🎉️🎉️🎉️</div></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="TeachYourselfCS" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="TeachYourselfCS" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">TeachYourselfCS</b></a><a class="navbar__item navbar__link" href="/docs/roadmap">路线图</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">课程资源</a><a class="navbar__item navbar__link" href="/blog">博客</a><a class="navbar__item navbar__link" href="/community">社区</a><a class="navbar__item navbar__link" href="/donate">捐赠我们</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">前言</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/roadmap">路线图</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/课程资源">课程资源</a><button aria-label="Toggle the collapsible sidebar category &#x27;课程资源&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/curriculum-resource/cs50x">cs50x</a><button aria-label="Toggle the collapsible sidebar category &#x27;cs50x&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/cs50x/cs50x_en">cs50x</a><button aria-label="Toggle the collapsible sidebar category &#x27;cs50x&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/curriculum-resource/cs50x/cs50x_zh">cs50x 中文版</a><button aria-label="Toggle the collapsible sidebar category &#x27;cs50x 中文版&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/cs50x/cs50x_zh/lecture1">Lecture0 Scratch</a><button aria-label="Toggle the collapsible sidebar category &#x27;Lecture0 Scratch&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/cs50x/cs50x_zh/lecture2">lecture1 C</a><button aria-label="Toggle the collapsible sidebar category &#x27;lecture1 C&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/cs50x/cs50x_zh/lecture3">lecture2 Arrays</a><button aria-label="Toggle the collapsible sidebar category &#x27;lecture2 Arrays&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/cs50x/cs50x_zh/lecture4">lecture3 Algorithms</a><button aria-label="Toggle the collapsible sidebar category &#x27;lecture3 Algorithms&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/cs50x/cs50x_zh/lecture5">lecture4 Memory</a><button aria-label="Toggle the collapsible sidebar category &#x27;lecture4 Memory&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/cs50x/cs50x_zh/lecture6">lecture5 Data Structures</a><button aria-label="Toggle the collapsible sidebar category &#x27;lecture5 Data Structures&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/cs50x/cs50x_zh/lecture7">lecture6 python</a><button aria-label="Toggle the collapsible sidebar category &#x27;lecture6 python&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/cs50x/cs50x_zh/lecture8">lecture7 SQL</a><button aria-label="Toggle the collapsible sidebar category &#x27;lecture7 SQL&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/cs50x/cs50x_zh/lecture9">lecture8 HTML,CSS,JavaScript</a><button aria-label="Toggle the collapsible sidebar category &#x27;lecture8 HTML,CSS,JavaScript&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/curriculum-resource/cs50x/cs50x_zh/lecture10">lecture9 Flask</a><button aria-label="Toggle the collapsible sidebar category &#x27;lecture9 Flask&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/curriculum-resource/cs50x/cs50x_zh/lecture10/notes">笔记</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-5 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/curriculum-resource/cs50x/cs50x_zh/lecture10/problem set">Problem Set</a><button aria-label="Toggle the collapsible sidebar category &#x27;Problem Set&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-6 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/curriculum-resource/cs50x/cs50x_zh/lecture10/problem set/finance">finance</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-5 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/cs50x/cs50x_zh/lecture10/practice problems">Practice Problem</a><button aria-label="Toggle the collapsible sidebar category &#x27;Practice Problem&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/curriculum-resource/cs50x/cs50x_zh/lecture10/lab">Lab</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/cs50x/cs50x_zh/lecture12">lecture11 Cybersecurity</a><button aria-label="Toggle the collapsible sidebar category &#x27;lecture11 Cybersecurity&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/cs50x/cs50x_zh/lecture11">lecture10 Emoji</a><button aria-label="Toggle the collapsible sidebar category &#x27;lecture10 Emoji&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/cs61a">cs61a</a><button aria-label="Toggle the collapsible sidebar category &#x27;cs61a&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/cs61b">cs61b</a><button aria-label="Toggle the collapsible sidebar category &#x27;cs61b&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/cs61c">cs61c</a><button aria-label="Toggle the collapsible sidebar category &#x27;cs61c&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/18-01">MIT 18.01</a><button aria-label="Toggle the collapsible sidebar category &#x27;MIT 18.01&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/18-02">MIT 18.02</a><button aria-label="Toggle the collapsible sidebar category &#x27;MIT 18.02&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/18-06">MIT 18.06</a><button aria-label="Toggle the collapsible sidebar category &#x27;MIT 18.06&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/6-04j">MIT 6.042J</a><button aria-label="Toggle the collapsible sidebar category &#x27;MIT 6.042J&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/cs162">cs162</a><button aria-label="Toggle the collapsible sidebar category &#x27;cs162&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/cs144">cs144</a><button aria-label="Toggle the collapsible sidebar category &#x27;cs144&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/15-445">CMU 15-445</a><button aria-label="Toggle the collapsible sidebar category &#x27;CMU 15-445&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/py4e">py4e</a><button aria-label="Toggle the collapsible sidebar category &#x27;py4e&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/课程资源"><span itemprop="name">课程资源</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/curriculum-resource/cs50x"><span itemprop="name">cs50x</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/curriculum-resource/cs50x/cs50x_zh"><span itemprop="name">cs50x 中文版</span></a><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/curriculum-resource/cs50x/cs50x_zh/lecture10"><span itemprop="name">lecture9 Flask</span></a><meta itemprop="position" content="4"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/curriculum-resource/cs50x/cs50x_zh/lecture10/problem set"><span itemprop="name">Problem Set</span></a><meta itemprop="position" content="5"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">finance</span><meta itemprop="position" content="6"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>CS50金融 - CS50x 2023</h1><p>我们将实现一个网站，用户可以在此网站上“购买”和“出售”股票， 如下图所示。</p><p><img loading="lazy" alt="C$50 金融" src="/assets/images/finance-d7ae5291e26bcbdcb9762cdb8d29428c.png" width="887" height="639" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="背景"><a href="#background">背景</a><a href="#背景" class="hash-link" aria-label="Direct link to 背景" title="Direct link to 背景">​</a></h2><p>如果您不确定股票（即公司股份）的买卖含义，请点击<a href="https://www.investopedia.com/articles/basics/06/invest1000.asp" target="_blank" rel="noopener noreferrer">此处</a>查看教程。</p><p>您即将实现 CS50金融，这是一个Web应用程序，您可以用它来管理股票投资组合。这个工具不仅能让您查看真实股票的实时价格和投资组合价值，还能通过查询股票价格进行股票买卖（当然，是“模拟”买卖）。</p><p>实际上，有一些工具（例如IEX）允许您通过API（应用程序编程接口），使用类似下面的URL来下载股票报价：<code>https://api.iex.cloud/v1/data/core/quote/nflx?token=API_KEY</code>。注意，Netflix的股票代码(NFLX)就包含在这个URL里。IEX就是通过它来确定要返回哪个公司的数据。由于IEX需要API密钥，所以这个链接实际上不会返回任何数据。但如果一切正常，您会看到如下JSON（JavaScript对象表示法）格式的返回信息：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;avgTotalVolume&quot;: 15918066,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;calculationPrice&quot;: &quot;close&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;change&quot;: -8.27,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;changePercent&quot;: -0.03074,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;close&quot;: 260.79,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;closeSource&quot;: &quot;official&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;closeTime&quot;: 1667592000924,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;companyName&quot;: &quot;Netflix Inc.&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;currency&quot;: &quot;USD&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;delayedPrice&quot;: 260.81,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;delayedPriceTime&quot;: 1667591988947,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;extendedChange&quot;: 0.21,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;extendedChangePercent&quot;: 0.00081,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;extendedPrice&quot;: 261,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;extendedPriceTime&quot;: 1667606392772,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;high&quot;: 274.97,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;highSource&quot;: &quot;15 minute delayed price&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;highTime&quot;: 1667592000831,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;iexAskPrice&quot;: None,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;iexAskSize&quot;: None,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;iexBidPrice&quot;: None,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;iexBidSize&quot;: None,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;iexClose&quot;: 260.85,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;iexCloseTime&quot;: 1667591999754,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;iexLastUpdated&quot;: None,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;iexMarketPercent&quot;: None,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;iexOpen&quot;: 271.67,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;iexOpenTime&quot;: 1667568602197,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;iexRealtimePrice&quot;: None,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;iexRealtimeSize&quot;: None,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;iexVolume&quot;: None,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;lastTradeTime&quot;: 1667591999820,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;latestPrice&quot;: 260.79,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;latestSource&quot;: &quot;Close&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;latestTime&quot;: &quot;November 4, 2022&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;latestUpdate&quot;: 1667592000924,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;latestVolume&quot;: 11124694,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;low&quot;: 255.32,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;lowSource&quot;: &quot;15 minute delayed price&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;lowTime&quot;: 1667584872696,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;marketCap&quot;: 115215720136,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;oddLotDelayedPrice&quot;: 260.81,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;oddLotDelayedPriceTime&quot;: 1667591988947,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;open&quot;: 271.9,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;openTime&quot;: 1667568601785,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;openSource&quot;: &quot;official&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;peRatio&quot;: 23.39,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;previousClose&quot;: 269.06,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;previousVolume&quot;: 7057350,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;primaryExchange&quot;: &quot;NASDAQ&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;symbol&quot;: &quot;NFLX&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;volume&quot;: 11124694,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;week52High&quot;: 700.99,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;week52Low&quot;: 162.71,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;ytdChange&quot;: -0.5978504176349512,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;isUSMarketOpen&quot;: False</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>请注意，花括号内包含一系列以逗号分隔的键值对，其中每个键和值之间使用冒号分隔。我们将用 Yahoo Finance 做非常类似的事情。</p><p>接下来，我们来看看如何获取这个问题的初始代码。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="开始"><a href="#getting-started">开始</a><a href="#开始" class="hash-link" aria-label="Direct link to 开始" title="Direct link to 开始">​</a></h2><p>登录 <a href="https://cs50.dev/" target="_blank" rel="noopener noreferrer">cs50.dev</a>，点击你的终端窗口，然后单独运行 <code>cd</code>。你应该发现你的终端窗口的提示符类似于下面这样：</p><p>接下来，运行</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">wget https://cdn.cs50.net/2022/fall/psets/9/finance.zip</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>以便将名为 <code>finance.zip</code> 的 ZIP 文件下载到你的 codespace。</p><p>然后，运行</p><p>来创建一个名为 <code>finance</code> 的文件夹。你不再需要该 ZIP 文件，可以运行</p><p>并在提示符后输入“y”，然后按回车键删除。</p><p>现在输入</p><p>然后按回车键进入该目录。此时，你的提示符应该类似如下：</p><p>单独运行 <code>ls</code>，你应该会看到一些文件和文件夹：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">app.py  finance.db  helpers.py  requirements.txt  static/  templates/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如果遇到问题，请重新检查以上步骤，找出错误所在！</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="运行"><a href="#running">运行</a><a href="#运行" class="hash-link" aria-label="Direct link to 运行" title="Direct link to 运行">​</a></h3><p>启动 Flask 的内置 Web 服务器（在 <code>finance/</code> 目录下）：</p><p>访问 <code>flask</code> 输出的 URL 以查看初始代码的运行效果。不过，你还不能登录或注册！</p><p>在 <code>finance/</code> 目录下，运行 <code>sqlite3 finance.db</code> 以使用 <code>sqlite3</code> 打开 <code>finance.db</code>。如果你在 SQLite 提示符中运行 <code>.schema</code>，请注意 <code>finance.db</code> 附带一个名为 <code>users</code> 的表。查看其结构（schema）。请注意，默认情况下，新用户将收到 10,000 美元的现金。但是，如果你运行 <code>SELECT * FROM users;</code>，则其中还没有任何用户（即行）可以浏览。</p><p>查看 <code>finance.db</code> 的另一种方法是使用一个名为 phpLiteAdmin 的程序。在你的 codespace 的文件浏览器中单击 <code>finance.db</code>，然后单击文本 “Please visit the following link to authorize GitHub Preview” 下面显示的链接。你应该会看到关于数据库本身的信息，以及一个表 <code>users</code>，就像你在 <code>sqlite3</code> 提示符中使用 <code>.schema</code> 命令看到的那样。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="理解"><a href="#understanding">理解</a><a href="#理解" class="hash-link" aria-label="Direct link to 理解" title="Direct link to 理解">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="apppy"><a href="#apppy"><code>app.py</code></a><a href="#apppy" class="hash-link" aria-label="Direct link to apppy" title="Direct link to apppy">​</a></h4><p>打开 <code>app.py</code>。文件顶部引入了一系列模块，包括 CS50 的 SQL 模块和一些辅助函数。稍后会详细介绍这些。</p><p>在配置 <a href="https://flask.pocoo.org/" target="_blank" rel="noopener noreferrer">Flask</a> 之后，请注意此文件如何禁用响应缓存（假设你处于调试模式，默认情况下你在 code50 的 codespace 环境中处于调试模式），这样可以避免你修改文件后，浏览器没有及时更新。它还使用 Jinja 的自定义过滤器 <code>usd</code> (定义在 <code>helpers.py</code> 中)，该过滤器能更方便地将数值格式化为美元 (USD)。然后，它进一步配置 Flask 以将 <a href="https://flask.palletsprojects.com/en/1.1.x/quickstart/#sessions" target="_blank" rel="noopener noreferrer">sessions</a> 存储在本地文件系统（即磁盘）上，而不是将它们存储在（数字签名的）cookie 中，这是 Flask 的默认设置。然后，该文件配置 CS50 的 SQL 模块以使用 <code>finance.db</code>。
接下来有很多路由，但只有<code>login</code>和<code>logout</code>这两个路由是完整实现的。首先阅读 <code>login</code> 的实现。注意它是如何使用 CS50 库中的 <code>db.execute</code> 来查询 <code>finance.db</code> 的。并注意它是如何使用 <code>check_password_hash</code> 来比较用户密码的哈希值的。还要注意，<code>login</code> 是如何将用户的 <code>user_id</code> (整数类型) 存储在 <code>session</code> 中，以此记录用户已登录状态的。这样，该文件中的所有路由都可以检查是否有用户登录，以及是哪个用户登录的。同时，<code>logout</code> 只是清空 <code>session</code>，从而实现用户注销。</p><p>注意，大多数路由都使用了 <code>@login_required</code> 装饰器 (该装饰器在 <code>helpers.py</code> 中定义)。该装饰器确保，如果用户尝试访问这些路由，系统会首先将其重定向到 <code>login</code> 页面进行登录。</p><p>还要注意大多数路由都支持 GET 和 POST。即便如此，由于大多数路由尚未实现，所以目前只是返回一个“道歉”页面。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="helperspy"><a href="#helperspy"><code>helpers.py</code></a><a href="#helperspy" class="hash-link" aria-label="Direct link to helperspy" title="Direct link to helperspy">​</a></h4><p>接下来看看 <code>helpers.py</code>。啊，这里是 <code>apology</code> 的实现。注意它是如何最终渲染一个模板 <code>apology.html</code> 的。它还恰好在自身内部定义了另一个函数 <code>escape</code>，它只是用于替换道歉中的特殊字符。通过在 <code>apology</code> 函数内部定义 <code>escape</code> 函数，我们将其作用域限定于 <code>apology</code> 函数内部；其他函数无法 (也无需) 调用它。</p><p>文件中接下来是 <code>login_required</code>。如果这部分代码比较难理解也不用担心，这里展示了一个函数如何返回另一个函数的例子!</p><p>接下来是 <code>lookup</code>，一个函数，给定一个 <code>symbol</code>（例如，NFLX），它以 <code>dict</code> 的形式返回一个公司的股票报价，其中包含三个键：<code>name</code>，其值是一个 <code>str</code>，即公司的名称；<code>price</code>，其值是一个 <code>float</code>；以及 <code>symbol</code>，其值是一个 <code>str</code>，即股票代码的规范化（大写）版本，无论该代码在传递到 <code>lookup</code> 时是如何大写的。</p><p>文件中的最后一个函数是 <code>usd</code>，它是一个简单的格式化函数，用于将浮点数 (float) 格式化为美元货币格式 (例如，将 <code>1234.56</code> 格式化为 <code>$1,234.56</code>)。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="requirementstxt"><a href="#requirementstxt"><code>requirements.txt</code></a><a href="#requirementstxt" class="hash-link" aria-label="Direct link to requirementstxt" title="Direct link to requirementstxt">​</a></h4><p>接下来快速浏览一下 <code>requirements.txt</code>。该文件定义了此应用程序所依赖的软件包列表。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="static"><a href="#static"><code>static/</code></a><a href="#static" class="hash-link" aria-label="Direct link to static" title="Direct link to static">​</a></h4><p>也请浏览 <code>static/</code> 目录，其中包含 <code>styles.css</code> 文件，用于存放初始的 CSS 样式。您可以根据自己的喜好修改这些样式。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="templates"><a href="#templates"><code>templates/</code></a><a href="#templates" class="hash-link" aria-label="Direct link to templates" title="Direct link to templates">​</a></h4><p>现在看看 <code>templates/</code>。<code>login.html</code> 本质上是一个 HTML 表单，使用了 <a href="https://getbootstrap.com/" target="_blank" rel="noopener noreferrer">Bootstrap</a> 样式库进行美化。同时，在 <code>apology.html</code> 中，是一个道歉的模板。请注意，<code>helpers.py</code> 中的 <code>apology</code> 函数接受两个参数：<code>message</code> 参数会作为 <code>bottom</code> 变量的值传递给 <code>render_template</code> 函数，而可选的 <code>code</code> 参数则会作为 <code>top</code> 变量的值传递给 <code>render_template</code> 函数。请注意在 <code>apology.html</code> 中这些值是如何最终被使用的！<a href="https://github.com/jacebrowning/memegen" target="_blank" rel="noopener noreferrer">这就是原因</a> 0:-)</p><p><code>layout.html</code> 文件相对较大，主要是因为它包含一个基于 Bootstrap 的、美观且对移动设备友好的导航栏 (navbar)。注意，该文件定义了一个名为 <code>main</code> 的代码块，其他模板文件 (包括 <code>apology.html</code> 和 <code>login.html</code>) 的内容将会被插入到该代码块中。该文件还支持 Flask 的 <a href="https://flask.palletsprojects.com/en/1.1.x/quickstart/#message-flashing" target="_blank" rel="noopener noreferrer">消息闪现</a> 功能，允许您在不同的路由之间传递消息，以便用户查看。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="规范"><a href="#specification">规范</a><a href="#规范" class="hash-link" aria-label="Direct link to 规范" title="Direct link to 规范">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="register"><a href="#register"><code>register</code></a><a href="#register" class="hash-link" aria-label="Direct link to register" title="Direct link to register">​</a></h3><p>完成 <code>register</code> 功能的实现，使用户能够通过表单注册账户。</p><ul><li>要求用户输入用户名，实现为一个 <code>name</code> 属性设置为 <code>username</code> 的文本输入框。如果用户输入为空或用户名已存在，则给出错误提示。</li><li>要求用户输入密码，实现为一个 <code>name</code> 属性设置为 <code>password</code> 的文本输入框，然后再次输入相同的密码，实现为一个 <code>name</code> 属性设置为 <code>confirmation</code> 的文本输入框。如果任何一个输入为空或密码不匹配，则给出错误提示。</li><li>通过 <code>POST</code> 将用户输入提交到 <code>/register</code>。</li><li>将新用户信息 <code>INSERT</code> 到 <code>users</code> 表中，存储用户密码的哈希加密值，而不是密码本身。使用 <a href="https://werkzeug.palletsprojects.com/en/2.3.x/utils/#werkzeug.security.generate_password_hash" target="_blank" rel="noopener noreferrer"><code>generate_password_hash</code></a> 对用户密码进行哈希加密。您可能需要创建一个新模板 (例如 <code>register.html</code>)，它与 <code>login.html</code> 类似。</li></ul><p>正确实现 <code>register</code> 后，您应该能够注册帐户并登录（因为 <code>login</code> 和 <code>logout</code> 已经可以工作）！之后，您应该能够通过 phpLiteAdmin 或 <code>sqlite3</code> 查看新添加的用户信息。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="quote"><a href="#quote"><code>quote</code></a><a href="#quote" class="hash-link" aria-label="Direct link to quote" title="Direct link to quote">​</a></h3><p>完成 <code>quote</code> 功能的实现，使用户能够查找股票的当前价格。</p><ul><li>要求用户输入股票代码，实现为一个 <code>name</code> 属性设置为 <code>symbol</code> 的文本输入框。</li><li>通过 <code>POST</code> 将用户输入提交到 <code>/quote</code>。</li><li>您可能需要创建两个新模板（例如，<code>quote.html</code> 和 <code>quoted.html</code>）。当用户通过 GET 访问 <code>/quote</code> 时，渲染其中一个模板，其中应包含一个通过 POST 提交到 <code>/quote</code> 的 HTML 表单。对于 POST 请求，<code>quote</code> 可以渲染第二个模板，并将 <code>lookup</code> 函数返回的一个或多个值嵌入其中。</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="buy"><a href="#buy"><code>buy</code></a><a href="#buy" class="hash-link" aria-label="Direct link to buy" title="Direct link to buy">​</a></h3><p>完成 <code>buy</code> 功能的实现，使其能够让用户购买股票。</p><ul><li>要求用户输入股票代码，实现为一个 <code>name</code> 属性设置为 <code>symbol</code> 的文本输入框。如果输入为空或股票代码不存在（即 <code>lookup</code> 函数返回 <code>None</code>），则给出错误提示。</li><li>要求用户输入股票数量，实现为一个 <code>name</code> 属性设置为 <code>shares</code> 的文本输入框。如果输入不是正整数，则给出错误提示。</li><li>通过 <code>POST</code> 将用户输入提交到 <code>/buy</code>。</li><li>完成后，将用户重定向到主页。</li><li>您可能需要调用 <code>lookup</code> 来查找股票的当前价格。</li><li>您可能需要 <code>SELECT</code> 用户当前在 <code>users</code> 表中拥有的现金数量。</li><li>在 <code>finance.db</code> 中添加一个或多个新表来跟踪购买记录。存储足够的信息，以便您知道谁在什么时间以什么价格购买了什么。<ul><li>使用适当的 SQLite 类型。</li><li>在任何应该唯一的字段上定义 <code>UNIQUE</code> 索引。</li><li>在需要进行搜索的字段上（例如，在 <code>SELECT</code> 语句的 <code>WHERE</code> 子句中使用的字段），定义非唯一索引。</li></ul></li><li>如果用户资金不足，无法购买所需数量的股票，则显示错误提示，且不执行购买操作。</li><li>您无需担心竞争条件（或使用事务）。</li></ul><p>正确实现 <code>buy</code> 后，您应该能够通过 phpLiteAdmin 或 <code>sqlite3</code> 在您的新表中查看用户的购买情况。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="index"><a href="#index"><code>index</code></a><a href="#index" class="hash-link" aria-label="Direct link to index" title="Direct link to index">​</a></h3><p>完成 <code>index</code> 功能的实现，使其显示一个 HTML 表格，汇总当前登录用户的信息，包括：拥有的股票、股票数量、每只股票的当前价格、以及每只股票的总价值（股票数量乘以价格）。此外，还应显示用户当前的现金余额以及总资产（股票总价值加上现金）。</p><ul><li>你可能需要执行多次 <code>SELECT</code> 语句。根据你如何设计你的数据表，你可能会发现 <code>GROUP BY</code>、<code>HAVING</code>、<code>SUM</code> 和/或 <code>WHERE</code> 子句对你有帮助。</li><li>你可能需要对每支股票调用 <code>lookup</code> 函数。</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sell"><a href="#sell"><code>sell</code></a><a href="#sell" class="hash-link" aria-label="Direct link to sell" title="Direct link to sell">​</a></h3><p>完成 <code>sell</code> 功能的实现，使其允许用户出售他们拥有的股票。</p><ul><li>要求用户输入股票代码，通过一个 <code>select</code> 下拉菜单实现，该菜单的 <code>name</code> 属性为 <code>symbol</code>。如果用户没有选择任何股票，或者提交后发现用户实际上不持有该股票的任何股份，则显示错误提示信息。</li><li>要求用户输入股份数量，通过一个文本输入框实现，该输入框的 <code>name</code> 属性为 <code>shares</code>。如果输入的不是正整数，或者用户试图出售超过其拥有的股份数量，则显示错误提示信息。</li><li>通过 <code>POST</code> 将用户的输入提交到 <code>/sell</code>。</li><li>完成后，将用户重定向到主页。</li><li>你无需担心竞争条件（或使用事务）。</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="history"><a href="#history"><code>history</code></a><a href="#history" class="hash-link" aria-label="Direct link to history" title="Direct link to history">​</a></h3><p>完成 <code>history</code> 功能的实现，使其显示一个 HTML 表格，汇总用户的所有交易记录，按行展示每次买入和卖出。</p><ul><li>对于每一条记录，清晰地显示股票是买入还是卖出，并包含股票代码、交易价格、买入或卖出的股份数量，以及交易发生的具体日期和时间。</li><li>你可能需要修改为 <code>buy</code> 功能创建的数据表，或者添加额外的数据表来补充信息。尽量避免数据冗余。</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="个人特色"><a href="#personal-touch">个人特色</a><a href="#个人特色" class="hash-link" aria-label="Direct link to 个人特色" title="Direct link to 个人特色">​</a></h3><p>实现至少一项你选择的个性化功能：</p><ul><li>允许用户更改密码。</li><li>允许用户向其帐户添加额外现金。</li><li>允许用户通过 <code>index</code> 本身购买更多股份或出售已拥有的股票股份，而无需手动输入股票代码。</li><li>要求用户的密码包含一定数量的字母、数字和/或符号。</li><li>实现一些其他具有可比范围的功能。</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="演练"><a href="#walkthrough">演练</a><a href="#演练" class="hash-link" aria-label="Direct link to 演练" title="Direct link to 演练">​</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="测试"><a href="#testing">测试</a><a href="#测试" class="hash-link" aria-label="Direct link to 测试" title="Direct link to 测试">​</a></h2><p>请务必手动测试你的 Web 应用，例如：</p><ul><li>注册一个新用户，并验证其投资组合页面是否能正确加载信息，</li><li>使用有效的股票代码请求报价，</li><li>多次购买一只股票，验证投资组合是否显示正确的总额，</li><li>出售全部或部分股票，再次验证投资组合，以及</li><li>验证你的历史记录页面是否显示已登录用户的所有交易。</li></ul><p>还要测试一些意外的用法，例如：</p><ul><li>在只需要数字的表单中输入字母字符串，</li><li>在只需要正数的表单中输入零或负数，</li><li>在只需要整数的表单中输入浮点值，</li><li>试图花费比用户拥有的现金更多的钱，</li><li>试图出售超过用户拥有的股份数量的股份，</li><li>输入无效的股票代码，以及</li><li>在 SQL 查询中包含潜在的危险字符，如 <code>&#x27;</code> 和 <code>;</code>。</li></ul><p>一旦你确信应用程序的所有部分都正常工作，请通过执行以下命令使用 <code>check50</code> 测试你的代码。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">check50 cs50/problems/2023/x/finance</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="样式"><a href="#style">样式</a><a href="#样式" class="hash-link" aria-label="Direct link to 样式" title="Direct link to 样式">​</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="工作人员的解决方案"><a href="#staffs-solution">工作人员的解决方案</a><a href="#工作人员的解决方案" class="hash-link" aria-label="Direct link to 工作人员的解决方案" title="Direct link to 工作人员的解决方案">​</a></h2><p>你可以随意以不同的方式设计自己的应用程序，但以下是工作人员解决方案的样子！</p><p><a href="https://finance.cs50.net/" target="_blank" rel="noopener noreferrer">https://finance.cs50.net/</a></p><p>请随意注册一个帐户并进行尝试。<strong>不要</strong>使用你在其他网站上使用的密码。</p><p>参考工作人员的 HTML 和 CSS 代码是<strong>可以接受的</strong>。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="提示"><a href="#hints">提示</a><a href="#提示" class="hash-link" aria-label="Direct link to 提示" title="Direct link to 提示">​</a></h2><ul><li>要将一个数值格式化为美元值（精确到小数点后两位），你可以在 Jinja 模板中使用 <code>usd</code> 过滤器（将值打印为 <code>{{ value | usd }}</code> 而不是 <code>{{ value }}</code>）。</li><li><code>cs50.SQL</code> 中有一个 <code>execute</code> 方法，它的第一个参数应该是一个 SQL 的 <code>str</code>。如果该 <code>str</code> 包含问号参数，需要绑定值，这些值可以作为额外的命名参数提供给 <code>execute</code>。例如，可以参考<code>login</code>的实现代码。<code>execute</code> 的返回值如下：<ul><li>如果 <code>str</code> 是一个 <code>SELECT</code>，那么 <code>execute</code> 返回一个包含零个或多个 <code>dict</code> 对象的 <code>list</code>，其中包含表示表字段和单元格的键和值。</li><li>如果 <code>str</code> 是一个 <code>INSERT</code>，并且插入数据的表包含一个自增的 <code>PRIMARY KEY</code>，那么 <code>execute</code> 返回新插入行的主键值。</li><li>如果 <code>str</code> 是一个 <code>DELETE</code> 或一个 <code>UPDATE</code>，那么 <code>execute</code> 返回由 <code>str</code> 删除或更新的行数。</li></ul></li><li>请注意，<code>cs50.SQL</code>会将你通过<code>execute</code>执行的查询记录在终端窗口中，方便你确认查询是否正确。</li><li>使用CS50的<code>execute</code>方法时，务必使用问号绑定的参数 (即<code>named</code>的<a href="https://www.python.org/dev/peps/pep-0249/#paramstyle" target="_blank" rel="noopener noreferrer">paramstyle</a>)，例如<code>WHERE ?</code>。切勿使用f-strings、<code>format</code>或<code>+</code> (字符串连接)，以避免SQL注入攻击。</li><li>如果你已经熟悉SQL，欢迎使用 <a href="https://docs.sqlalchemy.org/en/latest/index.html" target="_blank" rel="noopener noreferrer">SQLAlchemy Core</a> 或 <a href="https://flask-sqlalchemy.pocoo.org/" target="_blank" rel="noopener noreferrer">Flask-SQLAlchemy</a>（即 <a href="https://docs.sqlalchemy.org/en/latest/index.html" target="_blank" rel="noopener noreferrer">SQLAlchemy ORM</a>）来代替 <code>cs50.SQL</code>。</li><li>欢迎你向 <code>static/</code> 添加额外的静态文件。</li><li>在实现模板时，你可能需要查阅 <a href="https://jinja.palletsprojects.com/en/3.1.x/" target="_blank" rel="noopener noreferrer">Jinja 的文档</a>。</li><li>让其他人尝试（并尝试触发错误）你的网站是<strong>合理的</strong>。</li><li>你可以通过以下方式来美化你的网站：<ul><li><a href="https://bootswatch.com/" target="_blank" rel="noopener noreferrer">bootswatch.com</a></li><li><a href="https://getbootstrap.com/docs/5.1/content/" target="_blank" rel="noopener noreferrer">getbootstrap.com/docs/5.1/content</a></li><li><a href="https://getbootstrap.com/docs/5.1/components/" target="_blank" rel="noopener noreferrer">getbootstrap.com/docs/5.1/components</a> 和/或</li><li><a href="https://memegen.link/" target="_blank" rel="noopener noreferrer">memegen.link</a></li></ul></li><li>你可能会发现Flask和Jinja的文档对你很有帮助！</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="常见问题解答"><a href="#faqs">常见问题解答</a><a href="#常见问题解答" class="hash-link" aria-label="Direct link to 常见问题解答" title="Direct link to 常见问题解答">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="importerror-no-module-named-application"><a href="#importerror-no-module-named-application">ImportError: No module named ‘application’</a><a href="#importerror-no-module-named-application" class="hash-link" aria-label="Direct link to importerror-no-module-named-application" title="Direct link to importerror-no-module-named-application">​</a></h3><p>默认情况下，<code>flask</code> 会在当前工作目录中查找名为 <code>app.py</code> 的文件（因为我们已将环境变量 <code>FLASK_APP</code> 的值配置为 <code>app.py</code>）。如果看到此错误，则很可能你在错误的目录中运行了 <code>flask</code>！</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="oserror-errno-98-address-already-in-use"><a href="#oserror-errno-98-address-already-in-use">OSError: <!-- -->[<!-- -->Errno 98<!-- -->]<!-- --> Address already in use</a><a href="#oserror-errno-98-address-already-in-use" class="hash-link" aria-label="Direct link to oserror-errno-98-address-already-in-use" title="Direct link to oserror-errno-98-address-already-in-use">​</a></h3><p>如果在运行<code>flask</code>时遇到此错误，很可能是因为你已经在另一个标签页运行了<code>flask</code>。请先使用Ctrl+C终止之前的进程，再重新启动<code>flask</code>。如果没有其他标签页，请执行<code>fuser -k 8080/tcp</code>命令来结束占用8080端口的进程。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="如何提交"><a href="#how-to-submit">如何提交</a><a href="#如何提交" class="hash-link" aria-label="Direct link to 如何提交" title="Direct link to 如何提交">​</a></h2><p>在您的终端中，运行以下命令来提交您的代码。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">submit50 cs50/problems/2023/x/finance</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/curriculum-resource/cs50x/cs50x_zh/lecture10/problem set"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">问题集</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/curriculum-resource/cs50x/cs50x_zh/lecture10/practice problems"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">练习题目</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#背景" class="table-of-contents__link toc-highlight">背景</a></li><li><a href="#开始" class="table-of-contents__link toc-highlight">开始</a><ul><li><a href="#运行" class="table-of-contents__link toc-highlight">运行</a></li><li><a href="#理解" class="table-of-contents__link toc-highlight">理解</a></li></ul></li><li><a href="#规范" class="table-of-contents__link toc-highlight">规范</a><ul><li><a href="#register" class="table-of-contents__link toc-highlight"><code>register</code></a></li><li><a href="#quote" class="table-of-contents__link toc-highlight"><code>quote</code></a></li><li><a href="#buy" class="table-of-contents__link toc-highlight"><code>buy</code></a></li><li><a href="#index" class="table-of-contents__link toc-highlight"><code>index</code></a></li><li><a href="#sell" class="table-of-contents__link toc-highlight"><code>sell</code></a></li><li><a href="#history" class="table-of-contents__link toc-highlight"><code>history</code></a></li><li><a href="#个人特色" class="table-of-contents__link toc-highlight">个人特色</a></li></ul></li><li><a href="#演练" class="table-of-contents__link toc-highlight">演练</a></li><li><a href="#测试" class="table-of-contents__link toc-highlight">测试</a></li><li><a href="#样式" class="table-of-contents__link toc-highlight">样式</a></li><li><a href="#工作人员的解决方案" class="table-of-contents__link toc-highlight">工作人员的解决方案</a></li><li><a href="#提示" class="table-of-contents__link toc-highlight">提示</a></li><li><a href="#常见问题解答" class="table-of-contents__link toc-highlight">常见问题解答</a><ul><li><a href="#importerror-no-module-named-application" class="table-of-contents__link toc-highlight">ImportError: No module named ‘application’</a></li><li><a href="#oserror-errno-98-address-already-in-use" class="table-of-contents__link toc-highlight">OSError: [Errno 98] Address already in use</a></li></ul></li><li><a href="#如何提交" class="table-of-contents__link toc-highlight">如何提交</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">CS学习社区</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">路线图</a></li></ul></div><div class="col footer__col"><div class="footer__title">社区</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/WqwvTrEQmA" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">捐赠</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/donate">捐赠我们</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyleft © 2025 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.035397b9.js"></script>
<script src="/assets/js/main.2f696ece.js"></script>
</body>
</html>