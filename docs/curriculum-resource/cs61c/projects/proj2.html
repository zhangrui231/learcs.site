<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-curriculum-resource/cs61c/projects/proj2" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Project2 | CS自学社区</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://www.learncs.site/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://www.learncs.site/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://www.learncs.site/docs/curriculum-resource/cs61c/projects/proj2"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Project2 | CS自学社区"><meta data-rh="true" name="description" content="Background"><meta data-rh="true" property="og:description" content="Background"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://www.learncs.site/docs/curriculum-resource/cs61c/projects/proj2"><link data-rh="true" rel="alternate" href="https://www.learncs.site/docs/curriculum-resource/cs61c/projects/proj2" hreflang="en"><link data-rh="true" rel="alternate" href="https://www.learncs.site/docs/curriculum-resource/cs61c/projects/proj2" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="CS自学社区 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="CS自学社区 Atom Feed">



<link rel="preconnect" href="https://hm.baidu.com">
<script async src="https://hm.baidu.com/hm.js?c106b2729592653e5e0c26db5e5d3142"></script>
<script src="https://sf-cdn.coze.com/obj/unpkg-va/flow-platform/chat-app-sdk/0.1.0-beta.4/libs/oversea/index.js"></script>
<script>document.addEventListener("DOMContentLoaded",(function(){console.log("DOMContentLoaded coze"),new CozeWebSDK.WebChatClient({config:{bot_id:"7380921096788590598"},componentProps:{title:"AI 助教"}})}))</script><link rel="stylesheet" href="/assets/css/styles.0cbaf963.css">
<link rel="preload" href="/assets/js/runtime~main.6b2cf2bb.js" as="script">
<link rel="preload" href="/assets/js/main.f7f68978.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="TeachYourselfCS" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="TeachYourselfCS" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">TeachYourselfCS</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">自学路线</a><a class="navbar__item navbar__link" href="/blog">博客</a><a class="navbar__item navbar__link" href="/community">社区</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">前言</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/roadmap">路线图</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/课程资源">课程资源</a><button aria-label="Toggle the collapsible sidebar category &#x27;课程资源&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/cs50x">cs50x</a><button aria-label="Toggle the collapsible sidebar category &#x27;cs50x&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/cs61a">cs61a</a><button aria-label="Toggle the collapsible sidebar category &#x27;cs61a&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/cs61b">cs61b</a><button aria-label="Toggle the collapsible sidebar category &#x27;cs61b&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/curriculum-resource/cs61c">cs61c</a><button aria-label="Toggle the collapsible sidebar category &#x27;cs61c&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/curriculum-resource/cs61c/syllabus">syllabus-课程大纲</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/curriculum-resource/cs61c/labs/lab00">labs</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/curriculum-resource/cs61c/projects/proj1">projects</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/curriculum-resource/cs61c/projects/proj1">Project1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/curriculum-resource/cs61c/projects/proj2">Project2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/curriculum-resource/cs61c/projects/proj3">Project3</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/curriculum-resource/cs61c/projects/proj4">Project4</a></li></ul></li></ul></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/课程资源"><span itemprop="name">课程资源</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/curriculum-resource/cs61c"><span itemprop="name">cs61c</span></a><meta itemprop="position" content="2"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">projects</span><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Project2</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Project2</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="background">Background<a href="#background" class="hash-link" aria-label="Direct link to Background" title="Direct link to Background">​</a></h2><p><strong>Part A Due Thursday, October 1st</strong><br>
<strong>Part B Due Monday, October 5th</strong></p><p>At the end of this project you will have written all RISC-V assembly code necessary to run a simple Artificial Neural Network (ANN) on the Venus RISC-V simulator. In part A you will implement the basic operations such as a vector dot product, matrix-matrix multiplication, the argmax and an activation function. In part B you will combine these basic functions in order to load a pretrained network and execute it to classify handwritten digets from the MNIST benchmark set.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="objectives">Objectives<a href="#objectives" class="hash-link" aria-label="Direct link to Objectives" title="Direct link to Objectives">​</a></h3><ul><li>TSWBAT (“<strong>T</strong>he <strong>S</strong>tudent <strong>W</strong>ill <strong>B</strong>e <strong>A</strong>ble <strong>T</strong>o”) implement numerical computation functions in RISC-V assembly that follow calling the convention.</li><li>TSWBAT call functions in RISC-V assembly.</li><li>TSWBAT write RISC-V assembly programs that utilize the heap and interact with files.</li><li>TSWBAT write a test suite that covers corner cases and automatically checks for the correct operation of the RISC-V functions implemented.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="getting-started">Getting Started<a href="#getting-started" class="hash-link" aria-label="Direct link to Getting Started" title="Direct link to Getting Started">​</a></h3><p>Please follow the directions here to get a repository: <a href="https://web.archive.org/web/20220121162944/https://docs.google.com/forms/d/e/1FAIpQLSe2JEIVWc1HMV-gadLvrL2jM42Zzf3_S3BixjJluRWB2IToBA/viewform?usp=sf_link" target="_blank" rel="noopener noreferrer">https://docs.google.com/forms/d/e/1FAIpQLSe2JEIVWc1HMV-gadLvrL2jM42Zzf3<!-- -->_<!-- -->S3BixjJluRWB2IToBA/viewform?usp=sf<!-- -->_<!-- -->link</a>.</p><p>Then, clone your repository locally and add the starter remote</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ git clone https://github.com/61c-student/fa20-proj2-TEAMNAME.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ cd fa20-proj2-TEAMNAME</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ git remote add starter https://github.com/61c-teach/fa20-proj2-starter.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you ever want to pull <strong>updated</strong> starter code, you’d execute the following command:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ git pull starter master</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="java-and-python-3-setup">Java and Python 3 Setup<a href="#java-and-python-3-setup" class="hash-link" aria-label="Direct link to Java and Python 3 Setup" title="Direct link to Java and Python 3 Setup">​</a></h3><p>Your computer needs be able to run some Java and Python 3 scripts for this project. Most of your computers should be set up properly from 61A and 61B. If not, these <a href="https://web.archive.org/web/20220121162944/https://cs61a.org/lab/lab00/#install-python-3" target="_blank" rel="noopener noreferrer">CS61A</a> and <a href="https://web.archive.org/web/20220121162944/http://www-inst.eecs.berkeley.edu/~cs61b/fa19/materials/lab/lab1b/lab1b.html" target="_blank" rel="noopener noreferrer">CS61B</a> setup instructions should help. You are also welcome to work on the hives.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="part-a-mathematical-functions">Part A: Mathematical Functions<a href="#part-a-mathematical-functions" class="hash-link" aria-label="Direct link to Part A: Mathematical Functions" title="Direct link to Part A: Mathematical Functions">​</a></h2><p><strong>Due Thursday, October 1st</strong></p><p>In this part, you will implement some of the matrix operations used by neural networks These include a <a href="https://web.archive.org/web/20220121162944/https://en.wikipedia.org/wiki/Dot_product" target="_blank" rel="noopener noreferrer">dot product</a>, <a href="https://web.archive.org/web/20220121162944/https://en.wikipedia.org/wiki/Matrix_multiplication" target="_blank" rel="noopener noreferrer">matrix multiplication</a>, an element-wise <a href="https://web.archive.org/web/20220121162944/https://en.wikipedia.org/wiki/Rectifier_(neural_networks)" target="_blank" rel="noopener noreferrer">rectifier function (ReLU)</a>, and an <a href="https://web.archive.org/web/20220121162944/https://en.wikipedia.org/wiki/Arg_max" target="_blank" rel="noopener noreferrer">argmax function</a> for vectors. But first we will start with a simple <code>abs</code> function which calculates the absolute value of a given integer.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="general-advice-and-grading">General Advice and Grading<a href="#general-advice-and-grading" class="hash-link" aria-label="Direct link to General Advice and Grading" title="Direct link to General Advice and Grading">​</a></h3><ul><li>Pay close attention to the function definition in the assembly template.</li><li>Implement all argument checks required and call <code>exit2</code> to abort with the correct error code.</li><li>Pay close attention to the <a target="_blank" href="/assets/files/RISCV_Calling_Convention-fb38c62ecbe1cc07ab5b25522d6192e4.pdf">calling convention</a>.</li><li>While the unit tests will run the <a href="https://web.archive.org/web/20220121162944/https://inst.eecs.berkeley.edu/~cs61c/sp21/resources/venus-reference#calling-convention-checker" target="_blank" rel="noopener noreferrer">calling convention checker</a> there are many errors that the automated check might miss.</li><li>Try to write a unit test for every corner case in the specification that you can think of.</li><li>While the unit tests display how much of your implementation is covered by your tests, 100% coverage of your implementation does <strong>not</strong> imply that all corner cases of the spec are covered.</li><li>This semester you will be graded on the quality of your tests, for part A, your unit tests should cover 100% of your custom code.</li><li>For part B, we require 100% coverage for <code>read_matrix</code> and <code>write_matrix</code>.</li><li>The autograder will give you the result of a basic sanity test but will not give you your complete grade.</li><li>You are responsible for developing any tests you need to make sure that you meet the requirements of the project.</li><li>Even though we have given you a testing framework which allows for the calling convention feature of Venus to run, we still recommend that you write thorough a calling convention test for each function.</li><li>The autograder is rate limited: each submission consumes a token, you will be given 6 tokens; each token will regenerate after twelve hours; get started early to limit the number of last-minute resubmissions.</li><li>If you do not have a token, that submission will not be graded–even after the deadline has passed.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="task-0-getting-started-with-the-abs-function">Task 0: Getting Started with the Abs Function<a href="#task-0-getting-started-with-the-abs-function" class="hash-link" aria-label="Direct link to Task 0: Getting Started with the Abs Function" title="Direct link to Task 0: Getting Started with the Abs Function">​</a></h3><p>The <strong>Purpose</strong> of this section is to get you acquainted with the recommended workflow using the unit testing framework and the Venus simulator to better prepare you to complete this project successfully. Follow along with the video linked below or continue reading the written spec.</p><p><a href="https://web.archive.org/web/20220121162944/https://inst.eecs.berkeley.edu/~cs61c/fa20/lectures/videos?ytvid=Q4E8trPRJHk" target="_blank" rel="noopener noreferrer">Task 0: Getting Started with the Abs Function Video</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="running-tests">Running Tests<a href="#running-tests" class="hash-link" aria-label="Direct link to Running Tests" title="Direct link to Running Tests">​</a></h4><p>We want to start by running all the given sanity tests to verify that they fail since we haven’t started implementing anything. In order todo that run the following commands:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd unittests</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">python3 -m unittest unittests.py -v</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>To see the specific assembly tests that the testing framework has generated <code>cd assembly</code> and view all the different <code>.s</code> test files directly.</p><p>For now let’s remove all the assembly tests and worry just about our tests targeting the <code>Abs</code> function. To remove all tests and rerun just the <code>Abs</code> function tests run the following:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rm -rf assembly</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">python3 -m unittest unittests.TestAbs -v</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><em>Hint</em>: The command to run the unit tests has two options to keep in mind <code>unittests.&lt;testName&gt;</code> targets a specific suite of tests and <code>-v</code> triggers verbose output.</p><p><em>Note</em>: The unit tests are using the standard <a href="https://web.archive.org/web/20220121162944/https://docs.python.org/3/library/unittest.html" target="_blank" rel="noopener noreferrer">Python unittest library</a>.</p><p>Notice that <code>test_one</code> fails while <code>test_zero</code> passes; now let’s debug this function using the Venus Web Interface!</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="debugging-tests-with-venus-web-interface">Debugging Tests with Venus Web Interface<a href="#debugging-tests-with-venus-web-interface" class="hash-link" aria-label="Direct link to Debugging Tests with Venus Web Interface" title="Direct link to Debugging Tests with Venus Web Interface">​</a></h4><p>Using the Venus web interface, we can step through our assembly code and inspect registers to find out why the <code>test_one</code> for the <code>Abs</code> function is failing. As the first step we must first upload our files to the Venus Web Interface</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="mounting-repository-to-venus-web-interface">Mounting Repository to Venus Web Interface<a href="#mounting-repository-to-venus-web-interface" class="hash-link" aria-label="Direct link to Mounting Repository to Venus Web Interface" title="Direct link to Mounting Repository to Venus Web Interface">​</a></h5><p>Run the following command from your <strong>local terminal</strong> within the <strong>root</strong> of your project 2 repository</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">java -jar tools/venus.jar . -dm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>When you run it, you should see a Javalin message, launching the server and listening on <code>http://localhost:6161/</code> Then run the following command from your <strong>Venus Web Interface Terminal</strong>.</p><p><em>Note</em>: We recommend using the Chrome browser. Other browsers may work but have not been tested.</p><p>This will mount the repository and give you access to all your project files from within the Venus Web Interface to edit, run, and debug! Navigate to the Files tab on Venus to see your repositories contents.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="alternative-zipping-files-to-upload">(Alternative) Zipping Files to Upload<a href="#alternative-zipping-files-to-upload" class="hash-link" aria-label="Direct link to (Alternative) Zipping Files to Upload" title="Direct link to (Alternative) Zipping Files to Upload">​</a></h5><p><em>Use this in case the file mounting does not work on your computer.</em></p><p>To see full list of commands supported by Venus you can run <code>help</code>, but we’ve included some of the ones related to zipping below</p><ul><li><code>upload</code>: Opens up a window allowing you to pick files from your local machine to upload to Venus</li><li><code>unzip &lt;ZIP_FILENAME&gt;</code>: Unzips a <code>.zip</code> file into the current working directory.</li><li><code>zip &lt;ZIP_FILENAME&gt; &lt;FILENAME_1&gt; &lt;FILENAME_2&gt; ...</code> : Opens up a window allowing you to download a zip file called <code>ZIP_FILE_NAME</code>, which contains all the specified files and/or folders. Folders are added to the zip file recursively.</li></ul><p>When uploading files to the Venus web interface, you’ll want to zip ONLY your <code>src</code>, <code>inputs</code>, and <code>unittests/assembly</code> directories locally, use the <code>upload</code> in the Venus terminal to upload that zip file, and then <code>unzip</code> to retrieve all your project files.</p><p>Alternatively, you can upload individual files to work with. However, you’ll need to make sure the directory structure is the same as the starter repo, or be prepared to edit the relative paths given to you in the starter code for inputs and <code>.import</code> statements.</p><p><strong>Note</strong>: We <strong>HIGHLY</strong> recommend that you regularly copy the changes you’ve made in the Venus web interface to your local machine to save them. If you accidentally close the browser window or run <code>edit</code> before running <code>save</code>, you could lose a large amount of progress if you do not enable ‘Save on Close’. This is one of the primary reasons we recommend running with the .jar file for most of your development, and only turning to Venus to debug one specific file at a time.<!-- -->*<!-- -->*</p><p><strong>Note2</strong>: If you do use ‘Save on Close’ (which you all should), be aware that there is a limit to the size of its state which it can store (limited by your browsers localStorage). This is why we say you should only upload the specified directories.<!-- -->*<!-- -->*</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="debugging-test_one-on-venus-web-interface">Debugging <code>test_one</code> on Venus Web Interface<a href="#debugging-test_one-on-venus-web-interface" class="hash-link" aria-label="Direct link to debugging-test_one-on-venus-web-interface" title="Direct link to debugging-test_one-on-venus-web-interface">​</a></h4><p>Navigate to the <strong>Files</strong> tab on Venus to see your files, and navigate to the <code>abs.s</code> file in <code>proj2/src/abs.s</code> and click <strong>edit</strong>.</p><p>Then using an <code>ebreak</code> statement set a breakpoint right <strong>above</strong> the command <code>mv a0, zero</code></p><p><em>Note</em>: This is one out of two ways to set breakpoints in Venus. The other way is to click on any instruction (besides <code>ebreak</code>) in the simulator view. If you click on an <code>ebreak</code> instruction, it will <strong>disable</strong> the breakpoint instead. One scenario where this comes in handy is when you added an <code>ebreak</code> inside a loop and - after observing the first few iterations - want to disable it to let the loop finish executing.</p><p>Now before running <code>test_one</code>, go back to the <strong>Files</strong> tab and hit <strong>Save</strong> on the <code>abs.s</code> file. After saving, navigate to <code>unittests/assembly/TestAbs_test_one_test.s</code> and click <strong>VDB</strong>. This will launch you into the <strong>Simulator</strong> tab!</p><p><em>Note</em>: When the editor tab is active, you can also use <code>Ctrl + S</code> to save the open file.</p><p>Now using your basic Venus knowledge from lab3 you can run and step through the test to see <code>a0</code> being overridden from a <code>1</code> to a <code>0</code>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="editing-the-abs-function-to-pass-test_one">Editing the Abs Function to pass <code>test_one</code><a href="#editing-the-abs-function-to-pass-test_one" class="hash-link" aria-label="Direct link to editing-the-abs-function-to-pass-test_one" title="Direct link to editing-the-abs-function-to-pass-test_one">​</a></h4><p>Let’s <strong>remove</strong> the statement <code>mv a0, zero</code> from <code>abs.s</code> and <strong>rerun</strong> <code>test_one</code>.</p><p>Observe that <code>test_one</code> indeed does pass after removing the one line of code; however, the absolute value function is still incorrect! This toy example is to show that <strong>your code is only as good as how thorough your test cases are</strong>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="adding-more-tests-for-abs-function">Adding More Tests for Abs Function<a href="#adding-more-tests-for-abs-function" class="hash-link" aria-label="Direct link to Adding More Tests for Abs Function" title="Direct link to Adding More Tests for Abs Function">​</a></h4><p>Let’s add another test to check if the function works with negative values. To do this <strong>open</strong> the file <code>unittests/unittest.py</code></p><p><strong>Add</strong> this test underneath <code>class TestAbs(TestCase)</code></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">def test_minus_one(self):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    t = AssemblyTest(self, &quot;abs.s&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    t.input_scalar(&quot;a0&quot;, -1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    t.call(&quot;abs&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    t.check_scalar(&quot;a0&quot;, 1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    t.execute()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><em>Note</em>: By modifying just <code>t.input_scalar</code> and <code>t.check_scalar</code> we can build a brand new test!</p><p>Now <strong>rerun</strong> just the <code>Abs</code> Function tests to verify that this test now fails while <code>test_zero</code> and <code>test_one</code> pass. This is an important step in test driven development to make sure that the tests we wrote fail before implementing the function:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">python3 -m unittest unittests.TestAbs -v</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="editing-abs-function-to-pass-test_minus_one">Editing Abs Function to pass <code>test_minus_one</code><a href="#editing-abs-function-to-pass-test_minus_one" class="hash-link" aria-label="Direct link to editing-abs-function-to-pass-test_minus_one" title="Direct link to editing-abs-function-to-pass-test_minus_one">​</a></h4><p><strong>Insert</strong> the following code into <code>abs.s</code></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    # branch if positive</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bge a0, zero, done</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # invert a if negative</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sub a0, zero, a0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now all <code>Abs</code> Function tests should pass! Let this be a warning to write good tests and produce well commented code. Happy coding!</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="background-knowledge">Background Knowledge<a href="#background-knowledge" class="hash-link" aria-label="Direct link to Background Knowledge" title="Direct link to Background Knowledge">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="matrix-format">Matrix Format<a href="#matrix-format" class="hash-link" aria-label="Direct link to Matrix Format" title="Direct link to Matrix Format">​</a></h4><p>In this project, all two-dimensional matrices will be stored as one-dimensional arrays in <a href="https://web.archive.org/web/20220121162944/https://en.wikipedia.org/wiki/Row-_and_column-major_order" target="_blank" rel="noopener noreferrer">row-major order</a>. Row-major order stores all values in a row of a matrix consecutively and concatenates all row vectors into a single 1-D array starting from the top-most row. The alternative column-major order stores all values in a column of a matrix consecutively and concatenates all columns vectors into a single 1-D array starting from the left-most column. Our choice of row-major order follows the convention of most C/C++ programs.</p><p><img loading="lazy" src="/assets/images/row_major-31a45e8e4468c6739e8ea4b594b6e613.png" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="array-strides">Array Strides<a href="#array-strides" class="hash-link" aria-label="Direct link to Array Strides" title="Direct link to Array Strides">​</a></h4><p>The <a href="https://web.archive.org/web/20220121162944/https://en.wikipedia.org/wiki/Stride_of_an_array" target="_blank" rel="noopener noreferrer">stride of an array</a> is the number of bytes between the beginning of consecutive array elements. So far all arrays we have worked with had unit stride, meaning that there is not gap between consecutive elements and the stride is <code>sizeof(element)</code>.</p><p>In this project, all strides will be given in <em>multiples of the element size</em> instead of bytes. Thus the unit stride is just <code>1</code>.</p><p>We are going to use the stride to define column vectors in our matrix (stored in row-major order) without having to copy any elements. Since row elements are stored consecutively, a row vector is just an array with unit stride. However, if we want to get the column vector, we need to skip over the end of the current row and the beginning of the next row to get to the next element in the column. Thus the stride will be the number of elements in a row.</p><p>Here is a practical example: We have the vector <code>int *a</code> with 3 elements.</p><ul><li>If the stride is 1, then our vector elements are <code>*(a)</code>, <code>*(a + 1)</code>, and <code>*(a + 2)</code>, in other words <code>a[0]</code>, <code>a[1]</code>, and <code>a[2]</code>.</li><li>However, if our stride is 4, then our elements are at <code>*(a)</code>, <code>*(a + 4)</code>, and <code>*(a + 8)</code> or in other words <code>a[0]</code>, <code>a[4]</code>, and <code>a[8]</code>.</li></ul><p>To summarize: In C code, to access the <code>i</code>th element of a vector <code>int *a</code> with stride <code>s</code>, we use <code>*(a + i * s)</code>, or <code>a[i * s]</code>. We leave it up to you to translate this memory access pattern into RISC-V for the dot product in task 3.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="task-1-relu">Task 1: ReLU<a href="#task-1-relu" class="hash-link" aria-label="Direct link to Task 1: ReLU" title="Direct link to Task 1: ReLU">​</a></h3><p><strong>Implement</strong> the <code>relu</code> function in <code>src/relu.s</code> which takes in a 1D vector and applies the <a href="https://web.archive.org/web/20220121162944/https://en.wikipedia.org/wiki/Rectifier_(neural_networks)" target="_blank" rel="noopener noreferrer">rectifier function</a> on each element, modifying it in place. This is equivalent to setting every negative value in the vector to 0. Be careful to follow the specification in the header comment in the <code>relu.s</code> file.</p><p><em>Note</em>: Our <code>relu</code> function operates on a 1-D vector, not a 2-D matrix. Since <code>relu</code> works on an element by element basis, independent of the position of that element in the matrix, we are able to treat our 2-D matrix which is stored in row-major format as a 1-D vector.</p><p><em>Hint</em>: You can run the unit test that we provide you for this task by running the following command in the <code>unittest</code> directory:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">python3 -m unittest unittests.TestRelu -v</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><em>Hint</em>: to achieve 100% test coverage you will need to add your own tests to cover all the corner cases in the spec. Think carefully about every branch in your implementation.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="task-2-argmax">Task 2: ArgMax<a href="#task-2-argmax" class="hash-link" aria-label="Direct link to Task 2: ArgMax" title="Direct link to Task 2: ArgMax">​</a></h3><p>The <a href="https://web.archive.org/web/20220121162944/https://en.wikipedia.org/wiki/Arg_max" target="_blank" rel="noopener noreferrer">argmax</a> function returns the index of the largest element in a vector. It will be used at the end of our neural network to select the most likely classification.</p><p><strong>Implement</strong> the <code>argmax</code> function in <code>src/argmax.s</code> which takes in a 1D vector and returns the index of the largest element. Be careful to follow the specification in the header comment in the <code>argmax.s</code> file.</p><p><em>Hint</em>: You can run the unit test that we provide you for this task by running the following command in the <code>unittest</code> directory. Fill in the <code>TODOs</code> in <code>unittests.py</code> to make it work:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">python3 -m unittest unittests.TestArgmax -v</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="task-31-dot-product">Task 3.1: Dot Product<a href="#task-31-dot-product" class="hash-link" aria-label="Direct link to Task 3.1: Dot Product" title="Direct link to Task 3.1: Dot Product">​</a></h3><p>The <a href="https://web.archive.org/web/20220121162944/https://en.wikipedia.org/wiki/Dot_product" target="_blank" rel="noopener noreferrer">dot product</a> of two vectors and is defined as , where is the th element of .</p><p><strong>Implement</strong> the <code>dot</code> function in <code>src/dot.s</code> which takes in two vectors and returns their dot product. Be careful to follow the specification in the header comment in the <code>dot.s</code> file.</p><p><em>Note</em>: This function takes in the stride for each vector as an argument. Make sure you’re considering this when calculating your memory addresses. Consider re-reading the section on <a href="#array-strides">array strides</a> in the background materials.</p><p><em>Note</em>: We do not expect you to handle overflow when multiplying. This means you will not need to use the <code>mulh</code> instruction.</p><p><em>Note</em>: keep in mind that - like in C - there is no way for the function to verify that the vector length argument actually matches the size of memory allocated for the vector.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="testing-dot-product">Testing: Dot Product<a href="#testing-dot-product" class="hash-link" aria-label="Direct link to Testing: Dot Product" title="Direct link to Testing: Dot Product">​</a></h4><p>You can run the unit test that we provide you for this task by running the following command in the <code>unittest</code> directory. Fill in the <code>TODOs</code> in <code>unittests.py</code> to make it work:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">python3 -m unittest unittests.TestDot -v</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>A basic test provides the <code>dot</code> function with two vectors <code>v0</code> and <code>v1</code> of size <code>9</code> and unit stride. We thus expect the following result:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">v0 = [1, 2, 3, 4, 5, 6, 7, 8, 9]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">v1 = [1, 2, 3, 4, 5, 6, 7, 8, 9]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dot(v0, v1) = 1 * 1 + 2 * 2 + ... + 9 * 9 = 285</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Implement this test using the methods provided by the <code>AssemblyTest</code> class.</p><p>Now fill in the <code>test_stride</code> function. What should happen if you change the length of the vectors to 3 and the stride of the second vector <code>v1</code> to 2, without changing the values in static memory? Now, the vectors contain the following:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">v0 = [1, 2, 3]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">v1 = [1, 3, 5]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dot(v0, v1) = 1 * 1 + 2 * 3 + 3 * 5 = 22</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><em>Note</em>: <code>v1</code> now has stride 2, so we skip over elements in memory when calculating the dot product. However, the pointer <code>v1</code> still points to the same place as before: the start of the sequence of integers 1 to 9 in memory.</p><p><em>Hint</em>: as before, you will need to add multiple test to achieve 100% coverage.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="task-32-matrix-multiplication">Task 3.2: Matrix Multiplication<a href="#task-32-matrix-multiplication" class="hash-link" aria-label="Direct link to Task 3.2: Matrix Multiplication" title="Direct link to Task 3.2: Matrix Multiplication">​</a></h3><p>The <a href="https://web.archive.org/web/20220121162944/https://en.wikipedia.org/wiki/Matrix_multiplication" target="_blank" rel="noopener noreferrer">matrix multiplication</a> of two matrices and results in the output matrix , where is equal to the dot product of the -th row of and the -ith column of .</p><p><em>Note</em>: If the dimensions of are , and the dimensions of are , then the dimensions of must be .</p><p><em>Note</em>: Unlike integer multiplication, matrix multiplication is not commutative, .</p><p><strong>Implement</strong> the <code>matmul</code> function in <code>src/matmul.s</code> which takes in two matrices, <code>m0</code> and <code>m1</code> in row-major format and multiplies them, storing the resulting matrix <code>C</code> in pre-allocated memory. You must use the <code>dot</code> function from the previous task to calculate each entry of the result matrix. Be careful to follow the specification in the header comment in the <code>matmul.s</code> file.</p><p><em>Note</em>: <code>m0</code> is the left matrix, and <code>m1</code> is the right matrix.</p><p><em>Hint</em>: The stride for row vectors will be different than the stride for column vectors when calling the <code>dot</code> function. Consider re-reading the section on <a href="#array-strides">array strides</a> in the background materials.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="testing-matrix-multiplication">Testing: Matrix Multiplication<a href="#testing-matrix-multiplication" class="hash-link" aria-label="Direct link to Testing: Matrix Multiplication" title="Direct link to Testing: Matrix Multiplication">​</a></h4><p>We only provide a skeleton test for matrix multiplication. By now you should be familiar with how to use the testing framework.</p><p>You can run the unit test by running the following command in the <code>unittest</code> directory:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">python3 -m unittest unittests.TestMatmul -v</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><em>Hint</em>: as before, you will need to add multiple test to achieve 100% coverage.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="submitting-your-code">Submitting Your Code<a href="#submitting-your-code" class="hash-link" aria-label="Direct link to Submitting Your Code" title="Direct link to Submitting Your Code">​</a></h3><p>Please submit using Gradescope to Project 2A, using the GitHub submission option to ensure that your files are in the right place.</p><p><em>Note</em>: you should not add any <code>.import</code> statements to the starter code. For example, when the autograder is importing <code>matmul.s</code>, it will also import <code>dot.s</code> and <code>utils.s</code>, so your <code>matmul.s</code> file itself should never contain any <code>.import</code> statements.</p><p><em>Note</em>: also make sure to not have any <code>ecall</code> instructions in your code. Use the functions we provide in <code>utils.s</code>.</p><p><em>Hint</em>: make sure to consult the <a href="#general-advice-and-grading">general advice and grading</a> section if you want to improve your submission.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="part-b-file-operations-and-main">Part B: File Operations and Main<a href="#part-b-file-operations-and-main" class="hash-link" aria-label="Direct link to Part B: File Operations and Main" title="Direct link to Part B: File Operations and Main">​</a></h2><p><strong>Due Monday, October 5th</strong></p><p>In this part, you will implement functions to read matrices from and write matrices to binary files. Then you will combine all individual functions to run a pre-trained MNIST digit classifier.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="background-knowledge-1">Background Knowledge<a href="#background-knowledge-1" class="hash-link" aria-label="Direct link to Background Knowledge" title="Direct link to Background Knowledge">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="neural-networks">Neural Networks<a href="#neural-networks" class="hash-link" aria-label="Direct link to Neural Networks" title="Direct link to Neural Networks">​</a></h3><p>At a basic level, a neural networks tries to approximate a (non-linear) function that maps your input into a desired output. A basic neuron consists of a weighted linear combination of the input, followed by a non-linearity – for example, a threshold. Consider the following neuron, which implements the logical <code>AND</code> operation:</p><p><img loading="lazy" src="/assets/images/neuron-52ebdfeb5a38d67d5de11621b3950090.png" class="img_ev3q"></p><p>It is easy to see that for , , the linear combination , which is less than the threshold of 1 and will result in a 0 output. With an input , or , the linear combination will results in , which is less than 1 and result in a 0 output. Similarly, , will result in , which is greater than the threshold and will result in a 1 output! What is interesting is that the simple neuron operation can also be described as an inner product between the vector and the weights vector followed by as thresholding, non-linear operation.</p><p>More complex functions can not be described by a simple neuron alone. We can extend the system into a network of neurons, in order to approximate the complex functions. For example, the following 2 layer network approximates the logical function <code>XOR</code>:</p><p><img loading="lazy" src="/assets/images/XOR-7155485e965ff4f872ef70fd46badffa.png" class="img_ev3q"></p><p>The above is a 2 layer network. The network takes 2 inputs, computes 2 intemediate values, and finally computes a single final output.</p><p>It can be written as matrix multiplications with matrices <code>m_0</code> and <code>m_1</code> with thresholding operations in between as shown below:</p><p><img loading="lazy" src="/assets/images/mtx-7a9b0a0b8feab8eb75945c5a39bc7867.png" class="img_ev3q"></p><p>Convince yourself that this implements an <code>XOR</code> for the appropriate inputs!</p><p>You are probably wondering how the weights of the network were determined? This is beyond the scope of this project, and we would encourage you to take advanced classes in numerical linear algebra, signal processing, machine learning and optimization. We will only say that the weights can be trained by giving the network pairs of correct inputs and outputs and changing the weights such that the error between the outputs of the network and the correct outputs is minimized. Learning the weights is called: “Training”. Using the weights on inputs is called “Inference”. We will only perform inference, and you will be given weights that were pre-trained by your dedicated TA’s.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="handwritten-digit-classification">Handwritten Digit Classification<a href="#handwritten-digit-classification" class="hash-link" aria-label="Direct link to Handwritten Digit Classification" title="Direct link to Handwritten Digit Classification">​</a></h3><p>In this project we will implement a similar, but slightly more complex network which is able to classify handwritten digits. As inputs, we will use the <a href="https://web.archive.org/web/20220121162944/http://yann.lecun.com/exdb/mnist/" target="_blank" rel="noopener noreferrer">MNIST</a> data set, which is a dataset of 60,000 28x28 images containing handwritten digits ranging from 0-9. We will treat these images as “flattened” input vectors of size 784 (<code>= 28 * 28</code>). In a similar way to the example before, we will perform matrix multiplications with pre-trained weight matrices <code>m_0</code> and <code>m_1</code>. Instead of thresholding we will use two different non-linearities: The <code>ReLU</code> and <code>ArgMax</code> functions. Details will be provided in descriptions of the individual tasks.</p><p><img loading="lazy" src="/assets/images/MNIST-9c1e669bace6899ac51da8b5cdecbcb0.png" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="matrix-file-format">Matrix File Format<a href="#matrix-file-format" class="hash-link" aria-label="Direct link to Matrix File Format" title="Direct link to Matrix File Format">​</a></h4><p>We will use a custom binary format to store the size and integer values of a matrix. We also define a plaintext representation and provide a <code>convert.py</code> script in the <code>tools</code> directory which allows you to translate between the two formats:</p><ul><li><code>python3 convert.py file.bin file.txt --to-ascii</code> to go from binary to plaintext</li><li><code>python3 convert.py file.txt file.bin --to-binary</code> to go from plaintext to binary</li></ul><p><em>Note</em>: the plaintext format is useful for you to get a human readable representation of the matrices while the binary format will be used by your RISC-V assembly code to load and store matrices.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="plaintext-format">Plaintext Format<a href="#plaintext-format" class="hash-link" aria-label="Direct link to Plaintext Format" title="Direct link to Plaintext Format">​</a></h5><p>The first line of the plaintext file will contain two integers, representing number of rows and columns of the matrix. Every line afterwards is a row of the matrix. For example, a plaintext file containing a 3x3 matrix would look like this:</p><p><em>Note</em>: a newline is required after the last row of the matrix.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="binary-format">Binary Format<a href="#binary-format" class="hash-link" aria-label="Direct link to Binary Format" title="Direct link to Binary Format">​</a></h5><p>The first 8 bytes of the binary file represent two 4 byte integers. These integers are the number of rows and columns of the matrix. Every 4 following bytes represents an integer that is an element of the matrix, in row-major order. There are no gaps between elements. The number of elements must always correspond to the product of number of rows and number of columns. The integers are stores in <em>little-endian</em> format. We elaborate on this bellow.</p><p><em>Note</em>: The size of a MxN matrix stored in this format is <code>sizeof(int) * (2 + m*n)</code>.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="viewing-binary-files">Viewing Binary Files<a href="#viewing-binary-files" class="hash-link" aria-label="Direct link to Viewing Binary Files" title="Direct link to Viewing Binary Files">​</a></h5><p>In order to view arbitrary binary files on the command line we recommend the <code>xxd</code> command. Its default functionality is to output the raw bits of the file in a hex representation.</p><p>For example, let’s say the plaintext example in the previous section is stored in <code>file.txt</code> in the main directory. We can run <code>python convert.py file.txt file.bin --to-binary</code> to convert it to a binary format, then <code>xxd file.bin</code>, which should print the following:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">00000000: 0300 0000 0300 0000 0100 0000 0200 0000  ................</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000010: 0300 0000 0400 0000 0500 0000 0600 0000  ................</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000020: 0700 0000 0800 0000 0900 0000            ............</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you interpret this output 4 bytes at a time (equivalent to 8 hex digits) in little-endian order (see below), you’ll see that they correspond to the values in the plaintext file. Don’t forget that the first and second 4 bytes are integers representing the dimensions and the rest are integer elements of the matrix.</p><p>Please try out the above example by generating the <code>file.txt</code>, running <code>convert.py</code> and inspecting the result with <code>xxd</code>.</p><p><em>Note</em>: while you can also use the <code>hexdump</code> program to inspect bytes, the ordering/endianness of bytes will be different. In order to keep things simple, <code>xxd</code> will be the only tool supported by TAs in office hours and signoffs.</p><p><em>Note</em>: the simple <code>xxd</code> command also works on the Venus web interface shell.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="endianness">Endianness<a href="#endianness" class="hash-link" aria-label="Direct link to Endianness" title="Direct link to Endianness">​</a></h5><p>It is important to note that the bytes are in <em>little-endian</em> order. This means the least significant byte is placed at the lowest memory address. For files, the start of the file is considered the “lower address”. This relates to how we read files into memory, and the fact that the start/first element of an array is usually at the lowest memory address.</p><p>RISC-V uses little-endian by default, and our files are all little-endian as well. In general you should not have to worry about endianness when writing code. But it is important to keep endianess in mind when debugging and inspecting bytes in memory or in a file (e.g., using <code>xxd</code>).</p><p>This screenshot from Venus shows how the integer <code>0x0A0B0C0D</code> is stored in memory:</p><p><img loading="lazy" src="/assets/images/little_endian-662571ccba8c900f69c5072e3c523114.png" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ecalls-and-utilss">Ecalls and Utils.s<a href="#ecalls-and-utilss" class="hash-link" aria-label="Direct link to Ecalls and Utils.s" title="Direct link to Ecalls and Utils.s">​</a></h4><p>The <code>ecall</code> instruction is a special command in RISC-V, and corresponds to a environment/system call. We have created helper functions in <code>src/utils.s</code> that wrap around the various different ecalls for you to use. In the project you must <strong>never make ecalls directly</strong> in you own code. Always use the helper functions.</p><p><strong><em>ecalls are expensive and should be minimally used for efficiency!</em></strong></p><p>All helper functions are documented in inline comments in <code>utils.s</code>, alongside their arguments and return values. Take some time to look through <code>utils.s</code> to familizarize yourself with them. <strong>You will need to use them in the following tasks.</strong></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="file-operations">File Operations<a href="#file-operations" class="hash-link" aria-label="Direct link to File Operations" title="Direct link to File Operations">​</a></h4><p>In this section we are going to provide some more details on the helper functions that are used to access files. You will need to use them in order to implement the <code>read_matrix</code> and <code>write_matrix</code> functions.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="fopen"><code>fopen</code><a href="#fopen" class="hash-link" aria-label="Direct link to fopen" title="Direct link to fopen">​</a></h5><p>Opens a file that we can then read and/or write to, depending on the permission bit we provide. Returns a file descriptor, which is a unique integer tied to the file Must be called on a file before any other operations can be done on it.</p><ul><li><strong>Arguments:</strong><ul><li><code>a1</code> is a pointer to a string containing the filename of the file to open</li><li><code>a2</code> is an integer denoting the permissions we open the file with. For example, we can open the file with read permissions, which prevents us from writing to it. For this project, we only really care about a few basic permission bits: <code>0</code>, which corresponds to <code>r</code> for read only permission, and <code>1</code> which corresponds to <code>w</code> for write only permission. <em>Note</em>: <code>w</code> will overwrite the file if it already exists, and create it if it doesn’t.</li></ul></li><li><strong>Return Values</strong><ul><li><code>a0</code> is a file descriptor, which is a unique integer tied to the file. We will call future file-related functions on this file descriptor, so we know which opened file we’re reading/writing/closing. On failure, <code>a0</code> is set to <code>-1</code>.</li></ul></li></ul><h5 class="anchor anchorWithStickyNavbar_LWe7" id="fread"><code>fread</code><a href="#fread" class="hash-link" aria-label="Direct link to fread" title="Direct link to fread">​</a></h5><p>Reads a given number of bytes from a file into a buffer, which is a preallocated chunk of memory to store the bytes. Note that repeated reads will read consecutive bytes from the file. For example, two <code>fread</code>s of 8 bytes on a file will read the first 8 bytes and then the second 8 bytes. It will not read the same 8 bytes twice.</p><ul><li><strong>Arguments:</strong><ul><li><code>a1</code> is the file descriptor of the file we want to read from, previously returned by <code>fopen</code>.</li><li><code>a2</code> is a pointer to the buffer that we’re going to read the bytes from the file into. This must be an appropriate amount of memory that was allocated before calling the function, and passed in as a pointer.</li><li><code>a3</code> is the number of bytes to read from the file.</li></ul></li><li><strong>Return Values</strong><ul><li><code>a0</code> is the number of bytes actually read from the file. If the number of bytes actually read differs from the number of bytes specified in the input, then we either hit the end of the file or there was an error.</li></ul></li></ul><h5 class="anchor anchorWithStickyNavbar_LWe7" id="fwrite"><code>fwrite</code><a href="#fwrite" class="hash-link" aria-label="Direct link to fwrite" title="Direct link to fwrite">​</a></h5><p>Writes a given number of elements of a given size. Like <code>fread</code>, subsequent writes to the same file do not overlap, but are rather appended to each other. Note that unlike <code>fread</code>, we don’t pass in the total number of bytes but rather the total number of elements and the size of each element in bytes. We can multiply the two to find the total number of bytes written.</p><p>Additionally, note that our writes aren’t actually saved until we run <code>fclose</code> or <code>fflush</code>.</p><ul><li><strong>Arguments:</strong><ul><li><code>a1</code> is the file descriptor of the file we want to write to, previously returned by <code>fopen</code>.</li><li><code>a2</code> is a pointer to a buffer containing what we want to write to the file.</li><li><code>a3</code> is the number of elements to write out of the buffer</li><li><code>a4</code> is the size of each buffer element in bytes</li></ul></li><li><strong>Return Values</strong><ul><li><code>a0</code> is the number of elements actually written to the file. If <code>a0 != a3</code>, then we either hit the end of the file or there was an error.</li></ul></li></ul><h5 class="anchor anchorWithStickyNavbar_LWe7" id="fclose"><code>fclose</code><a href="#fclose" class="hash-link" aria-label="Direct link to fclose" title="Direct link to fclose">​</a></h5><p>Closes the file once we’re done with it, saving any writes we’ve made to it.</p><ul><li><strong>Arguments:</strong><ul><li><code>a1</code> is the file descriptor of the file we want to close to, previously returned by <code>fopen</code>.</li></ul></li><li><strong>Return Values</strong><ul><li><code>a0</code> is 0 on success, and -1 otherwise.</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="task-1-read-matrix">Task 1: Read Matrix<a href="#task-1-read-matrix" class="hash-link" aria-label="Direct link to Task 1: Read Matrix" title="Direct link to Task 1: Read Matrix">​</a></h3><p><strong>Implement</strong> the <code>read_matrix</code> function in <code>src/read_matrix.s</code> which uses the file operations we described above to read a binary matrix file into memory. Be careful to follow the specification in the header comment in the <code>read_matrix.s</code> file. Pay special attention to returning the correct exit codes if any file operation fails or doesn’t return the expected number of bytes.</p><p><em>Note</em>: unique exit codes will help you debug your solution by pointing you to where the program exited.</p><p><em>Hint</em>: Recall that the first 8 bytes contains the two 4 byte dimensions of the matrix, which will tell you how many bytes to read from the rest of the file. Additionally, recall that the binary matrix file is already in row-major order.</p><p><em>Hint</em>: You’ll need to allocate memory for the matrix in this function as well. This will require calls to <code>malloc</code> , which is in <code>util.s</code> and also described in the background section above.</p><p><em>Note</em>: RISC-V only allows for <code>a0</code> and <code>a1</code> to be return registers, and our function needs to return three values: The pointer to the matrix in memory, the number of rows, and the number of columns. We get around this by having two int pointers passed in as arguments. We set these integers to the number of rows and columns, and return just the pointer to the matrix.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="testing-read-matrix">Testing: Read Matrix<a href="#testing-read-matrix" class="hash-link" aria-label="Direct link to Testing: Read Matrix" title="Direct link to Testing: Read Matrix">​</a></h4><p>We only provide a skeleton test. By now you should be familiar with how to use the testing framework.</p><p>You can run the unit test by running the following command in the <code>unittest</code> directory:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">python3 -m unittest unittests.TestReadMatrix -v</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><em>Hint</em>: as before, you will need to add multiple test to achieve 100% coverage.</p><p><em>Hint</em>: You can use the <code>fail</code> argument to the <code>execute</code> method in order to make system functions fail. This works for <code>fopen</code>, <code>fclose</code>, <code>fread</code>, <code>fwrite</code> and <code>malloc</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="task-2-write-matrix">Task 2: Write Matrix<a href="#task-2-write-matrix" class="hash-link" aria-label="Direct link to Task 2: Write Matrix" title="Direct link to Task 2: Write Matrix">​</a></h3><p><strong>Implement</strong> the <code>write_matrix</code> function in <code>src/write_matrix.s</code> which uses the file operations we described above to write from memory to a binary matrix file. Be careful to follow the specification in the header comment in the <code>write_matrix.s</code> file. Pay special attention to returning the correct exit codes if any file operation fails or doesn’t return the expected number of bytes.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="testing-write-matrix">Testing: Write Matrix<a href="#testing-write-matrix" class="hash-link" aria-label="Direct link to Testing: Write Matrix" title="Direct link to Testing: Write Matrix">​</a></h4><p>We only provide a skeleton test. By now you should be familiar with how to use the testing framework.</p><p>You can run the unit test by running the following command in the <code>unittest</code> directory:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">python3 -m unittest unittests.TestWriteMatrix -v</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><em>Hint</em>: as before, you will need to add multiple test to achieve 100% coverage.</p><p><em>Hint</em>: You can use the <code>fail</code> argument to the <code>execute</code> method in order to make system functions fail. This works for <code>fopen</code>, <code>fclose</code>, <code>fread</code>, <code>fwrite</code> and <code>malloc</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="task-3-putting-it-all-together">Task 3: Putting it all Together<a href="#task-3-putting-it-all-together" class="hash-link" aria-label="Direct link to Task 3: Putting it all Together" title="Direct link to Task 3: Putting it all Together">​</a></h3><p><strong>Implement</strong> the <code>classify</code> function in <code>src/classify.s</code>. Be careful to follow the specification in the header comment in the <code>classify.s</code> file. Pay special attention to returning the correct exit codes if any file operation fails or doesn’t return the expected number of bytes and the expected printing behavior.</p><p>This will bring together everything you’ve written so far, and create a basic sequence of functions that will allow you to classifiy the preprocessed MNIST inputs using the pretrained matrices we’ve provided. You may need to malloc space when reading in matrices and computing the layers of the network, but remember to always free all data allocated at the end of this process. More information about the <code>free</code> function is available in <code>utils.s</code> and the background section above. The classify function will be wrapped by the <code>main.s</code> file meaning you still must follow calling convention! The <code>main.s</code> file, in what we gave you, is a dummy main which will directly call your <code>classify</code> function (and pass in the command line arguments) though it could always do more than that! You should view the <code>classify</code> function as a library function which may be called by a program multiple times to perform classifications on different inputs so you should be very careful to adhear to its specification.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="command-line-arguments-and-file-paths">Command Line Arguments and File Paths<a href="#command-line-arguments-and-file-paths" class="hash-link" aria-label="Direct link to Command Line Arguments and File Paths" title="Direct link to Command Line Arguments and File Paths">​</a></h4><p>The filepaths for the <code>input</code>, <code>m0</code>, <code>m1</code>, and the <code>output</code> to write to will all be passed in on the command line. RISC-V handles command line arguments in the same way as C, at the start of the main function <code>a0</code> and <code>a1</code> will be set to <code>argc</code> and <code>argv</code> respectively. In addition, we have added an arg <code>a2</code> which will tell you if you should print out the classification value and a new line if it is zero. If this is not set to 0, you <strong>MUST NOT</strong> print out anything or you will fail tests! This arg can be useful if you want to run multiple classifications in the same script.</p><p>We will call <code>main.s</code> in the following way from the root directory: <code>java -jar tools/venus.jar &lt;venus flags&gt; src/main.s &lt;M0_PATH&gt; &lt;M1_PATH&gt; &lt;INPUT_PATH&gt; &lt;OUTPUT_PATH&gt;</code></p><p>If you’re testing from any other directory, make sure your path to <code>main.s</code> and filepaths correspond to your CWD (current working directory).</p><p>Note that the pointer for to the string <code>M0_PATH</code> will be located at index 1 of <code>argv</code>, <code>M1_PATH</code> at index 2, and so on. <code>venus flags</code> are not considered in total number of command line arguments.</p><p><em>Note</em>: If the number of command line arguments is different from what is expected, exit with the correct exit code.</p><p><em>Note</em>: While <code>classify</code> is its own function, we are acting as if it is the main function. Making it a function other than main is useful as we can now chain classifications and perform more complex procedures as we can get the result of a classification programmatically and perform other operations based off of the result!</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="the-network">The Network<a href="#the-network" class="hash-link" aria-label="Direct link to The Network" title="Direct link to The Network">​</a></h4><p>The first thing you’ll need to do (after verifying the number of command line arguments) is load <code>m0</code>, <code>m1</code>, and the <code>input</code> matrices into memory by making multiple calls to <code>read_matrix</code>, using command line arguments. Remember you need to pass in two integer pointers as arguments.</p><p>Next, you’ll want to use those three matrices to calculate the scores for our input. Our network consists of a matrix multiplication with <code>m0</code>, followed by a relu on the result, and then a second matrix multiplication with <code>m1</code>. At the end of this, we will have a matrix of scores for each classification. We then pick the index with the highest score, and that index is the classification for our input.</p><p>Given two weight matrices <code>m0</code> and <code>m1</code>, along with an input matrix <code>input</code>, the pseudocode to generate the scores for each class is as follows:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">hidden_layer = matmul(m0, input)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">relu(hidden_layer) # Recall that relu is performed in-place</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scores = matmul(m1, hidden_layer)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Once you’ve obtained the scores, we expect you to save them to the output file passed in on the command line. Then, call <code>argmax</code>, which will return a single integer representing the classification for your input, and print it (if the value of <code>a2</code> indicates that you should print).</p><p><em>Hint</em>: when calling <code>argmax</code> and <code>relu</code>, you should treat your inputs as 1D arrays. That means the length you pass into the function should be the number of elements in your entire matrix.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="testing-classify">Testing <code>classify</code><a href="#testing-classify" class="hash-link" aria-label="Direct link to testing-classify" title="Direct link to testing-classify">​</a></h4><p>A simple sanity check can be run like this:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">python3 -m unittest unittests.TestMain -v</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You should add more test cases to <code>TestClassify</code> in order to try out some of the corner cases in the spec.</p><p><em>Hint</em>: with the testing facilities that we provide to you, you probably will not be able to reach 100% coverage for your <code>classify</code> code. Do you know why?</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="test-inputs-and-outputs">Test Inputs and Outputs<a href="#test-inputs-and-outputs" class="hash-link" aria-label="Direct link to Test Inputs and Outputs" title="Direct link to Test Inputs and Outputs">​</a></h4><p>All test inputs are contained in <code>inputs</code>. Inside, you’ll find a folder containing inputs for the mnist network, as well three other folders containing smaller networks.</p><p>Each network folder contains a <code>bin</code> and <code>txt</code> subfolder. The <code>bin</code> subfolder contains the binary files that you’ll run <code>main.s</code> on, while the <code>txt</code> subfolder contains the plaintext versions for debugging and calculating the expected output.</p><p>Within the <code>bin</code> and <code>txt</code> subfolders, you’ll find files for <code>m0</code> and <code>m1</code> which define the network, and a folder containing several inputs.</p><p>For MNIST, there are two additional folders:</p><ul><li><code>txt/labels/</code> contains the true labels for each input, which are the actual digits that each corresponding input image contains.</li><li><code>student_inputs/</code> contains a script to help you run your own input images, as well as an example.</li></ul><h5 class="anchor anchorWithStickyNavbar_LWe7" id="simple">Simple<a href="#simple" class="hash-link" aria-label="Direct link to Simple" title="Direct link to Simple">​</a></h5><p>Apart from MNIST, we’ve provided several smaller input networks for you to run your <code>main</code> function on. <code>simple0</code>, <code>simple1</code>, and <code>simple2</code> are all smaller inputs that will be easier to debug.</p><p>To test on the first input in <code>simple0</code> for example, run the following:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">java -jar tools/venus.jar src/main.s -ms -1 inputs/simple0/bin/m0.bin inputs/simple0/bin/m1.bin inputs/simple0/bin/inputs/input0.bin  outputs/test_basic_main/student_basic_output.bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can then convert the written file to plaintext, check that it’s values are correct, and that the printed integer is indeed the index of the largest element in the output file.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">python tools/convert.py --to-ascii output.bin output.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For verifying that the output file itself is correct, you can run the inputs through a matrix multiplication calculator like <a href="https://web.archive.org/web/20220121162944/https://m.matrix.reshish.com/multCalculation.php" target="_blank" rel="noopener noreferrer">this one</a>, which allows you to click “insert” and copy/paste directly from your plaintext matrix file. Make sure you manually set values to zero for the ReLU step.</p><p><em>Note</em>: the provided files cover a variety of dimensions. For example the <code>simple2</code> inputs have more than one column in them, meaning that your “scores” matrix will also have more than one column. Your code should still work as expected in this case, writing the matrix of “scores” to a file, and printing a single integer that is the row-major index of the largest element of that matrix.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="mnist">MNIST<a href="#mnist" class="hash-link" aria-label="Direct link to MNIST" title="Direct link to MNIST">​</a></h5><p>All the files for testing the mnist network are contained in <code>inputs/mnist</code>. There are both binary and plaintext versions of <code>m0</code>, <code>m1</code>, and 9 input files.</p><p>To test on the first input file for example, run the following:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">java -jar venus.jar src/main.s -ms -1 inputs/mnist/bin/m0.bin inputs/mnist/bin/m1.bin inputs/mnist/bin/inputs/mnist_input0.bin  outputs/test_mnist_main/student_mnist_outputs.bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>(Note that we run with the <code>-ms -1</code> flag, as MNIST inputs are large and we need to increase the max instructions Venus will run)</p><p>This should write a binary matrix file <code>student_mnist_outputs.bin</code> which contains your scores for each digit, and print out the digit with the highest score. You can compare the printed digit versus the one in <code>inputs/mnist/txt/labels/label0.txt</code>.</p><p>You can check the printed digit printed by <code>main</code> against the plaintext labels for each of the input files in the <code>mnist/txt/labels</code> folder.</p><p>We’ve also included a script <code>inputs/mnist/txt/print_mnist.py</code>, which will allow you to view the actual image for every mnist input. For example, you can run the following command from the directory <code>inputs/mnist/txt</code> to print the actual image for <code>mnist_input8</code> as ASCII art alongside the true label. If you run the command from your root directory, include the full path.</p><p><em>Hint</em>: not all inputs will classify properly. A neural network will practically never have 100% accuracy in its predictions. In our test cases specifically, <code>mnist_input2</code> and <code>mnist_input7</code> will be misclassified to 9 and 8 respectively. All other test cases should classify correctly.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="generating-your-own-mnist-inputs">Generating Your Own MNIST Inputs<a href="#generating-your-own-mnist-inputs" class="hash-link" aria-label="Direct link to Generating Your Own MNIST Inputs" title="Direct link to Generating Your Own MNIST Inputs">​</a></h5><p>Just for fun, you can also draw your own handwritten digits and pass them to the neural net. First, open up any basic drawing program like Microsoft Paint. Next, resize the image to 28x28 pixels, draw your digit, and save it as a <code>.bmp</code> file in the directory <code>inputs/mnist/student_inputs/</code>.</p><p>Inside that directory, we’ve provided <code>bmp_to_bin.py</code> to turn this <code>.bmp</code> file into a <code>.bin</code> file for the neural net, as well as an <code>example.bmp</code> file. To convert it, run the following from inside the <code>inputs/mnist/student_inputs</code> directory:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">python bmp_to_bin.py example</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This will read in the <code>example.bmp</code> file, and create an <code>example.bin</code> file. We can then input it into our neural net, alongside the provided <code>m0</code> and <code>m1</code> matrices.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">java -jar venus.jar src/main.s -ms -1 -it inputs/mnist/bin/m0.bin inputs/mnist/bin/m1.bin inputs/mnist/student_inputs/example.bin  outputs/test_mnist_main/student_input_mnist_output.bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can convert and run your own <code>.bmp</code> files in the same way. You should be able to achieve a reasonable accuracy with your own input images.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="submitting-your-code-1">Submitting Your Code<a href="#submitting-your-code-1" class="hash-link" aria-label="Direct link to Submitting Your Code" title="Direct link to Submitting Your Code">​</a></h3><p>Please submit using Gradescope to Project 1B, using the GitHub submission option to ensure that your files are in the right place.</p><p><em>Note</em>: you should not add any <code>.import</code> statements to the starter code. For example, when the autograder is importing <code>matmul.s</code>, it will also import <code>dot.s</code> and <code>utils.s</code>, so your <code>matmul.s</code> file itself should never contain any <code>.import</code> statements.</p><p><em>Note</em>: also make sure to not have any <code>ecall</code> instructions in your code. Use the functions we provide in <code>utils.s</code>.</p><p><em>Hint</em>: make sure to consult the <a href="#general-advice-and-grading">general advice and grading</a> section if you want to improve your submission.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="frequently-asked-questions">Frequently Asked Questions<a href="#frequently-asked-questions" class="hash-link" aria-label="Direct link to Frequently Asked Questions" title="Direct link to Frequently Asked Questions">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="general">General<a href="#general" class="hash-link" aria-label="Direct link to General" title="Direct link to General">​</a></h3><ul><li><strong>Q G.1</strong>: Which lectures are required for working on project 2?<br><strong>A G.1</strong>: lectures 7, 8, 9 and 10</li><li><strong>Q G.2</strong>: Are there preformance requirements? <strong>A G.2</strong>: While there are no specific requirements, your program must be reasonably efficient. Each test of the autograder gives a timeout much larger than what it takes for the staff solution to run so if your submission times out, your solutions is not efficient. Common causes is excessive calls to ecalls. Those should be used spareingly otherwise your program will become much less efficient.</li><li><strong>Q G.3</strong>: If I have a bug in , will I lose credit for other functions which use this function? <!-- -->*<!-- -->*<!-- -->A G.3<!-- -->*<!-- -->*<!-- -->: No! We have designed the autograder to only test a specific function at a time. This means if you fail a test, it will not cause you to fail other tests. Note that if there are multiple tests testing the same function for different things, you will fail those tests.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="unit-testing-framework">Unit Testing Framework<a href="#unit-testing-framework" class="hash-link" aria-label="Direct link to Unit Testing Framework" title="Direct link to Unit Testing Framework">​</a></h3><ul><li><strong>Q U.1</strong>: Why am I not able to <code>git add</code> the generated tests in <code>unittests/assembly</code>?<br><strong>A U.1</strong>: We added a .gitignore file in unittests, because committing generated files is generally considered bad practise.</li><li><strong>Q U.2</strong>: Why do I get an <code>unrecognized arguments -k [...]</code> error when trying to run the unittests?<br><strong>A U.2</strong>: The <code>-k</code> flag was only added in Python 3.7. The project spec was updated with commands that should work on older Python versions as well.</li><li><strong>Q U.3</strong>: How can we check the return code?<br><strong>A U.3</strong>: You can change the optional <code>code</code> argument to the <code>execute</code> method of the <code>AssemblyTest</code> class. By default the expected <code>code</code> is <code>0</code>, to check a different exit code follow the usage <code>t.execute(code=78)</code>.</li><li><strong>Q U.4</strong>: Can we import non-standard libraries like numpy?<br><strong>A U.4</strong>: The autograder will only have access to the Python standard library and an <code>import numpy</code> will make it fail. You can always play around with numpy by making a new unittest file. However, these additional tests will not be considered by the autograder.</li><li><strong>Q U.5</strong>: What exactly do you measure for coverage?<br><strong>A U.5</strong>: We measure the number of times an instruction in your implementation (e.g. in <code>abs.s</code>) was executed across all your tests. So a single test alone does not need to cover all instructions in your code. In order to get points for coverage you need to have tests that - together - execute every single instruction in your implementation at least once. Simply, cover all branches and different flows of execution through your program.</li><li><strong>Q U.6</strong>: How can I see the instructions that I am not covering?<br><strong>A U.6</strong>: In the call to <code>print_coverage</code>, that will be executed after all your tests are run, change <code>verbose</code> to <code>True</code>. This will print out the coverage for every single instruction in your implementation.</li><li><strong>Q U.7</strong>: Why am I getting an <code>argument of type &#x27;WindowsPath&#x27; is not iterable</code> error on Windows?<br><strong>A U.7</strong>: On Windows you need Python 3.8 (the latest stable release) to run the unit tests. Alternatively you can use WSL which should work with older Python 3 versions.</li><li><strong>Q U.8</strong>: Can we change the arguments to some of the tests?<br><strong>A U.8</strong>: Feel free to change the code we provide. The only thing that needs to stay the same are the names of the TestCase classes. The autograder has these hard coded when measuring your coverage.</li><li><strong>Q U.9</strong>: Why am I getting a <code>ImportError: Failed to import test module: TestAbs</code> error?<br><strong>A U.9</strong>: You need to run the unit tests from the <code>unittests</code> directory!</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="part-a">Part A<a href="#part-a" class="hash-link" aria-label="Direct link to Part A" title="Direct link to Part A">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="abs">Abs<a href="#abs" class="hash-link" aria-label="Direct link to Abs" title="Direct link to Abs">​</a></h4><ul><li><strong>Q A.1</strong>: How thoroughly should we test the <code>abs</code> function?<br><strong>A A.1</strong>: The <code>abs</code> function is just an introductory example. If you did everything we showed you in the intro video, you should be good to go!</li><li><strong>Q A.2</strong>: Are we graded on <code>abs</code>?<br><strong>A A.2</strong>: The autograder checks to make sure that you successfully made the changes that we show you in the video. Nothing beyond that.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="relu-and-argmax">ReLU and ArgMax<a href="#relu-and-argmax" class="hash-link" aria-label="Direct link to ReLU and ArgMax" title="Direct link to ReLU and ArgMax">​</a></h4><ul><li><strong>Q X.1</strong>: How do I exit (or terminate) the program with an error code?<br><strong>A X.1</strong>: Have a look at the <code>exit2</code> function that we provide in <code>utils.s</code></li><li><strong>Q X.2</strong>: Should we copy over functions from <code>utils.s</code> to our own code?<br><strong>A X.2</strong>: Please <strong>never</strong> copy a function out of utils.s! When you write a unit test, <code>utils.s</code> will automatically be imported. When debugging in venus, make sure that you run your unit test (found in <code>unittests/assembly</code>) instead of trying to run the <code>relu.s</code> file directly, e.g., <code>vdb unittests/assembly/TestRelu_test_simple.s</code>. We show you how to do this in the introductory video.</li><li><strong>Q X.3</strong>: Why do I get a <code>could not find label exit2</code> or <code>label exit2 used but not defined</code> error?<br><strong>A X.3</strong>: You should never run your <code>relu.s</code> file in venus. Instead run a unit test, e.g., <code>vdb unittests/assembly/TestRelu_test_simple.s</code></li><li><strong>Q X.4</strong>: What do you mean by a 1-D vector?<br><strong>A X.4</strong>: The relu function will treat the matrix as a contiguous vector, e.g. a <code>3x2</code> matrix would be treated as a vector of size <code>6</code>.</li><li><strong>Q X.5</strong>: Do we always need to fill in an epilogue and a prologue?<br><strong>A X.5</strong>: You always need to obey by the calling convention! Sometimes no additional code is required for that and the epilogue or the prologue may be left empty in that case.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="dot-product">Dot Product<a href="#dot-product" class="hash-link" aria-label="Direct link to Dot Product" title="Direct link to Dot Product">​</a></h4><ul><li><strong>Q D.1</strong>: How can I verify that the vector length argument actually matches the size of the memory allocated for the vector? <em>OR</em> How can I verify that enough memory was allocated for the vector?<br><strong>A D.1</strong>: Like in C, there is no way for the function to verify that the vector length argument actually matches the size of memory allocated for the vector.</li><li><strong>Q D.2</strong>: Are we allowed to add extra labels?<br><strong>A D.2</strong>: Yes, just do not make them global (<code>.globl</code>).</li><li><strong>Q D.3</strong>: Can we assume that the autograder might change registers to test calling convention like lab04’s autograder did?<br><strong>A D.3</strong>: The autograder might change some registers when you call a function (but only the ones it is allowed to overwrite). Make sure to follow the calling conventions, also when calling your own functions (like <code>dot</code> from <code>matmul</code>)!</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="matmul">Matmul<a href="#matmul" class="hash-link" aria-label="Direct link to Matmul" title="Direct link to Matmul">​</a></h4><ul><li><strong>Q M.1</strong>: Can we assume that the memory region pointed to by <code>a6</code> has enough space to store the result?<br><strong>A M.2</strong>: The region of memory that <code>a6</code> is pointing to has enough space to fit all values of the result <code>d</code>. The matmul function itself does <strong>not</strong> have to call <code>malloc</code> to allocate space for the result.</li><li><strong>Q M.3</strong>: Can we assume that the dimensions that are provided in the argument match the number of elements in the array? If we cannot, how can we check the length of the array?<br><strong>A M.3</strong>: Like in C, there is no way for the function to verify that the matrix size argument actually matches the size of memory allocated for the matrix.</li><li><strong>Q M.4</strong>: Is <code>matmul</code> only supposed to work on matrices that are square?<br><strong>A M.4</strong>: Matrices don’t need to be square. Checking that the dimensions of m0 and m1 match is one of the three error checks you need to perform (see the description in <code>matmul.s</code> for a list of all the checks you need to perform).</li><li><strong>Q M.5</strong>: Can we assume that <code>d</code> is initialized to anything in particular?<br><strong>A M.5</strong>: No. Assume that enough memory for <code>d</code> is allocated, but the values are uninitialized.</li><li><strong>Q M.6</strong>: Is it ok to check for invalid arguments before the Prologue?<br><strong>A M.6</strong>: Yes. Just make sure that you do not violate the calling conventions.</li><li><strong>Q M.7</strong>: Is it ok to save the value of a <code>t</code> register to the stack and restore it after calling a function?<br><strong>A M.7</strong>: Yes. All the calling convention says is that <code>t</code> registers could contain arbitrary values after you call a function. Just make sure to properly decrement/increment the stack pointer.</li><li><strong>Q M.8</strong>: What does it mean for the dimensions of <code>m0</code> and <code>m1</code> to “make sense”?<br><strong>A M.8</strong>: The number of rows and columns should be greater or equal to 1.</li><li><strong>Q M.9</strong>: If both the dimensions of <code>m0</code> and the dimensions of <code>m1</code> don’t make sense, should we exit with code 72 or 73?<br><strong>A M.9</strong>: You need to check the errors from top to bottom in the order they are listed in the header comment.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="part-b">Part B<a href="#part-b" class="hash-link" aria-label="Direct link to Part B" title="Direct link to Part B">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="read-matrix">Read Matrix<a href="#read-matrix" class="hash-link" aria-label="Direct link to Read Matrix" title="Direct link to Read Matrix">​</a></h4><ul><li><strong>Q R.1</strong>: How can we tell if <code>malloc</code> failed?<br><strong>A R.1</strong>: The returned address will be <code>0</code>.</li><li><strong>Q R.2</strong>: How can we tell if <code>fopen</code> failed?<br><strong>A R.2</strong>: Please read the section on <code>fopen</code> in the <a href="#file-operations">project spec</a>.</li><li><strong>Q R.3</strong>: When are we supposed to exit with code <code>1</code>?<br><strong>A R.3</strong>: Please <strong>never</strong> exit with code <code>1</code>. We had some old instructions that we failed to remove (fixed now). This semester, all error codes are two digit numbers (decimal).</li><li><strong>Q R.4</strong>: Some of my <code>.data</code> is not aligned to a multiple of four. Why?<br><strong>A R.4</strong>: The venus linker does not align any of the static data sections. Thus a <code>.word</code> could start at any address.</li><li><strong>Q R.5</strong>: What error code should we use if the matrix is empty?<br><strong>A R.5</strong>: Since we do not specify an error code for this, you can assume that all matrices that are read in will have dimensions that make sense.</li><li><strong>Q R.6</strong>: How can we test that the output array of <code>read_matrix</code> is correct?<br><strong>A R.6</strong>: Checkout the <code>check_array_pointer</code> method of the <code>AssemblyTest</code> class.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="write-matrix">Write Matrix<a href="#write-matrix" class="hash-link" aria-label="Direct link to Write Matrix" title="Direct link to Write Matrix">​</a></h4><ul><li><strong>Q W.1</strong>: Are we supposed to call <code>fflush</code>?<br><strong>A W.1</strong>: There should be no need to call <code>fflush</code>.</li><li><strong>Q W.2</strong>: What exit code should I return if <code>malloc</code> fails?<br><strong>A W.2</strong>: While using <code>malloc</code> is not required to implement this function, you should always return the exit code <code>88</code> in case malloc fails.</li><li><strong>Q W.3</strong>: <code>do_write_matrix</code> always checks the output file, but when I am testing an error case, there will be no file produced. How can I deal with this?<br><strong>A W.3</strong>: You are free to add your own code to <code>do_write_matrix</code>, e.g., in order to skip the file check when it is unnecessary</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="classify">Classify<a href="#classify" class="hash-link" aria-label="Direct link to Classify" title="Direct link to Classify">​</a></h4><ul><li><strong>Q C.1</strong>: Can we assume that the input matrix is flattened?<br><strong>A C.1</strong>: The inputs to the MNIST and the <code>simple0</code> networks will be matrices with N rows and a single column. You can look at example inputs like this: <code>cat inputs/simple0/txt/inputs/input0.txt</code>. However, the simple2 network actually expects inputs with more than one column. Please consult the <a href="#simple">project spec</a> to try and understand how to handle that case.</li><li><strong>Q C.2</strong>: How long should it take to classify an MNIST input?<br><strong>A C.2</strong>: On a 5-year old laptop with OpenJDK 1.8, the staff solution takes ~33s or ~1.2 million instructions to classify <code>mnist_input0.bin</code>.</li><li><strong>Q C.3</strong>: Do we have to free previously allocated memory if a call to <code>malloc</code> fails?<br><strong>A C.3</strong>: No. You do not need to free before exiting.</li><li><strong>Q C.4</strong>: What is the difference between <code>TestClassify</code> and <code>TestMain</code>?<br><strong>A C.4</strong>: <code>TestMain</code> is very similar to the sanity checks that the autograder runs. <code>TestClassify</code> was meant for you to extend in order to test corner cases. For example <code>TestMain</code> always sets <code>a0</code> to <code>0</code>, TestClassify should test the other value for <code>a2</code>.</li><li><strong>Q C.5</strong>: How long does the autograder take? <strong>A C.5</strong>: On average it can take 2-5min to run.</li><li><strong>Q C.6</strong>: Should our code be able to create a folder if a directory in the output path does not exist?<br><strong>A C.6</strong>: No. You can assume that the output directory exists. Only the file needs to be created by <code>fopen</code>.</li></ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/curriculum-resource/cs61c/projects/proj1"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Project1</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/curriculum-resource/cs61c/projects/proj3"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Project3</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#background" class="table-of-contents__link toc-highlight">Background</a><ul><li><a href="#objectives" class="table-of-contents__link toc-highlight">Objectives</a></li><li><a href="#getting-started" class="table-of-contents__link toc-highlight">Getting Started</a></li><li><a href="#java-and-python-3-setup" class="table-of-contents__link toc-highlight">Java and Python 3 Setup</a></li></ul></li><li><a href="#part-a-mathematical-functions" class="table-of-contents__link toc-highlight">Part A: Mathematical Functions</a><ul><li><a href="#general-advice-and-grading" class="table-of-contents__link toc-highlight">General Advice and Grading</a></li><li><a href="#task-0-getting-started-with-the-abs-function" class="table-of-contents__link toc-highlight">Task 0: Getting Started with the Abs Function</a></li><li><a href="#background-knowledge" class="table-of-contents__link toc-highlight">Background Knowledge</a></li><li><a href="#task-1-relu" class="table-of-contents__link toc-highlight">Task 1: ReLU</a></li><li><a href="#task-2-argmax" class="table-of-contents__link toc-highlight">Task 2: ArgMax</a></li><li><a href="#task-31-dot-product" class="table-of-contents__link toc-highlight">Task 3.1: Dot Product</a></li><li><a href="#task-32-matrix-multiplication" class="table-of-contents__link toc-highlight">Task 3.2: Matrix Multiplication</a></li><li><a href="#submitting-your-code" class="table-of-contents__link toc-highlight">Submitting Your Code</a></li></ul></li><li><a href="#part-b-file-operations-and-main" class="table-of-contents__link toc-highlight">Part B: File Operations and Main</a><ul><li><a href="#background-knowledge-1" class="table-of-contents__link toc-highlight">Background Knowledge</a></li><li><a href="#neural-networks" class="table-of-contents__link toc-highlight">Neural Networks</a></li><li><a href="#handwritten-digit-classification" class="table-of-contents__link toc-highlight">Handwritten Digit Classification</a></li><li><a href="#task-1-read-matrix" class="table-of-contents__link toc-highlight">Task 1: Read Matrix</a></li><li><a href="#task-2-write-matrix" class="table-of-contents__link toc-highlight">Task 2: Write Matrix</a></li><li><a href="#task-3-putting-it-all-together" class="table-of-contents__link toc-highlight">Task 3: Putting it all Together</a></li><li><a href="#submitting-your-code-1" class="table-of-contents__link toc-highlight">Submitting Your Code</a></li></ul></li><li><a href="#frequently-asked-questions" class="table-of-contents__link toc-highlight">Frequently Asked Questions</a><ul><li><a href="#general" class="table-of-contents__link toc-highlight">General</a></li><li><a href="#unit-testing-framework" class="table-of-contents__link toc-highlight">Unit Testing Framework</a></li><li><a href="#part-a" class="table-of-contents__link toc-highlight">Part A</a></li><li><a href="#part-b" class="table-of-contents__link toc-highlight">Part B</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">CS学习社区</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">路线图</a></li></ul></div><div class="col footer__col"><div class="footer__title">社区</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.6b2cf2bb.js"></script>
<script src="/assets/js/main.f7f68978.js"></script>
</body>
</html>